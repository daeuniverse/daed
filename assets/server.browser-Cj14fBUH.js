(function(){var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,i=(e,t)=>()=>(e&&(t=e(e=0)),t),a=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),o=(t,n)=>{let r={};for(var i in t)e(r,i,{get:t[i],enumerable:!0});return n&&e(r,Symbol.toStringTag,{value:`Module`}),r},s=(i,a,o,s)=>{if(a&&typeof a==`object`||typeof a==`function`)for(var c=n(a),l=0,u=c.length,d;l<u;l++)d=c[l],!r.call(i,d)&&d!==o&&e(i,d,{get:(e=>a[e]).bind(null,d),enumerable:!(s=t(a,d))||s.enumerable});return i},c=t=>r.call(t,`module.exports`)?t[`module.exports`]:s(e({},`__esModule`,{value:!0}),t),l=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.stringArray=e.array=e.func=e.error=e.number=e.string=e.boolean=void 0;function t(e){return e===!0||e===!1}e.boolean=t;function n(e){return typeof e==`string`||e instanceof String}e.string=n;function r(e){return typeof e==`number`||e instanceof Number}e.number=r;function i(e){return e instanceof Error}e.error=i;function a(e){return typeof e==`function`}e.func=a;function o(e){return Array.isArray(e)}e.array=o;function s(e){return o(e)&&e.every(e=>n(e))}e.stringArray=s})),u=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.Message=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType=e.RequestType0=e.AbstractMessageSignature=e.ParameterStructures=e.ResponseError=e.ErrorCodes=void 0;let t=l();var n;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3})(n||(e.ErrorCodes=n={})),e.ResponseError=class e extends Error{constructor(r,i,a){super(i),this.code=t.number(r)?r:n.UnknownErrorCode,this.data=a,Object.setPrototypeOf(this,e.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};var r=class e{constructor(e){this.kind=e}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};e.ParameterStructures=r,r.auto=new r(`auto`),r.byPosition=new r(`byPosition`),r.byName=new r(`byName`);var i=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return r.auto}};e.AbstractMessageSignature=i,e.RequestType0=class extends i{constructor(e){super(e,0)}},e.RequestType=class extends i{constructor(e,t=r.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},e.RequestType1=class extends i{constructor(e,t=r.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},e.RequestType2=class extends i{constructor(e){super(e,2)}},e.RequestType3=class extends i{constructor(e){super(e,3)}},e.RequestType4=class extends i{constructor(e){super(e,4)}},e.RequestType5=class extends i{constructor(e){super(e,5)}},e.RequestType6=class extends i{constructor(e){super(e,6)}},e.RequestType7=class extends i{constructor(e){super(e,7)}},e.RequestType8=class extends i{constructor(e){super(e,8)}},e.RequestType9=class extends i{constructor(e){super(e,9)}},e.NotificationType=class extends i{constructor(e,t=r.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},e.NotificationType0=class extends i{constructor(e){super(e,0)}},e.NotificationType1=class extends i{constructor(e,t=r.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},e.NotificationType2=class extends i{constructor(e){super(e,2)}},e.NotificationType3=class extends i{constructor(e){super(e,3)}},e.NotificationType4=class extends i{constructor(e){super(e,4)}},e.NotificationType5=class extends i{constructor(e){super(e,5)}},e.NotificationType6=class extends i{constructor(e){super(e,6)}},e.NotificationType7=class extends i{constructor(e){super(e,7)}},e.NotificationType8=class extends i{constructor(e){super(e,8)}},e.NotificationType9=class extends i{constructor(e){super(e,9)}};var a;(function(e){function n(e){let n=e;return n&&t.string(n.method)&&(t.string(n.id)||t.number(n.id))}e.isRequest=n;function r(e){let n=e;return n&&t.string(n.method)&&e.id===void 0}e.isNotification=r;function i(e){let n=e;return n&&(n.result!==void 0||!!n.error)&&(t.string(n.id)||t.number(n.id)||n.id===null)}e.isResponse=i})(a||(e.Message=a={}))})),d=a((e=>{var t;Object.defineProperty(e,`__esModule`,{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=void 0;var n;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(n||(e.Touch=n={}));var r=class{constructor(){this[t]=`LinkedMap`,this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=n.None){let r=this._map.get(e);if(r)return t!==n.None&&this.touch(r,t),r.value}set(e,t,r=n.None){let i=this._map.get(e);if(i)i.value=t,r!==n.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw Error(`Invalid list`);let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw Error(`LinkedMap got modified during iteration.`);r=r.next}}keys(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw Error(`LinkedMap got modified during iteration.`);if(t){let e={value:t.key,done:!1};return t=t.next,e}else return{value:void 0,done:!0}}};return n}values(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw Error(`LinkedMap got modified during iteration.`);if(t){let e={value:t.value,done:!1};return t=t.next,e}else return{value:void 0,done:!0}}};return n}entries(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw Error(`LinkedMap got modified during iteration.`);if(t){let e={value:[t.key,t.value],done:!1};return t=t.next,e}else return{value:void 0,done:!0}}};return n}[(t=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw Error(`Invalid list`);this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw Error(`Invalid list`);this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw Error(`Invalid list`);e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw Error(`Invalid list`);e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw Error(`Invalid list`);t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw Error(`Invalid list`);if(!(t!==n.First&&t!==n.Last)){if(t===n.First){if(e===this._head)return;let t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===n.Last){if(e===this._tail)return;let t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}};e.LinkedMap=r,e.LRUCache=class extends r{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=n.AsNew){return super.get(e,t)}peek(e){return super.get(e,n.None)}set(e,t){return super.set(e,t,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}})),f=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.Disposable=void 0;var t;(function(e){function t(e){return{dispose:e}}e.create=t})(t||(e.Disposable=t={}))})),p=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0});let t;function n(){if(t===void 0)throw Error(`No runtime abstraction layer installed`);return t}(function(e){function n(e){if(e===void 0)throw Error(`No runtime abstraction layer provided`);t=e}e.install=n})(n||={}),e.default=n})),m=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.Emitter=e.Event=void 0;let t=p();var n;(function(e){let t={dispose(){}};e.None=function(){return t}})(n||(e.Event=n={}));var r=class{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e)if(this._contexts[r]===t){this._callbacks.splice(r,1),this._contexts.splice(r,1);return}else n=!0;if(n)throw Error(`When adding a listener with a context, you should remove it with the same context`)}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let a=0,o=r.length;a<o;a++)try{n.push(r[a].apply(i[a],e))}catch(e){(0,t.default)().console.error(e)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},i=class e{constructor(e){this._options=e}get event(){return this._event||=(t,n,i)=>{this._callbacks||=new r,this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);let a={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,n),a.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(i)&&i.push(a),a},this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&=(this._callbacks.dispose(),void 0)}};e.Emitter=i,i._noop=function(){}})),h=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;let t=p(),n=l(),r=m();var i;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None});function t(t){let r=t;return r&&(r===e.None||r===e.Cancelled||n.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.is=t})(i||(e.CancellationToken=i={}));let a=Object.freeze(function(e,n){let r=(0,t.default)().timer.setTimeout(e.bind(n),0);return{dispose(){r.dispose()}}});var o=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||=new r.Emitter,this._emitter.event)}dispose(){this._emitter&&=(this._emitter.dispose(),void 0)}};e.CancellationTokenSource=class{get token(){return this._token||=new o,this._token}cancel(){this._token?this._token.cancel():this._token=i.Cancelled}dispose(){this._token?this._token instanceof o&&this._token.dispose():this._token=i.None}}})),ee=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.SharedArrayReceiverStrategy=e.SharedArraySenderStrategy=void 0;let t=h();var n;(function(e){e.Continue=0,e.Cancelled=1})(n||={}),e.SharedArraySenderStrategy=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),r=new Int32Array(t,0,1);r[0]=n.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let r=this.buffers.get(t);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,n.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};var r=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===n.Cancelled}get onCancellationRequested(){throw Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`)}},i=class{constructor(e){this.token=new r(e)}cancel(){}dispose(){}};e.SharedArrayReceiverStrategy=class{constructor(){this.kind=`request`}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new t.CancellationTokenSource:new i(n)}}})),g=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.Semaphore=void 0;let t=p();e.Semaphore=class{constructor(e=1){if(e<=0)throw Error(`Capacity must be greater than 0`);this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,t.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw Error(`To many thunks active`);try{let t=e.thunk();t instanceof Promise?t.then(t=>{this._active--,e.resolve(t),this.runNext()},t=>{this._active--,e.reject(t),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}})),_=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=void 0;let t=p(),n=l(),r=m(),i=g();var a;(function(e){function t(e){let t=e;return t&&n.func(t.listen)&&n.func(t.dispose)&&n.func(t.onError)&&n.func(t.onClose)&&n.func(t.onPartialMessage)}e.is=t})(a||(e.MessageReader=a={}));var o=class{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:Error(`Reader received error. Reason: ${n.string(e.message)?e.message:`unknown`}`)}};e.AbstractMessageReader=o;var s;(function(e){function n(e){let n,r,i=new Map,a,o=new Map;if(e===void 0||typeof e==`string`)n=e??`utf-8`;else{if(n=e.charset??`utf-8`,e.contentDecoder!==void 0&&(r=e.contentDecoder,i.set(r.name,r)),e.contentDecoders!==void 0)for(let t of e.contentDecoders)i.set(t.name,t);if(e.contentTypeDecoder!==void 0&&(a=e.contentTypeDecoder,o.set(a.name,a)),e.contentTypeDecoders!==void 0)for(let t of e.contentTypeDecoders)o.set(t.name,t)}return a===void 0&&(a=(0,t.default)().applicationJson.decoder,o.set(a.name,a)),{charset:n,contentDecoder:r,contentDecoders:i,contentTypeDecoder:a,contentTypeDecoders:o}}e.fromOptions=n})(s||={}),e.ReadableStreamMessageReader=class extends o{constructor(e,n){super(),this.readable=e,this.options=s.fromOptions(n),this.buffer=(0,t.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new i.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(e=>{this.onData(e)});return this.readable.onError(e=>this.fireError(e)),this.readable.onClose(()=>this.fireClose()),t}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let e=this.buffer.tryReadHeaders(!0);if(!e)return;let t=e.get(`content-length`);if(!t){this.fireError(Error(`Header must provide a Content-Length property.\n${JSON.stringify(Object.fromEntries(e))}`));return}let n=parseInt(t);if(isNaN(n)){this.fireError(Error(`Content-Length value must be a number. Got ${t}`));return}this.nextMessageLength=n}let e=this.buffer.tryReadBody(this.nextMessageLength);if(e===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let t=this.options.contentDecoder===void 0?e:await this.options.contentDecoder.decode(e),n=await this.options.contentTypeDecoder.decode(t,this.options);this.callback(n)}).catch(e=>{this.fireError(e)})}}catch(e){this.fireError(e)}}clearPartialMessageTimer(){this.partialMessageTimer&&=(this.partialMessageTimer.dispose(),void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,t.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}})),v=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=void 0;let t=p(),n=l(),r=g(),i=m();var a;(function(e){function t(e){let t=e;return t&&n.func(t.dispose)&&n.func(t.onClose)&&n.func(t.onError)&&n.func(t.write)}e.is=t})(a||(e.MessageWriter=a={}));var o=class{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:Error(`Writer received error. Reason: ${n.string(e.message)?e.message:`unknown`}`)}};e.AbstractMessageWriter=o;var s;(function(e){function n(e){return e===void 0||typeof e==`string`?{charset:e??`utf-8`,contentTypeEncoder:(0,t.default)().applicationJson.encoder}:{charset:e.charset??`utf-8`,contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,t.default)().applicationJson.encoder}}e.fromOptions=n})(s||={}),e.WriteableStreamMessageWriter=class extends o{constructor(e,t){super(),this.writable=e,this.options=s.fromOptions(t),this.errorCount=0,this.writeSemaphore=new r.Semaphore(1),this.writable.onError(e=>this.fireError(e)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(e=>this.options.contentEncoder===void 0?e:this.options.contentEncoder.encode(e)).then(t=>{let n=[];return n.push(`Content-Length: `,t.byteLength.toString(),`\r
`),n.push(`\r
`),this.doWrite(e,n,t)},e=>{throw this.fireError(e),e}))}async doWrite(e,t,n){try{return await this.writable.write(t.join(``),`ascii`),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}})),te=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.AbstractMessageBuffer=void 0,e.AbstractMessageBuffer=class{constructor(e=`utf-8`){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e==`string`?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,n=0,r=0,i=0;row:for(;n<this._chunks.length;){let e=this._chunks[n];r=0;column:for(;r<e.length;){switch(e[r]){case 13:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case 10:switch(t){case 1:t=2;break;case 3:t=4,r++;break row;default:t=0}break;default:t=0}r++}i+=e.byteLength,n++}if(t!==4)return;let a=this._read(i+r),o=new Map,s=this.toString(a,`ascii`).split(`\r
`);if(s.length<2)return o;for(let t=0;t<s.length-2;t++){let n=s[t],r=n.indexOf(`:`);if(r===-1)throw Error(`Message header must separate key and value using ':'\n${n}`);let i=n.substr(0,r),a=n.substr(r+1).trim();o.set(e?i.toLowerCase():i,a)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw Error(`Cannot read so many bytes!`);if(this._chunks[0].byteLength===e){let t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){let t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}let t=this.allocNative(e),n=0;for(;e>0;){let r=this._chunks[0];if(r.byteLength>e){let i=r.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}}})),y=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createMessageConnection=e.ConnectionOptions=e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.RequestCancellationReceiverStrategy=e.IdCancellationReceiverStrategy=e.ConnectionStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=e.NullLogger=e.ProgressType=e.ProgressToken=void 0;let t=p(),n=l(),r=u(),i=d(),a=m(),o=h();var s;(function(e){e.type=new r.NotificationType(`$/cancelRequest`)})(s||={});var c;(function(e){function t(e){return typeof e==`string`||typeof e==`number`}e.is=t})(c||(e.ProgressToken=c={}));var f;(function(e){e.type=new r.NotificationType(`$/progress`)})(f||={}),e.ProgressType=class{constructor(){}};var ee;(function(e){function t(e){return n.func(e)}e.is=t})(ee||={}),e.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var g;(function(e){e[e.Off=0]=`Off`,e[e.Messages=1]=`Messages`,e[e.Compact=2]=`Compact`,e[e.Verbose=3]=`Verbose`})(g||(e.Trace=g={}));var _;(function(e){e.Off=`off`,e.Messages=`messages`,e.Compact=`compact`,e.Verbose=`verbose`})(_||(e.TraceValues=_={})),(function(e){function t(t){if(!n.string(t))return e.Off;switch(t=t.toLowerCase(),t){case`off`:return e.Off;case`messages`:return e.Messages;case`compact`:return e.Compact;case`verbose`:return e.Verbose;default:return e.Off}}e.fromString=t;function r(t){switch(t){case e.Off:return`off`;case e.Messages:return`messages`;case e.Compact:return`compact`;case e.Verbose:return`verbose`;default:return`off`}}e.toString=r})(g||(e.Trace=g={}));var v;(function(e){e.Text=`text`,e.JSON=`json`})(v||(e.TraceFormat=v={})),(function(e){function t(t){return n.string(t)?(t=t.toLowerCase(),t===`json`?e.JSON:e.Text):e.Text}e.fromString=t})(v||(e.TraceFormat=v={}));var te;(function(e){e.type=new r.NotificationType(`$/setTrace`)})(te||(e.SetTraceNotification=te={}));var y;(function(e){e.type=new r.NotificationType(`$/logTrace`)})(y||(e.LogTraceNotification=y={}));var b;(function(e){e[e.Closed=1]=`Closed`,e[e.Disposed=2]=`Disposed`,e[e.AlreadyListening=3]=`AlreadyListening`})(b||(e.ConnectionErrors=b={}));var x=class e extends Error{constructor(t,n){super(n),this.code=t,Object.setPrototypeOf(this,e.prototype)}};e.ConnectionError=x;var S;(function(e){function t(e){let t=e;return t&&n.func(t.cancelUndispatched)}e.is=t})(S||(e.ConnectionStrategy=S={}));var ne;(function(e){function t(e){let t=e;return t&&(t.kind===void 0||t.kind===`id`)&&n.func(t.createCancellationTokenSource)&&(t.dispose===void 0||n.func(t.dispose))}e.is=t})(ne||(e.IdCancellationReceiverStrategy=ne={}));var C;(function(e){function t(e){let t=e;return t&&t.kind===`request`&&n.func(t.createCancellationTokenSource)&&(t.dispose===void 0||n.func(t.dispose))}e.is=t})(C||(e.RequestCancellationReceiverStrategy=C={}));var w;(function(e){e.Message=Object.freeze({createCancellationTokenSource(e){return new o.CancellationTokenSource}});function t(e){return ne.is(e)||C.is(e)}e.is=t})(w||(e.CancellationReceiverStrategy=w={}));var T;(function(e){e.Message=Object.freeze({sendCancellation(e,t){return e.sendNotification(s.type,{id:t})},cleanup(e){}});function t(e){let t=e;return t&&n.func(t.sendCancellation)&&n.func(t.cleanup)}e.is=t})(T||(e.CancellationSenderStrategy=T={}));var E;(function(e){e.Message=Object.freeze({receiver:w.Message,sender:T.Message});function t(e){let t=e;return t&&w.is(t.receiver)&&T.is(t.sender)}e.is=t})(E||(e.CancellationStrategy=E={}));var D;(function(e){function t(e){let t=e;return t&&n.func(t.handleMessage)}e.is=t})(D||(e.MessageStrategy=D={}));var O;(function(e){function t(e){let t=e;return t&&(E.is(t.cancellationStrategy)||S.is(t.connectionStrategy)||D.is(t.messageStrategy))}e.is=t})(O||(e.ConnectionOptions=O={}));var k;(function(e){e[e.New=1]=`New`,e[e.Listening=2]=`Listening`,e[e.Closed=3]=`Closed`,e[e.Disposed=4]=`Disposed`})(k||={});function A(l,u,d,p){let m=d===void 0?e.NullLogger:d,h=0,_=0,S=0,C,w=new Map,T,O=new Map,A=new Map,re,j=new i.LinkedMap,M=new Map,N=new Set,P=new Map,F=g.Off,I=v.Text,L,R=k.New,z=new a.Emitter,ie=new a.Emitter,B=new a.Emitter,V=new a.Emitter,H=new a.Emitter,U=p&&p.cancellationStrategy?p.cancellationStrategy:E.Message;function W(e){if(e===null)throw Error(`Can't send requests with id null since the response can't be correlated.`);return`req-`+e.toString()}function ae(e){return e===null?`res-unknown-`+(++S).toString():`res-`+e.toString()}function oe(){return`not-`+(++_).toString()}function se(e,t){r.Message.isRequest(t)?e.set(W(t.id),t):r.Message.isResponse(t)?e.set(ae(t.id),t):e.set(oe(),t)}function ce(e){}function le(){return R===k.Listening}function G(){return R===k.Closed}function K(){return R===k.Disposed}function ue(){(R===k.New||R===k.Listening)&&(R=k.Closed,ie.fire(void 0))}function de(e){z.fire([e,void 0,void 0])}function fe(e){z.fire(e)}l.onClose(ue),l.onError(de),u.onClose(ue),u.onError(fe);function pe(){re||j.size===0||(re=(0,t.default)().timer.setImmediate(()=>{re=void 0,he()}))}function me(e){r.Message.isRequest(e)?_e(e):r.Message.isNotification(e)?ye(e):r.Message.isResponse(e)?ve(e):be(e)}function he(){if(j.size===0)return;let e=j.shift();try{let t=p?.messageStrategy;D.is(t)?t.handleMessage(e,me):me(e)}finally{pe()}}let ge=e=>{try{if(r.Message.isNotification(e)&&e.method===s.type.method){let t=e.params.id,n=W(t),i=j.get(n);if(r.Message.isRequest(i)){let r=p?.connectionStrategy,a=r&&r.cancelUndispatched?r.cancelUndispatched(i,ce):void 0;if(a&&(a.error!==void 0||a.result!==void 0)){j.delete(n),P.delete(t),a.id=i.id,Ce(a,e.method,Date.now()),u.write(a).catch(()=>m.error(`Sending response for canceled message failed.`));return}}let a=P.get(t);if(a!==void 0){a.cancel(),Te(e);return}else N.add(t)}se(j,e)}finally{pe()}};function _e(e){if(K())return;function t(t,n,i){let a={jsonrpc:`2.0`,id:e.id};t instanceof r.ResponseError?a.error=t.toJson():a.result=t===void 0?null:t,Ce(a,n,i),u.write(a).catch(()=>m.error(`Sending response failed.`))}function i(t,n,r){let i={jsonrpc:`2.0`,id:e.id,error:t.toJson()};Ce(i,n,r),u.write(i).catch(()=>m.error(`Sending response failed.`))}function a(t,n,r){t===void 0&&(t=null);let i={jsonrpc:`2.0`,id:e.id,result:t};Ce(i,n,r),u.write(i).catch(()=>m.error(`Sending response failed.`))}we(e);let o=w.get(e.method),s,c;o&&(s=o.type,c=o.handler);let l=Date.now();if(c||C){let o=e.id??String(Date.now()),u=ne.is(U.receiver)?U.receiver.createCancellationTokenSource(o):U.receiver.createCancellationTokenSource(e);e.id!==null&&N.has(e.id)&&u.cancel(),e.id!==null&&P.set(o,u);try{let d;if(c)if(e.params===void 0){if(s!==void 0&&s.numberOfParams!==0){i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines ${s.numberOfParams} params but received none.`),e.method,l);return}d=c(u.token)}else if(Array.isArray(e.params)){if(s!==void 0&&s.parameterStructures===r.ParameterStructures.byName){i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);return}d=c(...e.params,u.token)}else{if(s!==void 0&&s.parameterStructures===r.ParameterStructures.byPosition){i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);return}d=c(e.params,u.token)}else C&&(d=C(e.method,e.params,u.token));let f=d;d?f.then?f.then(n=>{P.delete(o),t(n,e.method,l)},t=>{P.delete(o),t instanceof r.ResponseError?i(t,e.method,l):t&&n.string(t.message)?i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}):(P.delete(o),t(d,e.method,l)):(P.delete(o),a(d,e.method,l))}catch(a){P.delete(o),a instanceof r.ResponseError?t(a,e.method,l):a&&n.string(a.message)?i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${a.message}`),e.method,l):i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else i(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}function ve(e){if(!K())if(e.id===null)e.error?m.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):m.error(`Received response message without id. No further error information provided.`);else{let t=e.id,n=M.get(t);if(Ee(e,n),n!==void 0){M.delete(t);try{if(e.error){let t=e.error;n.reject(new r.ResponseError(t.code,t.message,t.data))}else if(e.result!==void 0)n.resolve(e.result);else throw Error(`Should never happen.`)}catch(e){e.message?m.error(`Response handler '${n.method}' failed with message: ${e.message}`):m.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}function ye(e){if(K())return;let t,n;if(e.method===s.type.method){let t=e.params.id;N.delete(t),Te(e);return}else{let r=O.get(e.method);r&&(n=r.handler,t=r.type)}if(n||T)try{if(Te(e),n)if(e.params===void 0)t!==void 0&&t.numberOfParams!==0&&t.parameterStructures!==r.ParameterStructures.byName&&m.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),n();else if(Array.isArray(e.params)){let i=e.params;e.method===f.type.method&&i.length===2&&c.is(i[0])?n({token:i[0],value:i[1]}):(t!==void 0&&(t.parameterStructures===r.ParameterStructures.byName&&m.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&m.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${i.length} arguments`)),n(...i))}else t!==void 0&&t.parameterStructures===r.ParameterStructures.byPosition&&m.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params);else T&&T(e.method,e.params)}catch(t){t.message?m.error(`Notification handler '${e.method}' failed with message: ${t.message}`):m.error(`Notification handler '${e.method}' failed unexpectedly.`)}else B.fire(e)}function be(e){if(!e){m.error(`Received empty message.`);return}m.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(n.string(t.id)||n.number(t.id)){let e=t.id,n=M.get(e);n&&n.reject(Error(`The received response has neither a result nor an error property.`))}}function q(e){if(e!=null)switch(F){case g.Verbose:return JSON.stringify(e,null,4);case g.Compact:return JSON.stringify(e);default:return}}function xe(e){if(!(F===g.Off||!L))if(I===v.Text){let t;(F===g.Verbose||F===g.Compact)&&e.params&&(t=`Params: ${q(e.params)}\n\n`),L.log(`Sending request '${e.method} - (${e.id})'.`,t)}else J(`send-request`,e)}function Se(e){if(!(F===g.Off||!L))if(I===v.Text){let t;(F===g.Verbose||F===g.Compact)&&(t=e.params?`Params: ${q(e.params)}\n\n`:`No parameters provided.

`),L.log(`Sending notification '${e.method}'.`,t)}else J(`send-notification`,e)}function Ce(e,t,n){if(!(F===g.Off||!L))if(I===v.Text){let r;(F===g.Verbose||F===g.Compact)&&(e.error&&e.error.data?r=`Error data: ${q(e.error.data)}\n\n`:e.result?r=`Result: ${q(e.result)}\n\n`:e.error===void 0&&(r=`No result returned.

`)),L.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else J(`send-response`,e)}function we(e){if(!(F===g.Off||!L))if(I===v.Text){let t;(F===g.Verbose||F===g.Compact)&&e.params&&(t=`Params: ${q(e.params)}\n\n`),L.log(`Received request '${e.method} - (${e.id})'.`,t)}else J(`receive-request`,e)}function Te(e){if(!(F===g.Off||!L||e.method===y.type.method))if(I===v.Text){let t;(F===g.Verbose||F===g.Compact)&&(t=e.params?`Params: ${q(e.params)}\n\n`:`No parameters provided.

`),L.log(`Received notification '${e.method}'.`,t)}else J(`receive-notification`,e)}function Ee(e,t){if(!(F===g.Off||!L))if(I===v.Text){let n;if((F===g.Verbose||F===g.Compact)&&(e.error&&e.error.data?n=`Error data: ${q(e.error.data)}\n\n`:e.result?n=`Result: ${q(e.result)}\n\n`:e.error===void 0&&(n=`No result returned.

`)),t){let r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:``;L.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else L.log(`Received response ${e.id} without active response promise.`,n)}else J(`receive-response`,e)}function J(e,t){if(!L||F===g.Off)return;let n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};L.log(n)}function De(){if(G())throw new x(b.Closed,`Connection is closed.`);if(K())throw new x(b.Disposed,`Connection is disposed.`)}function Oe(){if(le())throw new x(b.AlreadyListening,`Connection is already listening`)}function ke(){if(!le())throw Error(`Call listen() first.`)}function Ae(e){return e===void 0?null:e}function je(e){if(e!==null)return e}function Me(e){return e!=null&&!Array.isArray(e)&&typeof e==`object`}function Ne(e,t){switch(e){case r.ParameterStructures.auto:return Me(t)?je(t):[Ae(t)];case r.ParameterStructures.byName:if(!Me(t))throw Error(`Received parameters by name but param is not an object literal.`);return je(t);case r.ParameterStructures.byPosition:return[Ae(t)];default:throw Error(`Unknown parameter structure ${e.toString()}`)}}function Pe(e,t){let n,r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=Ne(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(Ae(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null);break}return n}let Y={sendNotification:(e,...t)=>{De();let i,a;if(n.string(e)){i=e;let n=t[0],o=0,s=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(o=1,s=n);let c=t.length,l=c-o;switch(l){case 0:a=void 0;break;case 1:a=Ne(s,t[o]);break;default:if(s===r.ParameterStructures.byName)throw Error(`Received ${l} parameters for 'by Name' notification parameter structure.`);a=t.slice(o,c).map(e=>Ae(e));break}}else{let n=t;i=e.method,a=Pe(e,n)}let o={jsonrpc:`2.0`,method:i,params:a};return Se(o),u.write(o).catch(e=>{throw m.error(`Sending notification failed.`),e})},onNotification:(e,t)=>{De();let r;return n.func(e)?T=e:t&&(n.string(e)?(r=e,O.set(e,{type:void 0,handler:t})):(r=e.method,O.set(e.method,{type:e,handler:t}))),{dispose:()=>{r===void 0?T=void 0:O.delete(r)}}},onProgress:(e,t,n)=>{if(A.has(t))throw Error(`Progress handler for token ${t} already registered`);return A.set(t,n),{dispose:()=>{A.delete(t)}}},sendProgress:(e,t,n)=>Y.sendNotification(f.type,{token:t,value:n}),onUnhandledProgress:V.event,sendRequest:(e,...t)=>{De(),ke();let i,a,s;if(n.string(e)){i=e;let n=t[0],c=t[t.length-1],l=0,u=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(l=1,u=n);let d=t.length;o.CancellationToken.is(c)&&(--d,s=c);let f=d-l;switch(f){case 0:a=void 0;break;case 1:a=Ne(u,t[l]);break;default:if(u===r.ParameterStructures.byName)throw Error(`Received ${f} parameters for 'by Name' request parameter structure.`);a=t.slice(l,d).map(e=>Ae(e));break}}else{let n=t;i=e.method,a=Pe(e,n);let r=e.numberOfParams;s=o.CancellationToken.is(n[r])?n[r]:void 0}let c=h++,l;s&&(l=s.onCancellationRequested(()=>{let e=U.sender.sendCancellation(Y,c);return e===void 0?(m.log(`Received no promise from cancellation strategy when cancelling id ${c}`),Promise.resolve()):e.catch(()=>{m.log(`Sending cancellation messages for id ${c} failed`)})}));let d={jsonrpc:`2.0`,id:c,method:i,params:a};return xe(d),typeof U.sender.enableCancellation==`function`&&U.sender.enableCancellation(d),new Promise(async(e,t)=>{let n={method:i,timerStart:Date.now(),resolve:t=>{e(t),U.sender.cleanup(c),l?.dispose()},reject:e=>{t(e),U.sender.cleanup(c),l?.dispose()}};try{await u.write(d),M.set(c,n)}catch(e){throw m.error(`Sending request failed.`),n.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,e.message?e.message:`Unknown reason`)),e}})},onRequest:(e,t)=>{De();let r=null;return ee.is(e)?(r=void 0,C=e):n.string(e)?(r=null,t!==void 0&&(r=e,w.set(e,{handler:t,type:void 0}))):t!==void 0&&(r=e.method,w.set(e.method,{type:e,handler:t})),{dispose:()=>{r!==null&&(r===void 0?C=void 0:w.delete(r))}}},hasPendingResponse:()=>M.size>0,trace:async(e,t,r)=>{let i=!1,a=v.Text;r!==void 0&&(n.boolean(r)?i=r:(i=r.sendNotification||!1,a=r.traceFormat||v.Text)),F=e,I=a,L=F===g.Off?void 0:t,i&&!G()&&!K()&&await Y.sendNotification(te.type,{value:g.toString(e)})},onError:z.event,onClose:ie.event,onUnhandledNotification:B.event,onDispose:H.event,end:()=>{u.end()},dispose:()=>{if(K())return;R=k.Disposed,H.fire(void 0);let e=new r.ResponseError(r.ErrorCodes.PendingResponseRejected,`Pending response rejected since connection got disposed`);for(let t of M.values())t.reject(e);M=new Map,P=new Map,N=new Set,j=new i.LinkedMap,n.func(u.dispose)&&u.dispose(),n.func(l.dispose)&&l.dispose()},listen:()=>{De(),Oe(),R=k.Listening,l.listen(ge)},inspect:()=>{(0,t.default)().console.log(`inspect`)}};return Y.onNotification(y.type,e=>{if(F===g.Off||!L)return;let t=F===g.Verbose||F===g.Compact;L.log(e.message,t?e.verbose:void 0)}),Y.onNotification(f.type,e=>{let t=A.get(e.token);t?t(e.value):V.fire(e)}),Y}e.createMessageConnection=A})),b=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ProgressType=e.ProgressToken=e.createMessageConnection=e.NullLogger=e.ConnectionOptions=e.ConnectionStrategy=e.AbstractMessageBuffer=e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=e.SharedArrayReceiverStrategy=e.SharedArraySenderStrategy=e.CancellationToken=e.CancellationTokenSource=e.Emitter=e.Event=e.Disposable=e.LRUCache=e.Touch=e.LinkedMap=e.ParameterStructures=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.ErrorCodes=e.ResponseError=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType0=e.RequestType=e.Message=e.RAL=void 0,e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=void 0;let t=u();Object.defineProperty(e,`Message`,{enumerable:!0,get:function(){return t.Message}}),Object.defineProperty(e,`RequestType`,{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(e,`RequestType0`,{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(e,`RequestType1`,{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(e,`RequestType2`,{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(e,`RequestType3`,{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(e,`RequestType4`,{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(e,`RequestType5`,{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(e,`RequestType6`,{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(e,`RequestType7`,{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(e,`RequestType8`,{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(e,`RequestType9`,{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(e,`ResponseError`,{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(e,`ErrorCodes`,{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(e,`NotificationType`,{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(e,`NotificationType0`,{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(e,`NotificationType1`,{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(e,`NotificationType2`,{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(e,`NotificationType3`,{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(e,`NotificationType4`,{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(e,`NotificationType5`,{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(e,`NotificationType6`,{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(e,`NotificationType7`,{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(e,`NotificationType8`,{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(e,`NotificationType9`,{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(e,`ParameterStructures`,{enumerable:!0,get:function(){return t.ParameterStructures}});let n=d();Object.defineProperty(e,`LinkedMap`,{enumerable:!0,get:function(){return n.LinkedMap}}),Object.defineProperty(e,`LRUCache`,{enumerable:!0,get:function(){return n.LRUCache}}),Object.defineProperty(e,`Touch`,{enumerable:!0,get:function(){return n.Touch}});let r=f();Object.defineProperty(e,`Disposable`,{enumerable:!0,get:function(){return r.Disposable}});let i=m();Object.defineProperty(e,`Event`,{enumerable:!0,get:function(){return i.Event}}),Object.defineProperty(e,`Emitter`,{enumerable:!0,get:function(){return i.Emitter}});let a=h();Object.defineProperty(e,`CancellationTokenSource`,{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(e,`CancellationToken`,{enumerable:!0,get:function(){return a.CancellationToken}});let o=ee();Object.defineProperty(e,`SharedArraySenderStrategy`,{enumerable:!0,get:function(){return o.SharedArraySenderStrategy}}),Object.defineProperty(e,`SharedArrayReceiverStrategy`,{enumerable:!0,get:function(){return o.SharedArrayReceiverStrategy}});let s=_();Object.defineProperty(e,`MessageReader`,{enumerable:!0,get:function(){return s.MessageReader}}),Object.defineProperty(e,`AbstractMessageReader`,{enumerable:!0,get:function(){return s.AbstractMessageReader}}),Object.defineProperty(e,`ReadableStreamMessageReader`,{enumerable:!0,get:function(){return s.ReadableStreamMessageReader}});let c=v();Object.defineProperty(e,`MessageWriter`,{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(e,`AbstractMessageWriter`,{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(e,`WriteableStreamMessageWriter`,{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});let l=te();Object.defineProperty(e,`AbstractMessageBuffer`,{enumerable:!0,get:function(){return l.AbstractMessageBuffer}});let g=y();Object.defineProperty(e,`ConnectionStrategy`,{enumerable:!0,get:function(){return g.ConnectionStrategy}}),Object.defineProperty(e,`ConnectionOptions`,{enumerable:!0,get:function(){return g.ConnectionOptions}}),Object.defineProperty(e,`NullLogger`,{enumerable:!0,get:function(){return g.NullLogger}}),Object.defineProperty(e,`createMessageConnection`,{enumerable:!0,get:function(){return g.createMessageConnection}}),Object.defineProperty(e,`ProgressToken`,{enumerable:!0,get:function(){return g.ProgressToken}}),Object.defineProperty(e,`ProgressType`,{enumerable:!0,get:function(){return g.ProgressType}}),Object.defineProperty(e,`Trace`,{enumerable:!0,get:function(){return g.Trace}}),Object.defineProperty(e,`TraceValues`,{enumerable:!0,get:function(){return g.TraceValues}}),Object.defineProperty(e,`TraceFormat`,{enumerable:!0,get:function(){return g.TraceFormat}}),Object.defineProperty(e,`SetTraceNotification`,{enumerable:!0,get:function(){return g.SetTraceNotification}}),Object.defineProperty(e,`LogTraceNotification`,{enumerable:!0,get:function(){return g.LogTraceNotification}}),Object.defineProperty(e,`ConnectionErrors`,{enumerable:!0,get:function(){return g.ConnectionErrors}}),Object.defineProperty(e,`ConnectionError`,{enumerable:!0,get:function(){return g.ConnectionError}}),Object.defineProperty(e,`CancellationReceiverStrategy`,{enumerable:!0,get:function(){return g.CancellationReceiverStrategy}}),Object.defineProperty(e,`CancellationSenderStrategy`,{enumerable:!0,get:function(){return g.CancellationSenderStrategy}}),Object.defineProperty(e,`CancellationStrategy`,{enumerable:!0,get:function(){return g.CancellationStrategy}}),Object.defineProperty(e,`MessageStrategy`,{enumerable:!0,get:function(){return g.MessageStrategy}}),e.RAL=p().default})),x=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0});let t=b();var n=class e extends t.AbstractMessageBuffer{constructor(e=`utf-8`){super(e),this.asciiDecoder=new TextDecoder(`ascii`)}emptyBuffer(){return e.emptyBuffer}fromString(e,t){return new TextEncoder().encode(e)}toString(e,t){return t===`ascii`?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}};n.emptyBuffer=new Uint8Array;var r=class{constructor(e){this.socket=e,this._onData=new t.Emitter,this._messageListener=e=>{e.data.arrayBuffer().then(e=>{this._onData.fire(new Uint8Array(e))},()=>{(0,t.RAL)().console.error(`Converting blob to array buffer failed.`)})},this.socket.addEventListener(`message`,this._messageListener)}onClose(e){return this.socket.addEventListener(`close`,e),t.Disposable.create(()=>this.socket.removeEventListener(`close`,e))}onError(e){return this.socket.addEventListener(`error`,e),t.Disposable.create(()=>this.socket.removeEventListener(`error`,e))}onEnd(e){return this.socket.addEventListener(`end`,e),t.Disposable.create(()=>this.socket.removeEventListener(`end`,e))}onData(e){return this._onData.event(e)}},i=class{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener(`close`,e),t.Disposable.create(()=>this.socket.removeEventListener(`close`,e))}onError(e){return this.socket.addEventListener(`error`,e),t.Disposable.create(()=>this.socket.removeEventListener(`error`,e))}onEnd(e){return this.socket.addEventListener(`end`,e),t.Disposable.create(()=>this.socket.removeEventListener(`end`,e))}write(e,t){if(typeof e==`string`){if(t!==void 0&&t!==`utf-8`)throw Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}};let a=new TextEncoder,o=Object.freeze({messageBuffer:Object.freeze({create:e=>new n(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:`application/json`,encode:(e,t)=>{if(t.charset!==`utf-8`)throw Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t.charset}`);return Promise.resolve(a.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:`application/json`,decode:(e,t)=>{if(!(e instanceof Uint8Array))throw Error(`In a Browser environments only Uint8Arrays are supported.`);return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new r(e),asWritableStream:e=>new i(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){let r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){let n=setTimeout(e,0,...t);return{dispose:()=>clearTimeout(n)}},setInterval(e,t,...n){let r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function s(){return o}(function(e){function n(){t.RAL.install(o)}e.install=n})(s||={}),e.default=s})),S=a((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,`__esModule`,{value:!0}),e.createMessageConnection=e.BrowserMessageWriter=e.BrowserMessageReader=void 0,x().default.install();let r=b();n(b(),e),e.BrowserMessageReader=class extends r.AbstractMessageReader{constructor(e){super(),this._onData=new r.Emitter,this._messageListener=e=>{this._onData.fire(e.data)},e.addEventListener(`error`,e=>this.fireError(e)),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}},e.BrowserMessageWriter=class extends r.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.addEventListener(`error`,e=>this.fireError(e))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};function i(e,t,n,i){return n===void 0&&(n=r.NullLogger),r.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,r.createMessageConnection)(e,t,n,i)}e.createMessageConnection=i})),ne=a(((e,t)=>{t.exports=S()})),C=o({AnnotatedTextEdit:()=>W,ChangeAnnotation:()=>H,ChangeAnnotationIdentifier:()=>U,CodeAction:()=>Ie,CodeActionContext:()=>Fe,CodeActionKind:()=>Pe,CodeActionTriggerKind:()=>Y,CodeDescription:()=>z,CodeLens:()=>Le,Color:()=>j,ColorInformation:()=>M,ColorPresentation:()=>N,Command:()=>B,CompletionItem:()=>Se,CompletionItemKind:()=>_e,CompletionItemLabelDetails:()=>xe,CompletionItemTag:()=>ye,CompletionList:()=>Ce,CreateFile:()=>oe,DeleteFile:()=>ce,Diagnostic:()=>ie,DiagnosticRelatedInformation:()=>I,DiagnosticSeverity:()=>L,DiagnosticTag:()=>R,DocumentHighlight:()=>Oe,DocumentHighlightKind:()=>De,DocumentLink:()=>ze,DocumentSymbol:()=>Ne,DocumentUri:()=>w,EOL:()=>it,FoldingRange:()=>F,FoldingRangeKind:()=>P,FormattingOptions:()=>Re,Hover:()=>Te,InlayHint:()=>Xe,InlayHintKind:()=>Je,InlayHintLabelPart:()=>Ye,InlineCompletionContext:()=>nt,InlineCompletionItem:()=>Qe,InlineCompletionList:()=>$e,InlineCompletionTriggerKind:()=>et,InlineValueContext:()=>qe,InlineValueEvaluatableExpression:()=>Ke,InlineValueText:()=>We,InlineValueVariableLookup:()=>Ge,InsertReplaceEdit:()=>be,InsertTextFormat:()=>ve,InsertTextMode:()=>q,Location:()=>A,LocationLink:()=>re,MarkedString:()=>we,MarkupContent:()=>ge,MarkupKind:()=>he,OptionalVersionedTextDocumentIdentifier:()=>pe,ParameterInformation:()=>Ee,Position:()=>O,Range:()=>k,RenameFile:()=>se,SelectedCompletionInfo:()=>tt,SelectionRange:()=>Be,SemanticTokenModifiers:()=>He,SemanticTokenTypes:()=>Ve,SemanticTokens:()=>Ue,SignatureInformation:()=>J,StringValue:()=>Ze,SymbolInformation:()=>je,SymbolKind:()=>ke,SymbolTag:()=>Ae,TextDocument:()=>at,TextDocumentEdit:()=>ae,TextDocumentIdentifier:()=>de,TextDocumentItem:()=>me,TextEdit:()=>V,URI:()=>T,VersionedTextDocumentIdentifier:()=>fe,WorkspaceChange:()=>ue,WorkspaceEdit:()=>le,WorkspaceFolder:()=>rt,WorkspaceSymbol:()=>Me,integer:()=>E,uinteger:()=>D}),w,T,E,D,O,k,A,re,j,M,N,P,F,I,L,R,z,ie,B,V,H,U,W,ae,oe,se,ce,le,G,K,ue,de,fe,pe,me,he,ge,_e,ve,ye,be,q,xe,Se,Ce,we,Te,Ee,J,De,Oe,ke,Ae,je,Me,Ne,Pe,Y,Fe,Ie,Le,Re,ze,Be,Ve,He,Ue,We,Ge,Ke,qe,Je,Ye,Xe,Ze,Qe,$e,et,tt,nt,rt,it,at,ot,X,st=i((()=>{(function(e){function t(e){return typeof e==`string`}e.is=t})(w||={}),(function(e){function t(e){return typeof e==`string`}e.is=t})(T||={}),(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(t){return typeof t==`number`&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.is=t})(E||={}),(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(t){return typeof t==`number`&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.is=t})(D||={}),(function(e){function t(e,t){return e===Number.MAX_VALUE&&(e=D.MAX_VALUE),t===Number.MAX_VALUE&&(t=D.MAX_VALUE),{line:e,character:t}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&X.uinteger(t.line)&&X.uinteger(t.character)}e.is=n})(O||={}),(function(e){function t(e,t,n,r){if(X.uinteger(e)&&X.uinteger(t)&&X.uinteger(n)&&X.uinteger(r))return{start:O.create(e,t),end:O.create(n,r)};if(O.is(e)&&O.is(t))return{start:e,end:t};throw Error(`Range#create called with invalid arguments[${e}, ${t}, ${n}, ${r}]`)}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&O.is(t.start)&&O.is(t.end)}e.is=n})(k||={}),(function(e){function t(e,t){return{uri:e,range:t}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&k.is(t.range)&&(X.string(t.uri)||X.undefined(t.uri))}e.is=n})(A||={}),(function(e){function t(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&k.is(t.targetRange)&&X.string(t.targetUri)&&k.is(t.targetSelectionRange)&&(k.is(t.originSelectionRange)||X.undefined(t.originSelectionRange))}e.is=n})(re||={}),(function(e){function t(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&X.numberRange(t.red,0,1)&&X.numberRange(t.green,0,1)&&X.numberRange(t.blue,0,1)&&X.numberRange(t.alpha,0,1)}e.is=n})(j||={}),(function(e){function t(e,t){return{range:e,color:t}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&k.is(t.range)&&j.is(t.color)}e.is=n})(M||={}),(function(e){function t(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&X.string(t.label)&&(X.undefined(t.textEdit)||V.is(t))&&(X.undefined(t.additionalTextEdits)||X.typedArray(t.additionalTextEdits,V.is))}e.is=n})(N||={}),(function(e){e.Comment=`comment`,e.Imports=`imports`,e.Region=`region`})(P||={}),(function(e){function t(e,t,n,r,i,a){let o={startLine:e,endLine:t};return X.defined(n)&&(o.startCharacter=n),X.defined(r)&&(o.endCharacter=r),X.defined(i)&&(o.kind=i),X.defined(a)&&(o.collapsedText=a),o}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&X.uinteger(t.startLine)&&X.uinteger(t.startLine)&&(X.undefined(t.startCharacter)||X.uinteger(t.startCharacter))&&(X.undefined(t.endCharacter)||X.uinteger(t.endCharacter))&&(X.undefined(t.kind)||X.string(t.kind))}e.is=n})(F||={}),(function(e){function t(e,t){return{location:e,message:t}}e.create=t;function n(e){let t=e;return X.defined(t)&&A.is(t.location)&&X.string(t.message)}e.is=n})(I||={}),(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(L||={}),(function(e){e.Unnecessary=1,e.Deprecated=2})(R||={}),(function(e){function t(e){let t=e;return X.objectLiteral(t)&&X.string(t.href)}e.is=t})(z||={}),(function(e){function t(e,t,n,r,i,a){let o={range:e,message:t};return X.defined(n)&&(o.severity=n),X.defined(r)&&(o.code=r),X.defined(i)&&(o.source=i),X.defined(a)&&(o.relatedInformation=a),o}e.create=t;function n(e){let t=e;return X.defined(t)&&k.is(t.range)&&X.string(t.message)&&(X.number(t.severity)||X.undefined(t.severity))&&(X.integer(t.code)||X.string(t.code)||X.undefined(t.code))&&(X.undefined(t.codeDescription)||X.string(t.codeDescription?.href))&&(X.string(t.source)||X.undefined(t.source))&&(X.undefined(t.relatedInformation)||X.typedArray(t.relatedInformation,I.is))}e.is=n})(ie||={}),(function(e){function t(e,t,...n){let r={title:e,command:t};return X.defined(n)&&n.length>0&&(r.arguments=n),r}e.create=t;function n(e){let t=e;return X.defined(t)&&X.string(t.title)&&X.string(t.command)}e.is=n})(B||={}),(function(e){function t(e,t){return{range:e,newText:t}}e.replace=t;function n(e,t){return{range:{start:e,end:e},newText:t}}e.insert=n;function r(e){return{range:e,newText:``}}e.del=r;function i(e){let t=e;return X.objectLiteral(t)&&X.string(t.newText)&&k.is(t.range)}e.is=i})(V||={}),(function(e){function t(e,t,n){let r={label:e};return t!==void 0&&(r.needsConfirmation=t),n!==void 0&&(r.description=n),r}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&X.string(t.label)&&(X.boolean(t.needsConfirmation)||t.needsConfirmation===void 0)&&(X.string(t.description)||t.description===void 0)}e.is=n})(H||={}),(function(e){function t(e){let t=e;return X.string(t)}e.is=t})(U||={}),(function(e){function t(e,t,n){return{range:e,newText:t,annotationId:n}}e.replace=t;function n(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}}e.insert=n;function r(e,t){return{range:e,newText:``,annotationId:t}}e.del=r;function i(e){let t=e;return V.is(t)&&(H.is(t.annotationId)||U.is(t.annotationId))}e.is=i})(W||={}),(function(e){function t(e,t){return{textDocument:e,edits:t}}e.create=t;function n(e){let t=e;return X.defined(t)&&pe.is(t.textDocument)&&Array.isArray(t.edits)}e.is=n})(ae||={}),(function(e){function t(e,t,n){let r={kind:`create`,uri:e};return t!==void 0&&(t.overwrite!==void 0||t.ignoreIfExists!==void 0)&&(r.options=t),n!==void 0&&(r.annotationId=n),r}e.create=t;function n(e){let t=e;return t&&t.kind===`create`&&X.string(t.uri)&&(t.options===void 0||(t.options.overwrite===void 0||X.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||X.boolean(t.options.ignoreIfExists)))&&(t.annotationId===void 0||U.is(t.annotationId))}e.is=n})(oe||={}),(function(e){function t(e,t,n,r){let i={kind:`rename`,oldUri:e,newUri:t};return n!==void 0&&(n.overwrite!==void 0||n.ignoreIfExists!==void 0)&&(i.options=n),r!==void 0&&(i.annotationId=r),i}e.create=t;function n(e){let t=e;return t&&t.kind===`rename`&&X.string(t.oldUri)&&X.string(t.newUri)&&(t.options===void 0||(t.options.overwrite===void 0||X.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||X.boolean(t.options.ignoreIfExists)))&&(t.annotationId===void 0||U.is(t.annotationId))}e.is=n})(se||={}),(function(e){function t(e,t,n){let r={kind:`delete`,uri:e};return t!==void 0&&(t.recursive!==void 0||t.ignoreIfNotExists!==void 0)&&(r.options=t),n!==void 0&&(r.annotationId=n),r}e.create=t;function n(e){let t=e;return t&&t.kind===`delete`&&X.string(t.uri)&&(t.options===void 0||(t.options.recursive===void 0||X.boolean(t.options.recursive))&&(t.options.ignoreIfNotExists===void 0||X.boolean(t.options.ignoreIfNotExists)))&&(t.annotationId===void 0||U.is(t.annotationId))}e.is=n})(ce||={}),(function(e){function t(e){let t=e;return t&&(t.changes!==void 0||t.documentChanges!==void 0)&&(t.documentChanges===void 0||t.documentChanges.every(e=>X.string(e.kind)?oe.is(e)||se.is(e)||ce.is(e):ae.is(e)))}e.is=t})(le||={}),G=class{constructor(e,t){this.edits=e,this.changeAnnotations=t}insert(e,t,n){let r,i;if(n===void 0?r=V.insert(e,t):U.is(n)?(i=n,r=W.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=W.insert(e,t,i)),this.edits.push(r),i!==void 0)return i}replace(e,t,n){let r,i;if(n===void 0?r=V.replace(e,t):U.is(n)?(i=n,r=W.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=W.replace(e,t,i)),this.edits.push(r),i!==void 0)return i}delete(e,t){let n,r;if(t===void 0?n=V.del(e):U.is(t)?(r=t,n=W.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=W.del(e,r)),this.edits.push(n),r!==void 0)return r}add(e){this.edits.push(e)}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length)}assertChangeAnnotations(e){if(e===void 0)throw Error(`Text edit change is not configured to manage change annotations.`)}},K=class{constructor(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}all(){return this._annotations}get size(){return this._size}manage(e,t){let n;if(U.is(e)?n=e:(n=this.nextId(),t=e),this._annotations[n]!==void 0)throw Error(`Id ${n} is already in use.`);if(t===void 0)throw Error(`No annotation provided for id ${n}`);return this._annotations[n]=t,this._size++,n}nextId(){return this._counter++,this._counter.toString()}},ue=class{constructor(e){this._textEditChanges=Object.create(null),e===void 0?this._workspaceEdit={}:(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new K(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(e=>{if(ae.is(e)){let t=new G(e.edits,this._changeAnnotations);this._textEditChanges[e.textDocument.uri]=t}})):e.changes&&Object.keys(e.changes).forEach(t=>{let n=new G(e.changes[t]);this._textEditChanges[t]=n}))}get edit(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(e){if(pe.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error(`Workspace edit is not configured for document changes.`);let t={uri:e.uri,version:e.version},n=this._textEditChanges[t.uri];if(!n){let e=[],r={textDocument:t,edits:e};this._workspaceEdit.documentChanges.push(r),n=new G(e,this._changeAnnotations),this._textEditChanges[t.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw Error(`Workspace edit is not configured for normal text edit changes.`);let t=this._textEditChanges[e];if(!t){let n=[];this._workspaceEdit.changes[e]=n,t=new G(n),this._textEditChanges[e]=t}return t}}initDocumentChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new K,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())}initChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))}createFile(e,t,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error(`Workspace edit is not configured for document changes.`);let r;H.is(t)||U.is(t)?r=t:n=t;let i,a;if(r===void 0?i=oe.create(e,n):(a=U.is(r)?r:this._changeAnnotations.manage(r),i=oe.create(e,n,a)),this._workspaceEdit.documentChanges.push(i),a!==void 0)return a}renameFile(e,t,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error(`Workspace edit is not configured for document changes.`);let i;H.is(n)||U.is(n)?i=n:r=n;let a,o;if(i===void 0?a=se.create(e,t,r):(o=U.is(i)?i:this._changeAnnotations.manage(i),a=se.create(e,t,r,o)),this._workspaceEdit.documentChanges.push(a),o!==void 0)return o}deleteFile(e,t,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error(`Workspace edit is not configured for document changes.`);let r;H.is(t)||U.is(t)?r=t:n=t;let i,a;if(r===void 0?i=ce.create(e,n):(a=U.is(r)?r:this._changeAnnotations.manage(r),i=ce.create(e,n,a)),this._workspaceEdit.documentChanges.push(i),a!==void 0)return a}},(function(e){function t(e){return{uri:e}}e.create=t;function n(e){let t=e;return X.defined(t)&&X.string(t.uri)}e.is=n})(de||={}),(function(e){function t(e,t){return{uri:e,version:t}}e.create=t;function n(e){let t=e;return X.defined(t)&&X.string(t.uri)&&X.integer(t.version)}e.is=n})(fe||={}),(function(e){function t(e,t){return{uri:e,version:t}}e.create=t;function n(e){let t=e;return X.defined(t)&&X.string(t.uri)&&(t.version===null||X.integer(t.version))}e.is=n})(pe||={}),(function(e){function t(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}}e.create=t;function n(e){let t=e;return X.defined(t)&&X.string(t.uri)&&X.string(t.languageId)&&X.integer(t.version)&&X.string(t.text)}e.is=n})(me||={}),(function(e){e.PlainText=`plaintext`,e.Markdown=`markdown`;function t(t){let n=t;return n===e.PlainText||n===e.Markdown}e.is=t})(he||={}),(function(e){function t(e){let t=e;return X.objectLiteral(e)&&he.is(t.kind)&&X.string(t.value)}e.is=t})(ge||={}),(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(_e||={}),(function(e){e.PlainText=1,e.Snippet=2})(ve||={}),(function(e){e.Deprecated=1})(ye||={}),(function(e){function t(e,t,n){return{newText:e,insert:t,replace:n}}e.create=t;function n(e){let t=e;return t&&X.string(t.newText)&&k.is(t.insert)&&k.is(t.replace)}e.is=n})(be||={}),(function(e){e.asIs=1,e.adjustIndentation=2})(q||={}),(function(e){function t(e){let t=e;return t&&(X.string(t.detail)||t.detail===void 0)&&(X.string(t.description)||t.description===void 0)}e.is=t})(xe||={}),(function(e){function t(e){return{label:e}}e.create=t})(Se||={}),(function(e){function t(e,t){return{items:e||[],isIncomplete:!!t}}e.create=t})(Ce||={}),(function(e){function t(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,`\\$&`)}e.fromPlainText=t;function n(e){let t=e;return X.string(t)||X.objectLiteral(t)&&X.string(t.language)&&X.string(t.value)}e.is=n})(we||={}),(function(e){function t(e){let t=e;return!!t&&X.objectLiteral(t)&&(ge.is(t.contents)||we.is(t.contents)||X.typedArray(t.contents,we.is))&&(e.range===void 0||k.is(e.range))}e.is=t})(Te||={}),(function(e){function t(e,t){return t?{label:e,documentation:t}:{label:e}}e.create=t})(Ee||={}),(function(e){function t(e,t,...n){let r={label:e};return X.defined(t)&&(r.documentation=t),X.defined(n)?r.parameters=n:r.parameters=[],r}e.create=t})(J||={}),(function(e){e.Text=1,e.Read=2,e.Write=3})(De||={}),(function(e){function t(e,t){let n={range:e};return X.number(t)&&(n.kind=t),n}e.create=t})(Oe||={}),(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(ke||={}),(function(e){e.Deprecated=1})(Ae||={}),(function(e){function t(e,t,n,r,i){let a={name:e,kind:t,location:{uri:r,range:n}};return i&&(a.containerName=i),a}e.create=t})(je||={}),(function(e){function t(e,t,n,r){return r===void 0?{name:e,kind:t,location:{uri:n}}:{name:e,kind:t,location:{uri:n,range:r}}}e.create=t})(Me||={}),(function(e){function t(e,t,n,r,i,a){let o={name:e,detail:t,kind:n,range:r,selectionRange:i};return a!==void 0&&(o.children=a),o}e.create=t;function n(e){let t=e;return t&&X.string(t.name)&&X.number(t.kind)&&k.is(t.range)&&k.is(t.selectionRange)&&(t.detail===void 0||X.string(t.detail))&&(t.deprecated===void 0||X.boolean(t.deprecated))&&(t.children===void 0||Array.isArray(t.children))&&(t.tags===void 0||Array.isArray(t.tags))}e.is=n})(Ne||={}),(function(e){e.Empty=``,e.QuickFix=`quickfix`,e.Refactor=`refactor`,e.RefactorExtract=`refactor.extract`,e.RefactorInline=`refactor.inline`,e.RefactorRewrite=`refactor.rewrite`,e.Source=`source`,e.SourceOrganizeImports=`source.organizeImports`,e.SourceFixAll=`source.fixAll`})(Pe||={}),(function(e){e.Invoked=1,e.Automatic=2})(Y||={}),(function(e){function t(e,t,n){let r={diagnostics:e};return t!=null&&(r.only=t),n!=null&&(r.triggerKind=n),r}e.create=t;function n(e){let t=e;return X.defined(t)&&X.typedArray(t.diagnostics,ie.is)&&(t.only===void 0||X.typedArray(t.only,X.string))&&(t.triggerKind===void 0||t.triggerKind===Y.Invoked||t.triggerKind===Y.Automatic)}e.is=n})(Fe||={}),(function(e){function t(e,t,n){let r={title:e},i=!0;return typeof t==`string`?(i=!1,r.kind=t):B.is(t)?r.command=t:r.edit=t,i&&n!==void 0&&(r.kind=n),r}e.create=t;function n(e){let t=e;return t&&X.string(t.title)&&(t.diagnostics===void 0||X.typedArray(t.diagnostics,ie.is))&&(t.kind===void 0||X.string(t.kind))&&(t.edit!==void 0||t.command!==void 0)&&(t.command===void 0||B.is(t.command))&&(t.isPreferred===void 0||X.boolean(t.isPreferred))&&(t.edit===void 0||le.is(t.edit))}e.is=n})(Ie||={}),(function(e){function t(e,t){let n={range:e};return X.defined(t)&&(n.data=t),n}e.create=t;function n(e){let t=e;return X.defined(t)&&k.is(t.range)&&(X.undefined(t.command)||B.is(t.command))}e.is=n})(Le||={}),(function(e){function t(e,t){return{tabSize:e,insertSpaces:t}}e.create=t;function n(e){let t=e;return X.defined(t)&&X.uinteger(t.tabSize)&&X.boolean(t.insertSpaces)}e.is=n})(Re||={}),(function(e){function t(e,t,n){return{range:e,target:t,data:n}}e.create=t;function n(e){let t=e;return X.defined(t)&&k.is(t.range)&&(X.undefined(t.target)||X.string(t.target))}e.is=n})(ze||={}),(function(e){function t(e,t){return{range:e,parent:t}}e.create=t;function n(t){let n=t;return X.objectLiteral(n)&&k.is(n.range)&&(n.parent===void 0||e.is(n.parent))}e.is=n})(Be||={}),(function(e){e.namespace=`namespace`,e.type=`type`,e.class=`class`,e.enum=`enum`,e.interface=`interface`,e.struct=`struct`,e.typeParameter=`typeParameter`,e.parameter=`parameter`,e.variable=`variable`,e.property=`property`,e.enumMember=`enumMember`,e.event=`event`,e.function=`function`,e.method=`method`,e.macro=`macro`,e.keyword=`keyword`,e.modifier=`modifier`,e.comment=`comment`,e.string=`string`,e.number=`number`,e.regexp=`regexp`,e.operator=`operator`,e.decorator=`decorator`})(Ve||={}),(function(e){e.declaration=`declaration`,e.definition=`definition`,e.readonly=`readonly`,e.static=`static`,e.deprecated=`deprecated`,e.abstract=`abstract`,e.async=`async`,e.modification=`modification`,e.documentation=`documentation`,e.defaultLibrary=`defaultLibrary`})(He||={}),(function(e){function t(e){let t=e;return X.objectLiteral(t)&&(t.resultId===void 0||typeof t.resultId==`string`)&&Array.isArray(t.data)&&(t.data.length===0||typeof t.data[0]==`number`)}e.is=t})(Ue||={}),(function(e){function t(e,t){return{range:e,text:t}}e.create=t;function n(e){let t=e;return t!=null&&k.is(t.range)&&X.string(t.text)}e.is=n})(We||={}),(function(e){function t(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}}e.create=t;function n(e){let t=e;return t!=null&&k.is(t.range)&&X.boolean(t.caseSensitiveLookup)&&(X.string(t.variableName)||t.variableName===void 0)}e.is=n})(Ge||={}),(function(e){function t(e,t){return{range:e,expression:t}}e.create=t;function n(e){let t=e;return t!=null&&k.is(t.range)&&(X.string(t.expression)||t.expression===void 0)}e.is=n})(Ke||={}),(function(e){function t(e,t){return{frameId:e,stoppedLocation:t}}e.create=t;function n(e){let t=e;return X.defined(t)&&k.is(e.stoppedLocation)}e.is=n})(qe||={}),(function(e){e.Type=1,e.Parameter=2;function t(e){return e===1||e===2}e.is=t})(Je||={}),(function(e){function t(e){return{value:e}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&(t.tooltip===void 0||X.string(t.tooltip)||ge.is(t.tooltip))&&(t.location===void 0||A.is(t.location))&&(t.command===void 0||B.is(t.command))}e.is=n})(Ye||={}),(function(e){function t(e,t,n){let r={position:e,label:t};return n!==void 0&&(r.kind=n),r}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&O.is(t.position)&&(X.string(t.label)||X.typedArray(t.label,Ye.is))&&(t.kind===void 0||Je.is(t.kind))&&t.textEdits===void 0||X.typedArray(t.textEdits,V.is)&&(t.tooltip===void 0||X.string(t.tooltip)||ge.is(t.tooltip))&&(t.paddingLeft===void 0||X.boolean(t.paddingLeft))&&(t.paddingRight===void 0||X.boolean(t.paddingRight))}e.is=n})(Xe||={}),(function(e){function t(e){return{kind:`snippet`,value:e}}e.createSnippet=t})(Ze||={}),(function(e){function t(e,t,n,r){return{insertText:e,filterText:t,range:n,command:r}}e.create=t})(Qe||={}),(function(e){function t(e){return{items:e}}e.create=t})($e||={}),(function(e){e.Invoked=0,e.Automatic=1})(et||={}),(function(e){function t(e,t){return{range:e,text:t}}e.create=t})(tt||={}),(function(e){function t(e,t){return{triggerKind:e,selectedCompletionInfo:t}}e.create=t})(nt||={}),(function(e){function t(e){let t=e;return X.objectLiteral(t)&&T.is(t.uri)&&X.string(t.name)}e.is=t})(rt||={}),it=[`
`,`\r
`,`\r`],(function(e){function t(e,t,n,r){return new ot(e,t,n,r)}e.create=t;function n(e){let t=e;return!!(X.defined(t)&&X.string(t.uri)&&(X.undefined(t.languageId)||X.string(t.languageId))&&X.uinteger(t.lineCount)&&X.func(t.getText)&&X.func(t.positionAt)&&X.func(t.offsetAt))}e.is=n;function r(e,t){let n=e.getText(),r=i(t,(e,t)=>{let n=e.range.start.line-t.range.start.line;return n===0?e.range.start.character-t.range.start.character:n}),a=n.length;for(let t=r.length-1;t>=0;t--){let i=r[t],o=e.offsetAt(i.range.start),s=e.offsetAt(i.range.end);if(s<=a)n=n.substring(0,o)+i.newText+n.substring(s,n.length);else throw Error(`Overlapping edit`);a=o}return n}e.applyEdits=r;function i(e,t){if(e.length<=1)return e;let n=e.length/2|0,r=e.slice(0,n),a=e.slice(n);i(r,t),i(a,t);let o=0,s=0,c=0;for(;o<r.length&&s<a.length;)t(r[o],a[s])<=0?e[c++]=r[o++]:e[c++]=a[s++];for(;o<r.length;)e[c++]=r[o++];for(;s<a.length;)e[c++]=a[s++];return e}})(at||={}),ot=class{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],t=this._content,n=!0;for(let r=0;r<t.length;r++){n&&=(e.push(r),!1);let i=t.charAt(r);n=i===`\r`||i===`
`,i===`\r`&&r+1<t.length&&t.charAt(r+1)===`
`&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),n=0,r=t.length;if(r===0)return O.create(0,e);for(;n<r;){let i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}let i=n-1;return O.create(i,e-t[i])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)}get lineCount(){return this.getLineOffsets().length}},(function(e){let t=Object.prototype.toString;function n(e){return e!==void 0}e.defined=n;function r(e){return e===void 0}e.undefined=r;function i(e){return e===!0||e===!1}e.boolean=i;function a(e){return t.call(e)===`[object String]`}e.string=a;function o(e){return t.call(e)===`[object Number]`}e.number=o;function s(e,n,r){return t.call(e)===`[object Number]`&&n<=e&&e<=r}e.numberRange=s;function c(e){return t.call(e)===`[object Number]`&&-2147483648<=e&&e<=2147483647}e.integer=c;function l(e){return t.call(e)===`[object Number]`&&0<=e&&e<=2147483647}e.uinteger=l;function u(e){return t.call(e)===`[object Function]`}e.func=u;function d(e){return typeof e==`object`&&!!e}e.objectLiteral=d;function f(e,t){return Array.isArray(e)&&e.every(t)}e.typedArray=f})(X||={})})),Z=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ProtocolNotificationType=e.ProtocolNotificationType0=e.ProtocolRequestType=e.ProtocolRequestType0=e.RegistrationType=e.MessageDirection=void 0;let t=S();var n;(function(e){e.clientToServer=`clientToServer`,e.serverToClient=`serverToClient`,e.both=`both`})(n||(e.MessageDirection=n={})),e.RegistrationType=class{constructor(e){this.method=e}},e.ProtocolRequestType0=class extends t.RequestType0{constructor(e){super(e)}},e.ProtocolRequestType=class extends t.RequestType{constructor(e){super(e,t.ParameterStructures.byName)}},e.ProtocolNotificationType0=class extends t.NotificationType0{constructor(e){super(e)}},e.ProtocolNotificationType=class extends t.NotificationType{constructor(e){super(e,t.ParameterStructures.byName)}}})),ct=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.objectLiteral=e.typedArray=e.stringArray=e.array=e.func=e.error=e.number=e.string=e.boolean=void 0;function t(e){return e===!0||e===!1}e.boolean=t;function n(e){return typeof e==`string`||e instanceof String}e.string=n;function r(e){return typeof e==`number`||e instanceof Number}e.number=r;function i(e){return e instanceof Error}e.error=i;function a(e){return typeof e==`function`}e.func=a;function o(e){return Array.isArray(e)}e.array=o;function s(e){return o(e)&&e.every(e=>n(e))}e.stringArray=s;function c(e,t){return Array.isArray(e)&&e.every(t)}e.typedArray=c;function l(e){return typeof e==`object`&&!!e}e.objectLiteral=l})),lt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ImplementationRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/implementation`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(e.ImplementationRequest=n={}))})),ut=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.TypeDefinitionRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/typeDefinition`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(e.TypeDefinitionRequest=n={}))})),dt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=void 0;let t=Z();var n;(function(e){e.method=`workspace/workspaceFolders`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(n||(e.WorkspaceFoldersRequest=n={}));var r;(function(e){e.method=`workspace/didChangeWorkspaceFolders`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(r||(e.DidChangeWorkspaceFoldersNotification=r={}))})),ft=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ConfigurationRequest=void 0;let t=Z();var n;(function(e){e.method=`workspace/configuration`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(n||(e.ConfigurationRequest=n={}))})),pt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ColorPresentationRequest=e.DocumentColorRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/documentColor`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(e.DocumentColorRequest=n={}));var r;(function(e){e.method=`textDocument/colorPresentation`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(e.ColorPresentationRequest=r={}))})),mt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.FoldingRangeRefreshRequest=e.FoldingRangeRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/foldingRange`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(e.FoldingRangeRequest=n={}));var r;(function(e){e.method=`workspace/foldingRange/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(r||(e.FoldingRangeRefreshRequest=r={}))})),ht=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.DeclarationRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/declaration`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(e.DeclarationRequest=n={}))})),gt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.SelectionRangeRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/selectionRange`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(e.SelectionRangeRequest=n={}))})),_t=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=void 0;let t=S(),n=Z();var r;(function(e){e.type=new t.ProgressType;function n(t){return t===e.type}e.is=n})(r||(e.WorkDoneProgress=r={}));var i;(function(e){e.method=`window/workDoneProgress/create`,e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType(e.method)})(i||(e.WorkDoneProgressCreateRequest=i={}));var a;(function(e){e.method=`window/workDoneProgress/cancel`,e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)})(a||(e.WorkDoneProgressCancelNotification=a={}))})),vt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.CallHierarchyPrepareRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/prepareCallHierarchy`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(e.CallHierarchyPrepareRequest=n={}));var r;(function(e){e.method=`callHierarchy/incomingCalls`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(e.CallHierarchyIncomingCallsRequest=r={}));var i;(function(e){e.method=`callHierarchy/outgoingCalls`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(i||(e.CallHierarchyOutgoingCallsRequest=i={}))})),yt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.SemanticTokensRegistrationType=e.TokenFormat=void 0;let t=Z();var n;(function(e){e.Relative=`relative`})(n||(e.TokenFormat=n={}));var r;(function(e){e.method=`textDocument/semanticTokens`,e.type=new t.RegistrationType(e.method)})(r||(e.SemanticTokensRegistrationType=r={}));var i;(function(e){e.method=`textDocument/semanticTokens/full`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method),e.registrationMethod=r.method})(i||(e.SemanticTokensRequest=i={}));var a;(function(e){e.method=`textDocument/semanticTokens/full/delta`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method),e.registrationMethod=r.method})(a||(e.SemanticTokensDeltaRequest=a={}));var o;(function(e){e.method=`textDocument/semanticTokens/range`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method),e.registrationMethod=r.method})(o||(e.SemanticTokensRangeRequest=o={}));var s;(function(e){e.method=`workspace/semanticTokens/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(s||(e.SemanticTokensRefreshRequest=s={}))})),bt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ShowDocumentRequest=void 0;let t=Z();var n;(function(e){e.method=`window/showDocument`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(n||(e.ShowDocumentRequest=n={}))})),xt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.LinkedEditingRangeRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/linkedEditingRange`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(e.LinkedEditingRangeRequest=n={}))})),St=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.DidRenameFilesNotification=e.WillRenameFilesRequest=e.DidCreateFilesNotification=e.WillCreateFilesRequest=e.FileOperationPatternKind=void 0;let t=Z();var n;(function(e){e.file=`file`,e.folder=`folder`})(n||(e.FileOperationPatternKind=n={}));var r;(function(e){e.method=`workspace/willCreateFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(e.WillCreateFilesRequest=r={}));var i;(function(e){e.method=`workspace/didCreateFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(i||(e.DidCreateFilesNotification=i={}));var a;(function(e){e.method=`workspace/willRenameFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(a||(e.WillRenameFilesRequest=a={}));var o;(function(e){e.method=`workspace/didRenameFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(o||(e.DidRenameFilesNotification=o={}));var s;(function(e){e.method=`workspace/didDeleteFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(s||(e.DidDeleteFilesNotification=s={}));var c;(function(e){e.method=`workspace/willDeleteFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(c||(e.WillDeleteFilesRequest=c={}))})),Ct=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=void 0;let t=Z();var n;(function(e){e.document=`document`,e.project=`project`,e.group=`group`,e.scheme=`scheme`,e.global=`global`})(n||(e.UniquenessLevel=n={}));var r;(function(e){e.$import=`import`,e.$export=`export`,e.local=`local`})(r||(e.MonikerKind=r={}));var i;(function(e){e.method=`textDocument/moniker`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(i||(e.MonikerRequest=i={}))})),wt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.TypeHierarchySubtypesRequest=e.TypeHierarchySupertypesRequest=e.TypeHierarchyPrepareRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/prepareTypeHierarchy`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(e.TypeHierarchyPrepareRequest=n={}));var r;(function(e){e.method=`typeHierarchy/supertypes`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(e.TypeHierarchySupertypesRequest=r={}));var i;(function(e){e.method=`typeHierarchy/subtypes`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(i||(e.TypeHierarchySubtypesRequest=i={}))})),Tt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.InlineValueRefreshRequest=e.InlineValueRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/inlineValue`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(e.InlineValueRequest=n={}));var r;(function(e){e.method=`workspace/inlineValue/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(r||(e.InlineValueRefreshRequest=r={}))})),Et=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/inlayHint`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(e.InlayHintRequest=n={}));var r;(function(e){e.method=`inlayHint/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(e.InlayHintResolveRequest=r={}));var i;(function(e){e.method=`workspace/inlayHint/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(i||(e.InlayHintRefreshRequest=i={}))})),Dt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=void 0;let t=S(),n=ct(),r=Z();var i;(function(e){function t(e){let t=e;return t&&n.boolean(t.retriggerRequest)}e.is=t})(i||(e.DiagnosticServerCancellationData=i={}));var a;(function(e){e.Full=`full`,e.Unchanged=`unchanged`})(a||(e.DocumentDiagnosticReportKind=a={}));var o;(function(e){e.method=`textDocument/diagnostic`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method),e.partialResult=new t.ProgressType})(o||(e.DocumentDiagnosticRequest=o={}));var s;(function(e){e.method=`workspace/diagnostic`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method),e.partialResult=new t.ProgressType})(s||(e.WorkspaceDiagnosticRequest=s={}));var c;(function(e){e.method=`workspace/diagnostic/refresh`,e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType0(e.method)})(c||(e.DiagnosticRefreshRequest=c={}))})),Ot=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=void 0;let t=(st(),c(C)),n=ct(),r=Z();var i;(function(e){e.Markup=1,e.Code=2;function t(e){return e===1||e===2}e.is=t})(i||(e.NotebookCellKind=i={}));var a;(function(e){function r(e,t){let n={executionOrder:e};return(t===!0||t===!1)&&(n.success=t),n}e.create=r;function i(e){let r=e;return n.objectLiteral(r)&&t.uinteger.is(r.executionOrder)&&(r.success===void 0||n.boolean(r.success))}e.is=i;function a(e,t){return e===t?!0:e==null||t==null?!1:e.executionOrder===t.executionOrder&&e.success===t.success}e.equals=a})(a||(e.ExecutionSummary=a={}));var o;(function(e){function r(e,t){return{kind:e,document:t}}e.create=r;function o(e){let r=e;return n.objectLiteral(r)&&i.is(r.kind)&&t.DocumentUri.is(r.document)&&(r.metadata===void 0||n.objectLiteral(r.metadata))}e.is=o;function s(e,t){let n=new Set;return e.document!==t.document&&n.add(`document`),e.kind!==t.kind&&n.add(`kind`),e.executionSummary!==t.executionSummary&&n.add(`executionSummary`),(e.metadata!==void 0||t.metadata!==void 0)&&!c(e.metadata,t.metadata)&&n.add(`metadata`),(e.executionSummary!==void 0||t.executionSummary!==void 0)&&!a.equals(e.executionSummary,t.executionSummary)&&n.add(`executionSummary`),n}e.diff=s;function c(e,t){if(e===t)return!0;if(e==null||t==null||typeof e!=typeof t||typeof e!=`object`)return!1;let r=Array.isArray(e),i=Array.isArray(t);if(r!==i)return!1;if(r&&i){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!c(e[n],t[n]))return!1}if(n.objectLiteral(e)&&n.objectLiteral(t)){let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!c(n,r)))return!1;for(let r=0;r<n.length;r++){let i=n[r];if(!c(e[i],t[i]))return!1}}return!0}})(o||(e.NotebookCell=o={}));var s;(function(e){function r(e,t,n,r){return{uri:e,notebookType:t,version:n,cells:r}}e.create=r;function i(e){let r=e;return n.objectLiteral(r)&&n.string(r.uri)&&t.integer.is(r.version)&&n.typedArray(r.cells,o.is)}e.is=i})(s||(e.NotebookDocument=s={}));var l;(function(e){e.method=`notebookDocument/sync`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.RegistrationType(e.method)})(l||(e.NotebookDocumentSyncRegistrationType=l={}));var u;(function(e){e.method=`notebookDocument/didOpen`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method),e.registrationMethod=l.method})(u||(e.DidOpenNotebookDocumentNotification=u={}));var d;(function(e){function r(e){let r=e;return n.objectLiteral(r)&&t.uinteger.is(r.start)&&t.uinteger.is(r.deleteCount)&&(r.cells===void 0||n.typedArray(r.cells,o.is))}e.is=r;function i(e,t,n){let r={start:e,deleteCount:t};return n!==void 0&&(r.cells=n),r}e.create=i})(d||(e.NotebookCellArrayChange=d={}));var f;(function(e){e.method=`notebookDocument/didChange`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method),e.registrationMethod=l.method})(f||(e.DidChangeNotebookDocumentNotification=f={}));var p;(function(e){e.method=`notebookDocument/didSave`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method),e.registrationMethod=l.method})(p||(e.DidSaveNotebookDocumentNotification=p={}));var m;(function(e){e.method=`notebookDocument/didClose`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method),e.registrationMethod=l.method})(m||(e.DidCloseNotebookDocumentNotification=m={}))})),kt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.InlineCompletionRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/inlineCompletion`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(e.InlineCompletionRequest=n={}))})),At=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.WorkspaceSymbolRequest=e.CodeActionResolveRequest=e.CodeActionRequest=e.DocumentSymbolRequest=e.DocumentHighlightRequest=e.ReferencesRequest=e.DefinitionRequest=e.SignatureHelpRequest=e.SignatureHelpTriggerKind=e.HoverRequest=e.CompletionResolveRequest=e.CompletionRequest=e.CompletionTriggerKind=e.PublishDiagnosticsNotification=e.WatchKind=e.RelativePattern=e.FileChangeType=e.DidChangeWatchedFilesNotification=e.WillSaveTextDocumentWaitUntilRequest=e.WillSaveTextDocumentNotification=e.TextDocumentSaveReason=e.DidSaveTextDocumentNotification=e.DidCloseTextDocumentNotification=e.DidChangeTextDocumentNotification=e.TextDocumentContentChangeEvent=e.DidOpenTextDocumentNotification=e.TextDocumentSyncKind=e.TelemetryEventNotification=e.LogMessageNotification=e.ShowMessageRequest=e.ShowMessageNotification=e.MessageType=e.DidChangeConfigurationNotification=e.ExitNotification=e.ShutdownRequest=e.InitializedNotification=e.InitializeErrorCodes=e.InitializeRequest=e.WorkDoneProgressOptions=e.TextDocumentRegistrationOptions=e.StaticRegistrationOptions=e.PositionEncodingKind=e.FailureHandlingKind=e.ResourceOperationKind=e.UnregistrationRequest=e.RegistrationRequest=e.DocumentSelector=e.NotebookCellTextDocumentFilter=e.NotebookDocumentFilter=e.TextDocumentFilter=void 0,e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.WillRenameFilesRequest=e.DidRenameFilesNotification=e.WillCreateFilesRequest=e.DidCreateFilesNotification=e.FileOperationPatternKind=e.LinkedEditingRangeRequest=e.ShowDocumentRequest=e.SemanticTokensRegistrationType=e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.TokenFormat=e.CallHierarchyPrepareRequest=e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=e.SelectionRangeRequest=e.DeclarationRequest=e.FoldingRangeRefreshRequest=e.FoldingRangeRequest=e.ColorPresentationRequest=e.DocumentColorRequest=e.ConfigurationRequest=e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=e.TypeDefinitionRequest=e.ImplementationRequest=e.ApplyWorkspaceEditRequest=e.ExecuteCommandRequest=e.PrepareRenameRequest=e.RenameRequest=e.PrepareSupportDefaultBehavior=e.DocumentOnTypeFormattingRequest=e.DocumentRangesFormattingRequest=e.DocumentRangeFormattingRequest=e.DocumentFormattingRequest=e.DocumentLinkResolveRequest=e.DocumentLinkRequest=e.CodeLensRefreshRequest=e.CodeLensResolveRequest=e.CodeLensRequest=e.WorkspaceSymbolResolveRequest=void 0,e.InlineCompletionRequest=e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=e.InlineValueRefreshRequest=e.InlineValueRequest=e.TypeHierarchySupertypesRequest=e.TypeHierarchySubtypesRequest=e.TypeHierarchyPrepareRequest=void 0;let t=Z(),n=(st(),c(C)),r=ct(),i=lt();Object.defineProperty(e,`ImplementationRequest`,{enumerable:!0,get:function(){return i.ImplementationRequest}});let a=ut();Object.defineProperty(e,`TypeDefinitionRequest`,{enumerable:!0,get:function(){return a.TypeDefinitionRequest}});let o=dt();Object.defineProperty(e,`WorkspaceFoldersRequest`,{enumerable:!0,get:function(){return o.WorkspaceFoldersRequest}}),Object.defineProperty(e,`DidChangeWorkspaceFoldersNotification`,{enumerable:!0,get:function(){return o.DidChangeWorkspaceFoldersNotification}});let s=ft();Object.defineProperty(e,`ConfigurationRequest`,{enumerable:!0,get:function(){return s.ConfigurationRequest}});let l=pt();Object.defineProperty(e,`DocumentColorRequest`,{enumerable:!0,get:function(){return l.DocumentColorRequest}}),Object.defineProperty(e,`ColorPresentationRequest`,{enumerable:!0,get:function(){return l.ColorPresentationRequest}});let u=mt();Object.defineProperty(e,`FoldingRangeRequest`,{enumerable:!0,get:function(){return u.FoldingRangeRequest}}),Object.defineProperty(e,`FoldingRangeRefreshRequest`,{enumerable:!0,get:function(){return u.FoldingRangeRefreshRequest}});let d=ht();Object.defineProperty(e,`DeclarationRequest`,{enumerable:!0,get:function(){return d.DeclarationRequest}});let f=gt();Object.defineProperty(e,`SelectionRangeRequest`,{enumerable:!0,get:function(){return f.SelectionRangeRequest}});let p=_t();Object.defineProperty(e,`WorkDoneProgress`,{enumerable:!0,get:function(){return p.WorkDoneProgress}}),Object.defineProperty(e,`WorkDoneProgressCreateRequest`,{enumerable:!0,get:function(){return p.WorkDoneProgressCreateRequest}}),Object.defineProperty(e,`WorkDoneProgressCancelNotification`,{enumerable:!0,get:function(){return p.WorkDoneProgressCancelNotification}});let m=vt();Object.defineProperty(e,`CallHierarchyIncomingCallsRequest`,{enumerable:!0,get:function(){return m.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(e,`CallHierarchyOutgoingCallsRequest`,{enumerable:!0,get:function(){return m.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(e,`CallHierarchyPrepareRequest`,{enumerable:!0,get:function(){return m.CallHierarchyPrepareRequest}});let h=yt();Object.defineProperty(e,`TokenFormat`,{enumerable:!0,get:function(){return h.TokenFormat}}),Object.defineProperty(e,`SemanticTokensRequest`,{enumerable:!0,get:function(){return h.SemanticTokensRequest}}),Object.defineProperty(e,`SemanticTokensDeltaRequest`,{enumerable:!0,get:function(){return h.SemanticTokensDeltaRequest}}),Object.defineProperty(e,`SemanticTokensRangeRequest`,{enumerable:!0,get:function(){return h.SemanticTokensRangeRequest}}),Object.defineProperty(e,`SemanticTokensRefreshRequest`,{enumerable:!0,get:function(){return h.SemanticTokensRefreshRequest}}),Object.defineProperty(e,`SemanticTokensRegistrationType`,{enumerable:!0,get:function(){return h.SemanticTokensRegistrationType}});let ee=bt();Object.defineProperty(e,`ShowDocumentRequest`,{enumerable:!0,get:function(){return ee.ShowDocumentRequest}});let g=xt();Object.defineProperty(e,`LinkedEditingRangeRequest`,{enumerable:!0,get:function(){return g.LinkedEditingRangeRequest}});let _=St();Object.defineProperty(e,`FileOperationPatternKind`,{enumerable:!0,get:function(){return _.FileOperationPatternKind}}),Object.defineProperty(e,`DidCreateFilesNotification`,{enumerable:!0,get:function(){return _.DidCreateFilesNotification}}),Object.defineProperty(e,`WillCreateFilesRequest`,{enumerable:!0,get:function(){return _.WillCreateFilesRequest}}),Object.defineProperty(e,`DidRenameFilesNotification`,{enumerable:!0,get:function(){return _.DidRenameFilesNotification}}),Object.defineProperty(e,`WillRenameFilesRequest`,{enumerable:!0,get:function(){return _.WillRenameFilesRequest}}),Object.defineProperty(e,`DidDeleteFilesNotification`,{enumerable:!0,get:function(){return _.DidDeleteFilesNotification}}),Object.defineProperty(e,`WillDeleteFilesRequest`,{enumerable:!0,get:function(){return _.WillDeleteFilesRequest}});let v=Ct();Object.defineProperty(e,`UniquenessLevel`,{enumerable:!0,get:function(){return v.UniquenessLevel}}),Object.defineProperty(e,`MonikerKind`,{enumerable:!0,get:function(){return v.MonikerKind}}),Object.defineProperty(e,`MonikerRequest`,{enumerable:!0,get:function(){return v.MonikerRequest}});let te=wt();Object.defineProperty(e,`TypeHierarchyPrepareRequest`,{enumerable:!0,get:function(){return te.TypeHierarchyPrepareRequest}}),Object.defineProperty(e,`TypeHierarchySubtypesRequest`,{enumerable:!0,get:function(){return te.TypeHierarchySubtypesRequest}}),Object.defineProperty(e,`TypeHierarchySupertypesRequest`,{enumerable:!0,get:function(){return te.TypeHierarchySupertypesRequest}});let y=Tt();Object.defineProperty(e,`InlineValueRequest`,{enumerable:!0,get:function(){return y.InlineValueRequest}}),Object.defineProperty(e,`InlineValueRefreshRequest`,{enumerable:!0,get:function(){return y.InlineValueRefreshRequest}});let b=Et();Object.defineProperty(e,`InlayHintRequest`,{enumerable:!0,get:function(){return b.InlayHintRequest}}),Object.defineProperty(e,`InlayHintResolveRequest`,{enumerable:!0,get:function(){return b.InlayHintResolveRequest}}),Object.defineProperty(e,`InlayHintRefreshRequest`,{enumerable:!0,get:function(){return b.InlayHintRefreshRequest}});let x=Dt();Object.defineProperty(e,`DiagnosticServerCancellationData`,{enumerable:!0,get:function(){return x.DiagnosticServerCancellationData}}),Object.defineProperty(e,`DocumentDiagnosticReportKind`,{enumerable:!0,get:function(){return x.DocumentDiagnosticReportKind}}),Object.defineProperty(e,`DocumentDiagnosticRequest`,{enumerable:!0,get:function(){return x.DocumentDiagnosticRequest}}),Object.defineProperty(e,`WorkspaceDiagnosticRequest`,{enumerable:!0,get:function(){return x.WorkspaceDiagnosticRequest}}),Object.defineProperty(e,`DiagnosticRefreshRequest`,{enumerable:!0,get:function(){return x.DiagnosticRefreshRequest}});let S=Ot();Object.defineProperty(e,`NotebookCellKind`,{enumerable:!0,get:function(){return S.NotebookCellKind}}),Object.defineProperty(e,`ExecutionSummary`,{enumerable:!0,get:function(){return S.ExecutionSummary}}),Object.defineProperty(e,`NotebookCell`,{enumerable:!0,get:function(){return S.NotebookCell}}),Object.defineProperty(e,`NotebookDocument`,{enumerable:!0,get:function(){return S.NotebookDocument}}),Object.defineProperty(e,`NotebookDocumentSyncRegistrationType`,{enumerable:!0,get:function(){return S.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(e,`DidOpenNotebookDocumentNotification`,{enumerable:!0,get:function(){return S.DidOpenNotebookDocumentNotification}}),Object.defineProperty(e,`NotebookCellArrayChange`,{enumerable:!0,get:function(){return S.NotebookCellArrayChange}}),Object.defineProperty(e,`DidChangeNotebookDocumentNotification`,{enumerable:!0,get:function(){return S.DidChangeNotebookDocumentNotification}}),Object.defineProperty(e,`DidSaveNotebookDocumentNotification`,{enumerable:!0,get:function(){return S.DidSaveNotebookDocumentNotification}}),Object.defineProperty(e,`DidCloseNotebookDocumentNotification`,{enumerable:!0,get:function(){return S.DidCloseNotebookDocumentNotification}});let ne=kt();Object.defineProperty(e,`InlineCompletionRequest`,{enumerable:!0,get:function(){return ne.InlineCompletionRequest}});var w;(function(e){function t(e){let t=e;return r.string(t)||r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}e.is=t})(w||(e.TextDocumentFilter=w={}));var T;(function(e){function t(e){let t=e;return r.objectLiteral(t)&&(r.string(t.notebookType)||r.string(t.scheme)||r.string(t.pattern))}e.is=t})(T||(e.NotebookDocumentFilter=T={}));var E;(function(e){function t(e){let t=e;return r.objectLiteral(t)&&(r.string(t.notebook)||T.is(t.notebook))&&(t.language===void 0||r.string(t.language))}e.is=t})(E||(e.NotebookCellTextDocumentFilter=E={}));var D;(function(e){function t(e){if(!Array.isArray(e))return!1;for(let t of e)if(!r.string(t)&&!w.is(t)&&!E.is(t))return!1;return!0}e.is=t})(D||(e.DocumentSelector=D={}));var O;(function(e){e.method=`client/registerCapability`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(O||(e.RegistrationRequest=O={}));var k;(function(e){e.method=`client/unregisterCapability`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(k||(e.UnregistrationRequest=k={}));var A;(function(e){e.Create=`create`,e.Rename=`rename`,e.Delete=`delete`})(A||(e.ResourceOperationKind=A={}));var re;(function(e){e.Abort=`abort`,e.Transactional=`transactional`,e.TextOnlyTransactional=`textOnlyTransactional`,e.Undo=`undo`})(re||(e.FailureHandlingKind=re={}));var j;(function(e){e.UTF8=`utf-8`,e.UTF16=`utf-16`,e.UTF32=`utf-32`})(j||(e.PositionEncodingKind=j={}));var M;(function(e){function t(e){let t=e;return t&&r.string(t.id)&&t.id.length>0}e.hasId=t})(M||(e.StaticRegistrationOptions=M={}));var N;(function(e){function t(e){let t=e;return t&&(t.documentSelector===null||D.is(t.documentSelector))}e.is=t})(N||(e.TextDocumentRegistrationOptions=N={}));var P;(function(e){function t(e){let t=e;return r.objectLiteral(t)&&(t.workDoneProgress===void 0||r.boolean(t.workDoneProgress))}e.is=t;function n(e){let t=e;return t&&r.boolean(t.workDoneProgress)}e.hasWorkDoneProgress=n})(P||(e.WorkDoneProgressOptions=P={}));var F;(function(e){e.method=`initialize`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(F||(e.InitializeRequest=F={}));var I;(function(e){e.unknownProtocolVersion=1})(I||(e.InitializeErrorCodes=I={}));var L;(function(e){e.method=`initialized`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(L||(e.InitializedNotification=L={}));var R;(function(e){e.method=`shutdown`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType0(e.method)})(R||(e.ShutdownRequest=R={}));var z;(function(e){e.method=`exit`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType0(e.method)})(z||(e.ExitNotification=z={}));var ie;(function(e){e.method=`workspace/didChangeConfiguration`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(ie||(e.DidChangeConfigurationNotification=ie={}));var B;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(B||(e.MessageType=B={}));var V;(function(e){e.method=`window/showMessage`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolNotificationType(e.method)})(V||(e.ShowMessageNotification=V={}));var H;(function(e){e.method=`window/showMessageRequest`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(H||(e.ShowMessageRequest=H={}));var U;(function(e){e.method=`window/logMessage`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolNotificationType(e.method)})(U||(e.LogMessageNotification=U={}));var W;(function(e){e.method=`telemetry/event`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolNotificationType(e.method)})(W||(e.TelemetryEventNotification=W={}));var ae;(function(e){e.None=0,e.Full=1,e.Incremental=2})(ae||(e.TextDocumentSyncKind=ae={}));var oe;(function(e){e.method=`textDocument/didOpen`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(oe||(e.DidOpenTextDocumentNotification=oe={}));var se;(function(e){function t(e){let t=e;return t!=null&&typeof t.text==`string`&&t.range!==void 0&&(t.rangeLength===void 0||typeof t.rangeLength==`number`)}e.isIncremental=t;function n(e){let t=e;return t!=null&&typeof t.text==`string`&&t.range===void 0&&t.rangeLength===void 0}e.isFull=n})(se||(e.TextDocumentContentChangeEvent=se={}));var ce;(function(e){e.method=`textDocument/didChange`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(ce||(e.DidChangeTextDocumentNotification=ce={}));var le;(function(e){e.method=`textDocument/didClose`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(le||(e.DidCloseTextDocumentNotification=le={}));var G;(function(e){e.method=`textDocument/didSave`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(G||(e.DidSaveTextDocumentNotification=G={}));var K;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(K||(e.TextDocumentSaveReason=K={}));var ue;(function(e){e.method=`textDocument/willSave`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(ue||(e.WillSaveTextDocumentNotification=ue={}));var de;(function(e){e.method=`textDocument/willSaveWaitUntil`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(de||(e.WillSaveTextDocumentWaitUntilRequest=de={}));var fe;(function(e){e.method=`workspace/didChangeWatchedFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(fe||(e.DidChangeWatchedFilesNotification=fe={}));var pe;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(pe||(e.FileChangeType=pe={}));var me;(function(e){function t(e){let t=e;return r.objectLiteral(t)&&(n.URI.is(t.baseUri)||n.WorkspaceFolder.is(t.baseUri))&&r.string(t.pattern)}e.is=t})(me||(e.RelativePattern=me={}));var he;(function(e){e.Create=1,e.Change=2,e.Delete=4})(he||(e.WatchKind=he={}));var ge;(function(e){e.method=`textDocument/publishDiagnostics`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolNotificationType(e.method)})(ge||(e.PublishDiagnosticsNotification=ge={}));var _e;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(_e||(e.CompletionTriggerKind=_e={}));var ve;(function(e){e.method=`textDocument/completion`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(ve||(e.CompletionRequest=ve={}));var ye;(function(e){e.method=`completionItem/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(ye||(e.CompletionResolveRequest=ye={}));var be;(function(e){e.method=`textDocument/hover`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(be||(e.HoverRequest=be={}));var q;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(q||(e.SignatureHelpTriggerKind=q={}));var xe;(function(e){e.method=`textDocument/signatureHelp`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(xe||(e.SignatureHelpRequest=xe={}));var Se;(function(e){e.method=`textDocument/definition`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Se||(e.DefinitionRequest=Se={}));var Ce;(function(e){e.method=`textDocument/references`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ce||(e.ReferencesRequest=Ce={}));var we;(function(e){e.method=`textDocument/documentHighlight`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(we||(e.DocumentHighlightRequest=we={}));var Te;(function(e){e.method=`textDocument/documentSymbol`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Te||(e.DocumentSymbolRequest=Te={}));var Ee;(function(e){e.method=`textDocument/codeAction`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ee||(e.CodeActionRequest=Ee={}));var J;(function(e){e.method=`codeAction/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(J||(e.CodeActionResolveRequest=J={}));var De;(function(e){e.method=`workspace/symbol`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(De||(e.WorkspaceSymbolRequest=De={}));var Oe;(function(e){e.method=`workspaceSymbol/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Oe||(e.WorkspaceSymbolResolveRequest=Oe={}));var ke;(function(e){e.method=`textDocument/codeLens`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(ke||(e.CodeLensRequest=ke={}));var Ae;(function(e){e.method=`codeLens/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ae||(e.CodeLensResolveRequest=Ae={}));var je;(function(e){e.method=`workspace/codeLens/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(je||(e.CodeLensRefreshRequest=je={}));var Me;(function(e){e.method=`textDocument/documentLink`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Me||(e.DocumentLinkRequest=Me={}));var Ne;(function(e){e.method=`documentLink/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ne||(e.DocumentLinkResolveRequest=Ne={}));var Pe;(function(e){e.method=`textDocument/formatting`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Pe||(e.DocumentFormattingRequest=Pe={}));var Y;(function(e){e.method=`textDocument/rangeFormatting`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Y||(e.DocumentRangeFormattingRequest=Y={}));var Fe;(function(e){e.method=`textDocument/rangesFormatting`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Fe||(e.DocumentRangesFormattingRequest=Fe={}));var Ie;(function(e){e.method=`textDocument/onTypeFormatting`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ie||(e.DocumentOnTypeFormattingRequest=Ie={}));var Le;(function(e){e.Identifier=1})(Le||(e.PrepareSupportDefaultBehavior=Le={}));var Re;(function(e){e.method=`textDocument/rename`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Re||(e.RenameRequest=Re={}));var ze;(function(e){e.method=`textDocument/prepareRename`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(ze||(e.PrepareRenameRequest=ze={}));var Be;(function(e){e.method=`workspace/executeCommand`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Be||(e.ExecuteCommandRequest=Be={}));var Ve;(function(e){e.method=`workspace/applyEdit`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(`workspace/applyEdit`)})(Ve||(e.ApplyWorkspaceEditRequest=Ve={}))})),jt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createProtocolConnection=void 0;let t=S();function n(e,n,r,i){return t.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,t.createMessageConnection)(e,n,r,i)}e.createProtocolConnection=n})),Mt=a((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,`__esModule`,{value:!0}),e.LSPErrorCodes=e.createProtocolConnection=void 0,n(S(),e),n((st(),c(C)),e),n(Z(),e),n(At(),e);var r=jt();Object.defineProperty(e,`createProtocolConnection`,{enumerable:!0,get:function(){return r.createProtocolConnection}});var i;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(i||(e.LSPErrorCodes=i={}))})),Q=a((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,`__esModule`,{value:!0}),e.createProtocolConnection=void 0;let r=ne();n(ne(),e),n(Mt(),e);function i(e,t,n,i){return(0,r.createMessageConnection)(e,t,n,i)}e.createProtocolConnection=i})),Nt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.SemanticTokensBuilder=e.SemanticTokensDiff=e.SemanticTokensFeature=void 0;let t=Q();e.SemanticTokensFeature=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(t.SemanticTokensRefreshRequest.type),on:e=>{let n=t.SemanticTokensRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))},onDelta:e=>{let n=t.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))},onRange:e=>{let n=t.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}};var n=class{constructor(e,t){this.originalSequence=e,this.modifiedSequence=t}computeDiff(){let e=this.originalSequence.length,t=this.modifiedSequence.length,n=0;for(;n<t&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<t&&n<e){let r=e-1,i=t-1;for(;r>=n&&i>=n&&this.originalSequence[r]===this.modifiedSequence[i];)r--,i--;(r<n||i<n)&&(r++,i++);let a=r-n+1,o=this.modifiedSequence.slice(n,i+1);return o.length===1&&o[0]===this.originalSequence[r]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:o}]}else if(n<t)return[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}];else if(n<e)return[{start:n,deleteCount:e-n}];else return[]}};e.SemanticTokensDiff=n,e.SemanticTokensBuilder=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,n,r,i){let a=e,o=t;this._dataLen>0&&(a-=this._prevLine,a===0&&(o-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=o,this._data[this._dataLen++]=n,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData===void 0?this.build():{resultId:this.id,edits:new n(this._prevData,this._data).computeDiff()}}}})),Pt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.InlineCompletionFeature=void 0;let t=Q();e.InlineCompletionFeature=e=>class extends e{get inlineCompletion(){return{on:e=>this.connection.onRequest(t.InlineCompletionRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t)))}}}})),Ft=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.TextDocuments=void 0;let t=Q();e.TextDocuments=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new t.Emitter,this._onDidOpen=new t.Emitter,this._onDidClose=new t.Emitter,this._onDidSave=new t.Emitter,this._onWillSave=new t.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=t.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(e=>{let t=e.textDocument,n=this._configuration.create(t.uri,t.languageId,t.version,t.text);this._syncedDocuments.set(t.uri,n);let r=Object.freeze({document:n});this._onDidOpen.fire(r),this._onDidChangeContent.fire(r)})),n.push(e.onDidChangeTextDocument(e=>{let t=e.textDocument,n=e.contentChanges;if(n.length===0)return;let{version:r}=t;if(r==null)throw Error(`Received document change event for ${t.uri} without valid version identifier`);let i=this._syncedDocuments.get(t.uri);i!==void 0&&(i=this._configuration.update(i,n,r),this._syncedDocuments.set(t.uri,i),this._onDidChangeContent.fire(Object.freeze({document:i})))})),n.push(e.onDidCloseTextDocument(e=>{let t=this._syncedDocuments.get(e.textDocument.uri);t!==void 0&&(this._syncedDocuments.delete(e.textDocument.uri),this._onDidClose.fire(Object.freeze({document:t})))})),n.push(e.onWillSaveTextDocument(e=>{let t=this._syncedDocuments.get(e.textDocument.uri);t!==void 0&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((e,t)=>{let n=this._syncedDocuments.get(e.textDocument.uri);return n!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]})),n.push(e.onDidSaveTextDocument(e=>{let t=this._syncedDocuments.get(e.textDocument.uri);t!==void 0&&this._onDidSave.fire(Object.freeze({document:t}))})),t.Disposable.create(()=>{n.forEach(e=>e.dispose())})}}})),It=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.NotebookDocuments=e.NotebookSyncFeature=void 0;let t=Q(),n=Ft();e.NotebookSyncFeature=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(t.DidOpenNotebookDocumentNotification.type,t=>{e(t)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(t.DidChangeNotebookDocumentNotification.type,t=>{e(t)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(t.DidSaveNotebookDocumentNotification.type,t=>{e(t)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(t.DidCloseNotebookDocumentNotification.type,t=>{e(t)})}}};var r=class e{onDidOpenTextDocument(e){return this.openHandler=e,t.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,t.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,t.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};r.NULL_DISPOSE=Object.freeze({dispose:()=>{}}),e.NotebookDocuments=class{constructor(e){e instanceof n.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new n.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new t.Emitter,this._onDidChange=new t.Emitter,this._onDidSave=new t.Emitter,this._onDidClose=new t.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let t=this.notebookCellMap.get(e);return t&&t[0]}findNotebookDocumentForCell(e){let t=typeof e==`string`?e:e.document,n=this.notebookCellMap.get(t);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new r,i=[];return i.push(this.cellTextDocuments.listen(n)),i.push(e.notebooks.synchronization.onDidOpenNotebookDocument(e=>{this.notebookDocuments.set(e.notebookDocument.uri,e.notebookDocument);for(let t of e.cellTextDocuments)n.openTextDocument({textDocument:t});this.updateCellMap(e.notebookDocument),this._onDidOpen.fire(e.notebookDocument)})),i.push(e.notebooks.synchronization.onDidChangeNotebookDocument(e=>{let t=this.notebookDocuments.get(e.notebookDocument.uri);if(t===void 0)return;t.version=e.notebookDocument.version;let r=t.metadata,i=!1,a=e.change;a.metadata!==void 0&&(i=!0,t.metadata=a.metadata);let o=[],s=[],c=[],l=[];if(a.cells!==void 0){let e=a.cells;if(e.structure!==void 0){let r=e.structure.array;if(t.cells.splice(r.start,r.deleteCount,...r.cells===void 0?[]:r.cells),e.structure.didOpen!==void 0)for(let t of e.structure.didOpen)n.openTextDocument({textDocument:t}),o.push(t.uri);if(e.structure.didClose)for(let t of e.structure.didClose)n.closeTextDocument({textDocument:t}),s.push(t.uri)}if(e.data!==void 0){let n=new Map(e.data.map(e=>[e.document,e]));for(let e=0;e<=t.cells.length;e++){let r=n.get(t.cells[e].document);if(r!==void 0){let i=t.cells.splice(e,1,r);if(c.push({old:i[0],new:r}),n.delete(r.document),n.size===0)break}}}if(e.textContent!==void 0)for(let t of e.textContent)n.changeTextDocument({textDocument:t.document,contentChanges:t.changes}),l.push(t.document.uri)}this.updateCellMap(t);let u={notebookDocument:t};i&&(u.metadata={old:r,new:t.metadata});let d=[];for(let e of o)d.push(this.getNotebookCell(e));let f=[];for(let e of s)f.push(this.getNotebookCell(e));let p=[];for(let e of l)p.push(this.getNotebookCell(e));(d.length>0||f.length>0||c.length>0||p.length>0)&&(u.cells={added:d,removed:f,changed:{data:c,textContent:p}}),(u.metadata!==void 0||u.cells!==void 0)&&this._onDidChange.fire(u)})),i.push(e.notebooks.synchronization.onDidSaveNotebookDocument(e=>{let t=this.notebookDocuments.get(e.notebookDocument.uri);t!==void 0&&this._onDidSave.fire(t)})),i.push(e.notebooks.synchronization.onDidCloseNotebookDocument(e=>{let t=this.notebookDocuments.get(e.notebookDocument.uri);if(t!==void 0){this._onDidClose.fire(t);for(let t of e.cellTextDocuments)n.closeTextDocument({textDocument:t});this.notebookDocuments.delete(e.notebookDocument.uri);for(let e of t.cells)this.notebookCellMap.delete(e.document)}})),t.Disposable.create(()=>{i.forEach(e=>e.dispose())})}updateCellMap(e){for(let t of e.cells)this.notebookCellMap.set(t.document,[t,e])}}})),Lt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.thenable=e.typedArray=e.stringArray=e.array=e.func=e.error=e.number=e.string=e.boolean=void 0;function t(e){return e===!0||e===!1}e.boolean=t;function n(e){return typeof e==`string`||e instanceof String}e.string=n;function r(e){return typeof e==`number`||e instanceof Number}e.number=r;function i(e){return e instanceof Error}e.error=i;function a(e){return typeof e==`function`}e.func=a;function o(e){return Array.isArray(e)}e.array=o;function s(e){return o(e)&&e.every(e=>n(e))}e.stringArray=s;function c(e,t){return Array.isArray(e)&&e.every(t)}e.typedArray=c;function l(e){return e&&a(e.then)}e.thenable=l})),Rt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.generateUuid=e.parse=e.isUUID=e.v4=e.empty=void 0;var t=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},n=class e extends t{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),`-`,e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),`-`,`4`,e._randomHex(),e._randomHex(),e._randomHex(),`-`,e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),`-`,e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(``))}};n._chars=[`0`,`1`,`2`,`3`,`4`,`5`,`6`,`6`,`7`,`8`,`9`,`a`,`b`,`c`,`d`,`e`,`f`],n._timeHighBits=[`8`,`9`,`a`,`b`],e.empty=new t(`00000000-0000-0000-0000-000000000000`);function r(){return new n}e.v4=r;let i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e){return i.test(e)}e.isUUID=a;function o(e){if(!a(e))throw Error(`invalid uuid`);return new t(e)}e.parse=o;function s(){return r().asHex()}e.generateUuid=s})),zt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.attachPartialResult=e.ProgressFeature=e.attachWorkDone=void 0;let t=Q(),n=Rt();var r=class e{constructor(t,n){this._connection=t,this._token=n,e.Instances.set(this._token,this)}begin(e,n,r,i){let a={kind:`begin`,title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(t.WorkDoneProgress.type,this._token,a)}report(e,n){let r={kind:`report`};typeof e==`number`?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(t.WorkDoneProgress.type,this._token,r)}done(){e.Instances.delete(this._token),this._connection.sendProgress(t.WorkDoneProgress.type,this._token,{kind:`end`})}};r.Instances=new Map;var i=class extends r{constructor(e,n){super(e,n),this._source=new t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},a=class{constructor(){}begin(){}report(){}done(){}},o=class extends a{constructor(){super(),this._source=new t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function s(e,t){if(t===void 0||t.workDoneToken===void 0)return new a;let n=t.workDoneToken;return delete t.workDoneToken,new r(e,n)}e.attachWorkDone=s,e.ProgressFeature=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(t.WorkDoneProgressCancelNotification.type,e=>{let t=r.Instances.get(e.token);(t instanceof i||t instanceof o)&&t.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new a:new r(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,n.generateUuid)();return this.connection.sendRequest(t.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new i(this.connection,e))}else return Promise.resolve(new o)}};var c;(function(e){e.type=new t.ProgressType})(c||={});var l=class{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(c.type,this._token,e)}};function u(e,t){if(t===void 0||t.partialResultToken===void 0)return;let n=t.partialResultToken;return delete t.partialResultToken,new l(e,n)}e.attachPartialResult=u})),Bt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ConfigurationFeature=void 0;let t=Q(),n=Lt();e.ConfigurationFeature=e=>class extends e{getConfiguration(e){return e?n.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(t.ConfigurationRequest.type,n).then(t=>Array.isArray(t)?Array.isArray(e)?t:t[0]:Array.isArray(e)?[]:null)}}})),Vt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.WorkspaceFoldersFeature=void 0;let t=Q();e.WorkspaceFoldersFeature=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new t.Emitter,this.connection.onNotification(t.DidChangeWorkspaceFoldersNotification.type,e=>{this._onDidChangeWorkspaceFolders.fire(e.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let t=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=t===!0||typeof t==`string`}getWorkspaceFolders(){return this.connection.sendRequest(t.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw Error(`Client doesn't support sending workspace folder change events.`);return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(t.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}}})),Ht=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.CallHierarchyFeature=void 0;let t=Q();e.CallHierarchyFeature=e=>class extends e{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(t.CallHierarchyPrepareRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)),onIncomingCalls:e=>{let n=t.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))},onOutgoingCalls:e=>{let n=t.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}}})),Ut=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ShowDocumentFeature=void 0;let t=Q();e.ShowDocumentFeature=e=>class extends e{showDocument(e){return this.connection.sendRequest(t.ShowDocumentRequest.type,e)}}})),Wt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.FileOperationsFeature=void 0;let t=Q();e.FileOperationsFeature=e=>class extends e{onDidCreateFiles(e){return this.connection.onNotification(t.DidCreateFilesNotification.type,t=>{e(t)})}onDidRenameFiles(e){return this.connection.onNotification(t.DidRenameFilesNotification.type,t=>{e(t)})}onDidDeleteFiles(e){return this.connection.onNotification(t.DidDeleteFilesNotification.type,t=>{e(t)})}onWillCreateFiles(e){return this.connection.onRequest(t.WillCreateFilesRequest.type,(t,n)=>e(t,n))}onWillRenameFiles(e){return this.connection.onRequest(t.WillRenameFilesRequest.type,(t,n)=>e(t,n))}onWillDeleteFiles(e){return this.connection.onRequest(t.WillDeleteFilesRequest.type,(t,n)=>e(t,n))}}})),Gt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.LinkedEditingRangeFeature=void 0;let t=Q();e.LinkedEditingRangeFeature=e=>class extends e{onLinkedEditingRange(e){return this.connection.onRequest(t.LinkedEditingRangeRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0))}}})),Kt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.TypeHierarchyFeature=void 0;let t=Q();e.TypeHierarchyFeature=e=>class extends e{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(t.TypeHierarchyPrepareRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)),onSupertypes:e=>{let n=t.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))},onSubtypes:e=>{let n=t.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}}})),qt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.InlineValueFeature=void 0;let t=Q();e.InlineValueFeature=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(t.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(t.InlineValueRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t)))}}}})),Jt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.FoldingRangeFeature=void 0;let t=Q();e.FoldingRangeFeature=e=>class extends e{get foldingRange(){return{refresh:()=>this.connection.sendRequest(t.FoldingRangeRefreshRequest.type),on:e=>{let n=t.FoldingRangeRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}}})),Yt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.InlayHintFeature=void 0;let t=Q();e.InlayHintFeature=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(t.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(t.InlayHintRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t))),resolve:e=>this.connection.onRequest(t.InlayHintResolveRequest.type,(t,n)=>e(t,n))}}}})),Xt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.DiagnosticFeature=void 0;let t=Q();e.DiagnosticFeature=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(t.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(t.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:e=>this.connection.onRequest(t.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t.WorkspaceDiagnosticRequest.partialResult,n)))}}}})),Zt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.MonikerFeature=void 0;let t=Q();e.MonikerFeature=e=>class extends e{get moniker(){return{on:e=>{let n=t.MonikerRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}}})),Qt=a((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createConnection=e.combineFeatures=e.combineNotebooksFeatures=e.combineLanguagesFeatures=e.combineWorkspaceFeatures=e.combineWindowFeatures=e.combineClientFeatures=e.combineTracerFeatures=e.combineTelemetryFeatures=e.combineConsoleFeatures=e._NotebooksImpl=e._LanguagesImpl=e.BulkUnregistration=e.BulkRegistration=e.ErrorMessageTracker=void 0;let t=Q(),n=Lt(),r=Rt(),i=zt(),a=Bt(),o=Vt(),s=Ht(),c=Nt(),l=Ut(),u=Wt(),d=Gt(),f=Kt(),p=qt(),m=Jt(),h=Yt(),ee=Xt(),g=It(),_=Zt();function v(e){if(e!==null)return e}e.ErrorMessageTracker=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||=0,t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}};var te=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(t.MessageType.Error,e)}warn(e){this.send(t.MessageType.Warning,e)}info(e){this.send(t.MessageType.Info,e)}log(e){this.send(t.MessageType.Log,e)}debug(e){this.send(t.MessageType.Debug,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(t.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,t.RAL)().console.error(`Sending log message failed`)})}},y=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:t.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(v)}showWarningMessage(e,...n){let r={type:t.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(v)}showInformationMessage(e,...n){let r={type:t.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(v)}};let b=(0,l.ShowDocumentFeature)((0,i.ProgressFeature)(y));var x;(function(e){function t(){return new S}e.create=t})(x||(e.BulkRegistration=x={}));var S=class{constructor(){this._registrations=[],this._registered=new Set}add(e,t){let i=n.string(e)?e:e.method;if(this._registered.has(i))throw Error(`${i} is already added to this registration`);let a=r.generateUuid();this._registrations.push({id:a,method:i,registerOptions:t||{}}),this._registered.add(i)}asRegistrationParams(){return{registrations:this._registrations}}},ne;(function(e){function t(){return new C(void 0,[])}e.create=t})(ne||(e.BulkUnregistration=ne={}));var C=class{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(e=>{this._unregistrations.set(e.method,e)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let n={unregisterations:e};this._connection.sendRequest(t.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info(`Bulk unregistration failed.`)})}disposeSingle(e){let r=n.string(e)?e:e.method,i=this._unregistrations.get(r);if(!i)return!1;let a={unregisterations:[i]};return this._connection.sendRequest(t.UnregistrationRequest.type,a).then(()=>{this._unregistrations.delete(r)},e=>{this._connection.console.info(`Un-registering request handler for ${i.id} failed.`)}),!0}},w=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof S?this.registerMany(e):e instanceof C?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,i,a){let o=n.string(i)?i:i.method,s=r.generateUuid(),c={registrations:[{id:s,method:o,registerOptions:a||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(t.RegistrationRequest.type,c).then(t=>(e.add({id:s,method:o}),e),e=>(this.connection.console.info(`Registering request handler for ${o} failed.`),Promise.reject(e)))}registerSingle2(e,i){let a=n.string(e)?e:e.method,o=r.generateUuid(),s={registrations:[{id:o,method:a,registerOptions:i||{}}]};return this.connection.sendRequest(t.RegistrationRequest.type,s).then(e=>t.Disposable.create(()=>{this.unregisterSingle(o,a).catch(()=>{this.connection.console.info(`Un-registering capability with id ${o} failed.`)})}),e=>(this.connection.console.info(`Registering request handler for ${a} failed.`),Promise.reject(e)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(t.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(t.RegistrationRequest.type,n).then(()=>new C(this._connection,n.registrations.map(e=>({id:e.id,method:e.method}))),e=>(this.connection.console.info(`Bulk registration failed.`),Promise.reject(e)))}},T=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(e){return e&&!!e.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(t.ApplyWorkspaceEditRequest.type,r)}};let E=(0,u.FileOperationsFeature)((0,o.WorkspaceFoldersFeature)((0,a.ConfigurationFeature)(T)));var D=class{constructor(){this._trace=t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==t.Trace.Off&&this.connection.sendNotification(t.LogTraceNotification.type,{message:e,verbose:this._trace===t.Trace.Verbose?n:void 0}).catch(()=>{})}},O=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(t.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log(`Sending TelemetryEventNotification failed`)})}},k=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,i.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,i.attachPartialResult)(this.connection,t)}};e._LanguagesImpl=k;let A=(0,m.FoldingRangeFeature)((0,_.MonikerFeature)((0,ee.DiagnosticFeature)((0,h.InlayHintFeature)((0,p.InlineValueFeature)((0,f.TypeHierarchyFeature)((0,d.LinkedEditingRangeFeature)((0,c.SemanticTokensFeature)((0,s.CallHierarchyFeature)(k)))))))));var re=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,i.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,i.attachPartialResult)(this.connection,t)}};e._NotebooksImpl=re;let j=(0,g.NotebookSyncFeature)(re);function M(e,t){return function(n){return t(e(n))}}e.combineConsoleFeatures=M;function N(e,t){return function(n){return t(e(n))}}e.combineTelemetryFeatures=N;function P(e,t){return function(n){return t(e(n))}}e.combineTracerFeatures=P;function F(e,t){return function(n){return t(e(n))}}e.combineClientFeatures=F;function I(e,t){return function(n){return t(e(n))}}e.combineWindowFeatures=I;function L(e,t){return function(n){return t(e(n))}}e.combineWorkspaceFeatures=L;function R(e,t){return function(n){return t(e(n))}}e.combineLanguagesFeatures=R;function z(e,t){return function(n){return t(e(n))}}e.combineNotebooksFeatures=z;function ie(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}return{__brand:`features`,console:n(e.console,t.console,M),tracer:n(e.tracer,t.tracer,P),telemetry:n(e.telemetry,t.telemetry,N),client:n(e.client,t.client,F),window:n(e.window,t.window,I),workspace:n(e.workspace,t.workspace,L),languages:n(e.languages,t.languages,R),notebooks:n(e.notebooks,t.notebooks,z)}}e.combineFeatures=ie;function B(e,r,a){let o=a&&a.console?new(a.console(te)):new te,s=e(o);o.rawAttach(s);let c=a&&a.tracer?new(a.tracer(D)):new D,l=a&&a.telemetry?new(a.telemetry(O)):new O,u=a&&a.client?new(a.client(w)):new w,d=a&&a.window?new(a.window(b)):new b,f=a&&a.workspace?new(a.workspace(E)):new E,p=a&&a.languages?new(a.languages(A)):new A,m=a&&a.notebooks?new(a.notebooks(j)):new j,h=[o,c,l,u,d,f,p,m];function ee(e){return e instanceof Promise?e:n.thenable(e)?new Promise((t,n)=>{e.then(e=>t(e),e=>n(e))}):Promise.resolve(e)}let g,_,v,y={listen:()=>s.listen(),sendRequest:(e,...t)=>s.sendRequest(n.string(e)?e:e.method,...t),onRequest:(e,t)=>s.onRequest(e,t),sendNotification:(e,t)=>{let r=n.string(e)?e:e.method;return s.sendNotification(r,t)},onNotification:(e,t)=>s.onNotification(e,t),onProgress:s.onProgress,sendProgress:s.sendProgress,onInitialize:e=>(_=e,{dispose:()=>{_=void 0}}),onInitialized:e=>s.onNotification(t.InitializedNotification.type,e),onShutdown:e=>(g=e,{dispose:()=>{g=void 0}}),onExit:e=>(v=e,{dispose:()=>{v=void 0}}),get console(){return o},get telemetry(){return l},get tracer(){return c},get client(){return u},get window(){return d},get workspace(){return f},get languages(){return p},get notebooks(){return m},onDidChangeConfiguration:e=>s.onNotification(t.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>s.onNotification(t.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>s.onNotification(t.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>s.onNotification(t.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>s.onNotification(t.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>s.onNotification(t.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>s.onRequest(t.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>s.onNotification(t.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>s.sendNotification(t.PublishDiagnosticsNotification.type,e),onHover:e=>s.onRequest(t.HoverRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onCompletion:e=>s.onRequest(t.CompletionRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onCompletionResolve:e=>s.onRequest(t.CompletionResolveRequest.type,e),onSignatureHelp:e=>s.onRequest(t.SignatureHelpRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onDeclaration:e=>s.onRequest(t.DeclarationRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onDefinition:e=>s.onRequest(t.DefinitionRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onTypeDefinition:e=>s.onRequest(t.TypeDefinitionRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onImplementation:e=>s.onRequest(t.ImplementationRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onReferences:e=>s.onRequest(t.ReferencesRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onDocumentHighlight:e=>s.onRequest(t.DocumentHighlightRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onDocumentSymbol:e=>s.onRequest(t.DocumentSymbolRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onWorkspaceSymbol:e=>s.onRequest(t.WorkspaceSymbolRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onWorkspaceSymbolResolve:e=>s.onRequest(t.WorkspaceSymbolResolveRequest.type,e),onCodeAction:e=>s.onRequest(t.CodeActionRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onCodeActionResolve:e=>s.onRequest(t.CodeActionResolveRequest.type,(t,n)=>e(t,n)),onCodeLens:e=>s.onRequest(t.CodeLensRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onCodeLensResolve:e=>s.onRequest(t.CodeLensResolveRequest.type,(t,n)=>e(t,n)),onDocumentFormatting:e=>s.onRequest(t.DocumentFormattingRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onDocumentRangeFormatting:e=>s.onRequest(t.DocumentRangeFormattingRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onDocumentOnTypeFormatting:e=>s.onRequest(t.DocumentOnTypeFormattingRequest.type,(t,n)=>e(t,n)),onRenameRequest:e=>s.onRequest(t.RenameRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onPrepareRename:e=>s.onRequest(t.PrepareRenameRequest.type,(t,n)=>e(t,n)),onDocumentLinks:e=>s.onRequest(t.DocumentLinkRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onDocumentLinkResolve:e=>s.onRequest(t.DocumentLinkResolveRequest.type,(t,n)=>e(t,n)),onDocumentColor:e=>s.onRequest(t.DocumentColorRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onColorPresentation:e=>s.onRequest(t.ColorPresentationRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onFoldingRanges:e=>s.onRequest(t.FoldingRangeRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onSelectionRanges:e=>s.onRequest(t.SelectionRangeRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onExecuteCommand:e=>s.onRequest(t.ExecuteCommandRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),dispose:()=>s.dispose()};for(let e of h)e.attach(y);return s.onRequest(t.InitializeRequest.type,e=>{r.initialize(e),n.string(e.trace)&&(c.trace=t.Trace.fromString(e.trace));for(let t of h)t.initialize(e.capabilities);if(_)return ee(_(e,new t.CancellationTokenSource().token,(0,i.attachWorkDone)(s,e),void 0)).then(e=>{if(e instanceof t.ResponseError)return e;let r=e;r||={capabilities:{}};let i=r.capabilities;i||(i={},r.capabilities=i),i.textDocumentSync===void 0||i.textDocumentSync===null?i.textDocumentSync=n.number(y.__textDocumentSync)?y.__textDocumentSync:t.TextDocumentSyncKind.None:!n.number(i.textDocumentSync)&&!n.number(i.textDocumentSync.change)&&(i.textDocumentSync.change=n.number(y.__textDocumentSync)?y.__textDocumentSync:t.TextDocumentSyncKind.None);for(let e of h)e.fillServerCapabilities(i);return r});{let e={capabilities:{textDocumentSync:t.TextDocumentSyncKind.None}};for(let t of h)t.fillServerCapabilities(e.capabilities);return e}}),s.onRequest(t.ShutdownRequest.type,()=>{if(r.shutdownReceived=!0,g)return g(new t.CancellationTokenSource().token)}),s.onNotification(t.ExitNotification.type,()=>{try{v&&v()}finally{r.shutdownReceived?r.exit(0):r.exit(1)}}),s.onNotification(t.SetTraceNotification.type,e=>{c.trace=t.Trace.fromString(e.value)}),y}e.createConnection=B})),$t=a((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,`__esModule`,{value:!0}),e.ProposedFeatures=e.NotebookDocuments=e.TextDocuments=e.SemanticTokensBuilder=void 0;let r=Nt();Object.defineProperty(e,`SemanticTokensBuilder`,{enumerable:!0,get:function(){return r.SemanticTokensBuilder}});let i=Pt();n(Q(),e);let a=Ft();Object.defineProperty(e,`TextDocuments`,{enumerable:!0,get:function(){return a.TextDocuments}});let o=It();Object.defineProperty(e,`NotebookDocuments`,{enumerable:!0,get:function(){return o.NotebookDocuments}}),n(Qt(),e);var s;(function(e){e.all={__brand:`features`,languages:i.InlineCompletionFeature}})(s||(e.ProposedFeatures=s={}))})),en=a(((e,t)=>{t.exports=Q()})),tn=a((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,`__esModule`,{value:!0}),e.createConnection=void 0;let r=$t();n(en(),e),n($t(),e);let i=!1,a={initialize:e=>{},get shutdownReceived(){return i},set shutdownReceived(e){i=e},exit:e=>{}};function o(e,t,n,i){let o,s,c,l;return e!==void 0&&e.__brand===`features`&&(o=e,e=t,t=n,n=i),r.ConnectionStrategy.is(e)||r.ConnectionOptions.is(e)?l=e:(s=e,c=t,l=n),(0,r.createConnection)(e=>(0,r.createProtocolConnection)(s,c,e,l),a,o)}e.createConnection=o})),$=tn(),nn=class e{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content}update(t,n){for(let n of t)if(e.isIncremental(n)){let e=cn(n.range),t=this.offsetAt(e.start),r=this.offsetAt(e.end);this._content=this._content.substring(0,t)+n.text+this._content.substring(r,this._content.length);let i=Math.max(e.start.line,0),a=Math.max(e.end.line,0),o=this._lineOffsets,s=on(n.text,!1,t);if(a-i===s.length)for(let e=0,t=s.length;e<t;e++)o[e+i+1]=s[e];else s.length<1e4?o.splice(i+1,a-i,...s):this._lineOffsets=o=o.slice(0,i+1).concat(s,o.slice(a+1));let c=n.text.length-(r-t);if(c!==0)for(let e=i+1+s.length,t=o.length;e<t;e++)o[e]=o[e]+c}else if(e.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw Error(`Unknown change event received`);this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=on(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),n=0,r=t.length;if(r===0)return{line:0,character:e};for(;n<r;){let i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}let i=n-1;return e=this.ensureBeforeEOL(e,t[i]),{line:i,character:e-t[i]}}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let n=t[e.line];if(e.character<=0)return n;let r=e.line+1<t.length?t[e.line+1]:this._content.length,i=Math.min(n+e.character,r);return this.ensureBeforeEOL(i,n)}ensureBeforeEOL(e,t){for(;e>t&&sn(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let t=e;return t!=null&&typeof t.text==`string`&&t.range!==void 0&&(t.rangeLength===void 0||typeof t.rangeLength==`number`)}static isFull(e){let t=e;return t!=null&&typeof t.text==`string`&&t.range===void 0&&t.rangeLength===void 0}},rn;(function(e){function t(e,t,n,r){return new nn(e,t,n,r)}e.create=t;function n(e,t,n){if(e instanceof nn)return e.update(t,n),e;throw Error(`TextDocument.update: document must be created by TextDocument.create`)}e.update=n;function r(e,t){let n=e.getText(),r=an(t.map(ln),(e,t)=>{let n=e.range.start.line-t.range.start.line;return n===0?e.range.start.character-t.range.start.character:n}),i=0,a=[];for(let t of r){let r=e.offsetAt(t.range.start);if(r<i)throw Error(`Overlapping edit`);r>i&&a.push(n.substring(i,r)),t.newText.length&&a.push(t.newText),i=e.offsetAt(t.range.end)}return a.push(n.substr(i)),a.join(``)}e.applyEdits=r})(rn||={});function an(e,t){if(e.length<=1)return e;let n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);an(r,t),an(i,t);let a=0,o=0,s=0;for(;a<r.length&&o<i.length;)t(r[a],i[o])<=0?e[s++]=r[a++]:e[s++]=i[o++];for(;a<r.length;)e[s++]=r[a++];for(;o<i.length;)e[s++]=i[o++];return e}function on(e,t,n=0){let r=t?[n]:[];for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);sn(i)&&(i===13&&t+1<e.length&&e.charCodeAt(t+1)===10&&t++,r.push(n+t+1))}return r}function sn(e){return e===13||e===10}function cn(e){let t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function ln(e){let t=cn(e.range);return t===e.range?e:{newText:e.newText,range:t}}var un=a(((e,t)=>{t.exports=tn()}))();let dn=[{label:`global`,kind:`keyword`,detail:`Global Section`,documentation:`Global configuration section`,insertText:`global {
	\${0}
}`,isSnippet:!0},{label:`subscription`,kind:`keyword`,detail:`Subscription Section`,documentation:`Define proxy subscriptions`,insertText:`subscription {
	\${0}
}`,isSnippet:!0},{label:`node`,kind:`keyword`,detail:`Node Section`,documentation:`Define proxy nodes`,insertText:`node {
	\${0}
}`,isSnippet:!0},{label:`dns`,kind:`keyword`,detail:`DNS Section`,documentation:`DNS configuration section`,insertText:`dns {
	\${0}
}`,isSnippet:!0},{label:`group`,kind:`keyword`,detail:`Group Section`,documentation:`Proxy group configuration`,insertText:`group {
	\${0}
}`,isSnippet:!0},{label:`routing`,kind:`keyword`,detail:`Routing Section`,documentation:`Routing rules configuration`,insertText:`routing {
	\${0}
}`,isSnippet:!0},{label:`tproxy_port`,kind:`property`,detail:`TProxy Port`,documentation:`Transparent proxy listening port`,insertText:"tproxy_port: ${1:12345}",isSnippet:!0},{label:`log_level`,kind:`property`,detail:`Log Level`,documentation:"Logging level for dae output.\n\n**Values:** `error`, `warn`, `info`, `debug`, `trace`",insertText:"log_level: ${1|info,warn,error,debug,trace|}",isSnippet:!0},{label:`tcp_check_url`,kind:`property`,detail:`TCP Check URL`,documentation:`URL for TCP health check`,insertText:"tcp_check_url: '${1:http://cp.cloudflare.com}'",isSnippet:!0},{label:`udp_check_dns`,kind:`property`,detail:`UDP Check DNS`,documentation:`DNS server for UDP health check`,insertText:"udp_check_dns: '${1:dns.google:53}'",isSnippet:!0},{label:`check_interval`,kind:`property`,detail:`Check Interval`,documentation:"Interval between health checks.\n\n**Go duration format:** ns, us/s, ms, s, m, h\n\nExamples: `30s`, `1m`, `500ms`",insertText:"check_interval: ${1|30s,1m,15s,45s,2m|}",isSnippet:!0},{label:`check_tolerance`,kind:`property`,detail:`Check Tolerance`,documentation:"Group will switch node only when `new_latency <= old_latency - tolerance`.\n\n**Go duration format:** ns, us/s, ms, s, m, h\n\nExamples: `50ms`, `100ms`, `200ms`",insertText:"check_tolerance: ${1|50ms,100ms,150ms,200ms|}",isSnippet:!0},{label:`dial_mode`,kind:`property`,detail:`Dial Mode`,documentation:"Dialing mode for proxy connections.\n\n**Values:**\n- `ip`: Dial using IP directly\n- `domain`: Dial using sniffed domain\n- `domain+`: domain mode without domain reality check\n- `domain++`: domain+ with re-routing",insertText:"dial_mode: ${1|domain,ip,domain\\+,domain\\+\\+|}",isSnippet:!0},{label:`wan_interface`,kind:`property`,detail:`WAN Interface`,documentation:`WAN interface name`,insertText:"wan_interface: ${1:auto}",isSnippet:!0},{label:`lan_interface`,kind:`property`,detail:`LAN Interface`,documentation:`LAN interface names`,insertText:"lan_interface: ${1:docker0}",isSnippet:!0},{label:`auto_config_kernel_parameter`,kind:`property`,detail:`Auto Config Kernel`,documentation:`Automatically configure Linux kernel parameters like ip_forward and send_redirects.`,insertText:"auto_config_kernel_parameter: ${1|true,false|}",isSnippet:!0},{label:`auto_config_firewall_rule`,kind:`property`,detail:`Auto Config Firewall`,documentation:`Automatically configure firewall rules.`,insertText:"auto_config_firewall_rule: ${1|true,false|}",isSnippet:!0},{label:`sniffing_timeout`,kind:`property`,detail:`Sniffing Timeout`,documentation:"Timeout for waiting first data for sniffing. It is always 0 if dial_mode is ip.\n\n**Go duration format:** ns, us/s, ms, s, m, h\n\nExamples: `100ms`, `200ms`, `300ms`",insertText:"sniffing_timeout: ${1|100ms,200ms,300ms,500ms|}",isSnippet:!0},{label:`tls_implementation`,kind:`property`,detail:`TLS Implementation`,documentation:`TLS implementation to use`,insertText:"tls_implementation: ${1|tls,utls|}",isSnippet:!0},{label:`utls_imitate`,kind:`property`,detail:`uTLS Imitate`,documentation:`Browser fingerprint to imitate when tls_implementation is utls. See: https://github.com/daeuniverse/dae/blob/main/component/outbound/transport/tls/utls.go`,insertText:"utls_imitate: ${1|chrome_auto,firefox_auto,safari_auto,edge_auto,ios_auto,randomized,chrome_58,chrome_62,chrome_70,chrome_72,chrome_83,chrome_87,chrome_96,chrome_100,chrome_102,firefox_55,firefox_56,firefox_63,firefox_65,firefox_99,firefox_102,firefox_105,safari_16_0,edge_85,edge_106,ios_11_1,ios_12_1,ios_13,ios_14,android_11_okhttp,360_auto,360_7_5,360_11_0,qq_auto,qq_11_1,randomizedalpn,randomizednoalpn|}",isSnippet:!0},{label:`tproxy_port_protect`,kind:`property`,detail:`TProxy Port Protect`,documentation:`Protect tproxy port from unsolicited traffic`,insertText:"tproxy_port_protect: ${1|true,false|}",isSnippet:!0},{label:`pprof_port`,kind:`property`,detail:`PProf Port`,documentation:`Set non-zero value to enable pprof for debugging`,insertText:"pprof_port: ${1:0}",isSnippet:!0},{label:`so_mark_from_dae`,kind:`property`,detail:`SO_MARK from dae`,documentation:`SO_MARK for traffic sent from dae to avoid traffic loop`,insertText:"so_mark_from_dae: ${1:0}",isSnippet:!0},{label:`disable_waiting_network`,kind:`property`,detail:`Disable Waiting Network`,documentation:`Disable waiting for network before pulling subscriptions`,insertText:"disable_waiting_network: ${1|true,false|}",isSnippet:!0},{label:`enable_local_tcp_fast_redirect`,kind:`property`,detail:`Enable Local TCP Fast Redirect`,documentation:`Enable fast redirect for local TCP connections (experimental)`,insertText:"enable_local_tcp_fast_redirect: ${1|true,false|}",isSnippet:!0},{label:`tcp_check_http_method`,kind:`property`,detail:`TCP Check HTTP Method`,documentation:`HTTP method for tcp_check_url (HEAD bypasses traffic accounting)`,insertText:"tcp_check_http_method: ${1|HEAD,GET|}",isSnippet:!0},{label:`allow_insecure`,kind:`property`,detail:`Allow Insecure TLS`,documentation:`Allow insecure TLS certificates (not recommended)`,insertText:"allow_insecure: ${1|true,false|}",isSnippet:!0},{label:`tls_fragment`,kind:`property`,detail:`TLS Fragment`,documentation:`Enable TLS fragmentation to bypass SNI blocking`,insertText:"tls_fragment: ${1|true,false|}",isSnippet:!0},{label:`tls_fragment_length`,kind:`property`,detail:`TLS Fragment Length`,documentation:`TLS fragment packet length range in bytes (e.g., 50-100)`,insertText:"tls_fragment_length: '${1:50-100}'",isSnippet:!0},{label:`tls_fragment_interval`,kind:`property`,detail:`TLS Fragment Interval`,documentation:`TLS fragment packet interval in milliseconds (e.g., 10-20)`,insertText:"tls_fragment_interval: '${1:10-20}'",isSnippet:!0},{label:`mptcp`,kind:`property`,detail:`Multipath TCP`,documentation:`Enable MPTCP for load balance and failover`,insertText:"mptcp: ${1|true,false|}",isSnippet:!0},{label:`bandwidth_max_tx`,kind:`property`,detail:`Max Upload Bandwidth`,documentation:`Maximum upload bandwidth for Hysteria2 etc. (e.g., 200 mbps)`,insertText:"bandwidth_max_tx: '${1:200 mbps}'",isSnippet:!0},{label:`bandwidth_max_rx`,kind:`property`,detail:`Max Download Bandwidth`,documentation:`Maximum download bandwidth for Hysteria2 etc. (e.g., 1 gbps)`,insertText:"bandwidth_max_rx: '${1:1 gbps}'",isSnippet:!0},{label:`fallback_resolver`,kind:`property`,detail:`Fallback DNS Resolver`,documentation:`Fallback DNS when system DNS fails (format: ip:port)`,insertText:"fallback_resolver: '${1:8.8.8.8:53}'",isSnippet:!0},{label:`ipversion_prefer`,kind:`property`,detail:`IP Version Prefer`,documentation:`Prefer IPv4 (4) or IPv6 (6) responses. If set to 4 and the domain has both A and AAAA records, dae will only respond to type A queries.`,insertText:"ipversion_prefer: ${1|4,6|}",isSnippet:!0},{label:`bind`,kind:`property`,detail:`DNS Bind Address`,documentation:`Local address for DNS queries (e.g., 127.0.0.1:5353)`,insertText:"bind: '${1|tcp+udp,tcp,udp|}://${2:127.0.0.1}:${3:5353}'",isSnippet:!0},{label:`filter`,kind:`property`,detail:`Filter`,documentation:`Filter nodes in group. Use subtag() or name() to filter.`,insertText:"filter: ${1:subtag(my_sub)}",isSnippet:!0},{label:`filter (with latency)`,kind:`property`,detail:`Filter with Latency Offset`,documentation:`Filter nodes with latency offset for failover scenarios. Negative values make nodes preferred.`,insertText:"filter: name(${1:keyword}: '${2:pattern}') [add_latency: ${3:-500ms}]",isSnippet:!0},{label:`policy`,kind:`property`,detail:`Policy`,documentation:`Load balancing policy`,insertText:"policy: ${1|min_moving_avg,min,min_avg10,random,fixed(0)|}",isSnippet:!0},{label:`min_moving_avg`,kind:`function`,detail:`Min Moving Average`,documentation:`Select node with minimum moving average latency`,insertText:`min_moving_avg`},{label:`min`,kind:`function`,detail:`Min Latency`,documentation:`Select node with minimum latency`,insertText:`min`},{label:`min_avg10`,kind:`function`,detail:`Min Average 10`,documentation:`Select node with minimum average of last 10 checks`,insertText:`min_avg10`},{label:`random`,kind:`function`,detail:`Random`,documentation:`Randomly select a node`,insertText:`random`},{label:`fixed`,kind:`function`,detail:`Fixed Index`,documentation:`Select node at fixed index`,insertText:"fixed(${1:0})",isSnippet:!0},{label:`subtag`,kind:`function`,detail:`Subscription Tag`,documentation:`Filter nodes by subscription tag`,insertText:"subtag(${1:tag})",isSnippet:!0},{label:`name`,kind:`function`,detail:`Name Filter`,documentation:`Filter nodes by name pattern`,insertText:"name(${1|keyword,regex|}: '${2:pattern}')",isSnippet:!0},{label:`dip`,kind:`function`,detail:`Destination IP`,documentation:`Match destination IP address`,insertText:"dip(${1:ip})",isSnippet:!0},{label:`dport`,kind:`function`,detail:`Destination Port`,documentation:`Match destination port`,insertText:"dport(${1:port})",isSnippet:!0},{label:`sip`,kind:`function`,detail:`Source IP`,documentation:`Match source IP address`,insertText:"sip(${1:ip})",isSnippet:!0},{label:`sport`,kind:`function`,detail:`Source Port`,documentation:`Match source port`,insertText:"sport(${1:port})",isSnippet:!0},{label:`ipversion`,kind:`function`,detail:`IP Version`,documentation:`Match IP version (4 or 6)`,insertText:"ipversion(${1|4,6|})",isSnippet:!0},{label:`l4proto`,kind:`function`,detail:`L4 Protocol`,documentation:`Match Layer 4 protocol (tcp/udp)`,insertText:"l4proto(${1|tcp,udp|})",isSnippet:!0},{label:`mac`,kind:`function`,detail:`MAC Address`,documentation:`Match MAC address`,insertText:"mac(${1:mac})",isSnippet:!0},{label:`pname`,kind:`function`,detail:`Process Name`,documentation:`Match process name`,insertText:"pname(${1:name})",isSnippet:!0},{label:`qname`,kind:`function`,detail:`Query Name`,documentation:`Match DNS query name`,insertText:"qname(${1:domain})",isSnippet:!0},{label:`domain`,kind:`function`,detail:`Domain`,documentation:`Match domain (suffix match)`,insertText:"domain(${1:domain})",isSnippet:!0},{label:`ip`,kind:`function`,detail:`IP`,documentation:`Match IP address`,insertText:"ip(${1:ip})",isSnippet:!0},{label:`source`,kind:`function`,detail:`Source`,documentation:`Match source address`,insertText:"source(${1:source})",isSnippet:!0},{label:`port`,kind:`function`,detail:`Port`,documentation:`Match port`,insertText:"port(${1:port})",isSnippet:!0},{label:`sourcePort`,kind:`function`,detail:`Source Port`,documentation:`Match source port`,insertText:"sourcePort(${1:port})",isSnippet:!0},{label:`inboundTag`,kind:`function`,detail:`Inbound Tag`,documentation:`Match inbound tag`,insertText:"inboundTag(${1:tag})",isSnippet:!0},{label:`network`,kind:`function`,detail:`Network`,documentation:`Match network type`,insertText:"network(${1:network})",isSnippet:!0},{label:`protocol`,kind:`function`,detail:`Protocol`,documentation:`Match protocol`,insertText:"protocol(${1:protocol})",isSnippet:!0},{label:`user`,kind:`function`,detail:`User`,documentation:`Match user`,insertText:"user(${1:user})",isSnippet:!0},{label:`full`,kind:`type`,detail:`Full Match`,documentation:`Full domain match`,insertText:"full:${1:domain}",isSnippet:!0},{label:`contains`,kind:`type`,detail:`Contains`,documentation:`Domain contains keyword`,insertText:"contains:${1:keyword}",isSnippet:!0},{label:`regexp`,kind:`type`,detail:`Regular Expression`,documentation:`Match using regular expression`,insertText:"regexp:${1:pattern}",isSnippet:!0},{label:`geosite`,kind:`type`,detail:`Geosite`,documentation:`Match using geosite database`,insertText:"geosite:${1:tag}",isSnippet:!0},{label:`geoip`,kind:`type`,detail:`Geoip`,documentation:`Match using geoip database`,insertText:"geoip:${1:tag}",isSnippet:!0},{label:`ext`,kind:`type`,detail:`External File`,documentation:`Match using external file`,insertText:'ext:"${1:file.dat}:${2:tag}"',isSnippet:!0},{label:`proxy`,kind:`constant`,detail:`Proxy`,documentation:`Use proxy outbound`,insertText:`proxy`},{label:`block`,kind:`constant`,detail:`Block`,documentation:`Block the connection`,insertText:`block`},{label:`direct`,kind:`constant`,detail:`Direct`,documentation:`Direct connection`,insertText:`direct`},{label:`must_direct`,kind:`constant`,detail:`Must Direct`,documentation:`Force direct connection`,insertText:`must_direct`},{label:`must_proxy`,kind:`constant`,detail:`Must Proxy`,documentation:`Force proxy connection`,insertText:`must_proxy`},{label:`routing`,kind:`keyword`,detail:`Routing Block`,documentation:`Define routing rules block`,insertText:`routing {
	\${0}
}`,isSnippet:!0},{label:`fallback`,kind:`keyword`,detail:`Fallback`,documentation:`Fallback outbound`,insertText:"fallback: ${1:outbound}",isSnippet:!0},{label:`must_rules`,kind:`keyword`,detail:`Must Rules`,documentation:`Mandatory rules that cannot be overridden`,insertText:`must_rules`},{label:`request`,kind:`keyword`,detail:`Request`,documentation:`Request routing rules`,insertText:`request`},{label:`response`,kind:`keyword`,detail:`Response`,documentation:`Response routing rules`,insertText:`response`},{label:`upstream`,kind:`keyword`,detail:`Upstream`,documentation:`Upstream server`,insertText:`upstream`},{label:`tcp`,kind:`keyword`,detail:`TCP`,documentation:`TCP protocol`,insertText:`tcp`},{label:`udp`,kind:`keyword`,detail:`UDP`,documentation:`UDP protocol`,insertText:`udp`},{label:`rule-domain`,kind:`snippet`,detail:`Domain Rule`,documentation:`Create a domain matching rule`,insertText:"domain(${1:domain}) -> ${2|proxy,direct,block|}",isSnippet:!0},{label:`rule-ip`,kind:`snippet`,detail:`IP Rule`,documentation:`Create an IP matching rule`,insertText:"dip(${1:ip}) -> ${2|proxy,direct,block|}",isSnippet:!0},{label:`rule-geosite`,kind:`snippet`,detail:`Geosite Rule`,documentation:`Create a geosite matching rule`,insertText:"domain(geosite:${1:cn}) -> ${2|direct,proxy,block|}",isSnippet:!0},{label:`rule-geoip`,kind:`snippet`,detail:`Geoip Rule`,documentation:`Create a geoip matching rule`,insertText:"dip(geoip:${1:cn}) -> ${2|direct,proxy,block|}",isSnippet:!0},{label:`rule-process`,kind:`snippet`,detail:`Process Rule`,documentation:`Create a process matching rule`,insertText:"pname(${1:process}) -> ${2|proxy,direct,block|}",isSnippet:!0},{label:`rule-port`,kind:`snippet`,detail:`Port Rule`,documentation:`Create a port matching rule`,insertText:"dport(${1:port}) -> ${2|proxy,direct,block|}",isSnippet:!0}],fn={auto_config_kernel_parameter:{values:[`true`,`false`],type:`boolean`},auto_config_firewall_rule:{values:[`true`,`false`],type:`boolean`},tproxy_port_protect:{values:[`true`,`false`],type:`boolean`},disable_waiting_network:{values:[`true`,`false`],type:`boolean`},enable_local_tcp_fast_redirect:{values:[`true`,`false`],type:`boolean`},allow_insecure:{values:[`true`,`false`],type:`boolean`},tls_fragment:{values:[`true`,`false`],type:`boolean`},mptcp:{values:[`true`,`false`],type:`boolean`},log_level:{values:[`info`,`warn`,`error`,`debug`,`trace`],type:`enum`},dial_mode:{values:[`domain`,`ip`,`domain+`,`domain++`],type:`enum`},tls_implementation:{values:[`tls`,`utls`],type:`enum`},tcp_check_http_method:{values:[`HEAD`,`GET`],type:`enum`},ipversion_prefer:{values:[`4`,`6`],type:`enum`},utls_imitate:{values:`chrome_auto.firefox_auto.safari_auto.edge_auto.ios_auto.randomized.chrome_58.chrome_62.chrome_70.chrome_72.chrome_83.chrome_87.chrome_96.chrome_100.chrome_102.firefox_55.firefox_56.firefox_63.firefox_65.firefox_99.firefox_102.firefox_105.safari_16_0.edge_85.edge_106.ios_11_1.ios_12_1.ios_13.ios_14.android_11_okhttp.360_auto.360_7_5.360_11_0.qq_auto.qq_11_1.randomizedalpn.randomizednoalpn`.split(`.`),type:`enum`},check_interval:{values:[`15s`,`30s`,`45s`,`1m`,`2m`],type:`duration`},check_tolerance:{values:[`50ms`,`100ms`,`150ms`,`200ms`],type:`duration`},sniffing_timeout:{values:[`100ms`,`200ms`,`300ms`,`500ms`],type:`duration`}},pn=[{label:`qname`,kind:`function`,detail:`Query Name`,documentation:`Match DNS query name. Used in DNS routing section.

Example: \`qname(geosite:cn) -> alidns\``,insertText:"qname(${1:domain})",isSnippet:!0},{label:`qtype`,kind:`function`,detail:`Query Type`,documentation:`Match DNS query type.

Example: \`qtype(aaaa) -> reject\``,insertText:"qtype(${1|a,aaaa,cname,mx,txt|})",isSnippet:!0},{label:`fallback`,kind:`keyword`,detail:`Fallback Upstream`,documentation:`Default DNS upstream when no other rules match.

Example: \`fallback: googledns\``,insertText:"fallback: ${1:upstream}",isSnippet:!0},{label:`upstream`,kind:`function`,detail:`Upstream`,documentation:`Match specific upstream.

Example: \`upstream(alidns)\``,insertText:"upstream(${1:name})",isSnippet:!0},{label:`request`,kind:`keyword`,detail:`Request Section`,documentation:`DNS request routing rules section`,insertText:`request {
	\${0}
}`,isSnippet:!0},{label:`response`,kind:`keyword`,detail:`Response Section`,documentation:`DNS response routing rules section`,insertText:`response {
	\${0}
}`,isSnippet:!0}],mn={global:"**Global Section**\n\nGlobal configuration options for dae.\n\nContains settings like:\n- **Software options**: `tproxy_port`, `log_level`, `pprof_port`, `so_mark_from_dae`\n- **Interface options**: `lan_interface`, `wan_interface`, `auto_config_kernel_parameter`, `auto_config_firewall_rule`\n- **Node connectivity check**: `tcp_check_url`, `tcp_check_http_method`, `udp_check_dns`, `check_interval`, `check_tolerance`\n- **Connecting options**: `dial_mode`, `allow_insecure`, `sniffing_timeout`\n- **TLS options**: `tls_implementation`, `utls_imitate`, `tls_fragment`, `tls_fragment_length`, `tls_fragment_interval`\n- **Advanced options**: `mptcp`, `bandwidth_max_tx`, `bandwidth_max_rx`, `fallback_resolver`",subscription:`**Subscription Section**

Subscriptions defined here will be resolved as nodes and merged as a part of the global node pool.
Support to give the subscription a tag, and filter nodes from a given subscription in the group section.

**URL Schemes:**
- \`https://\` - Standard HTTPS subscription
- \`http://\` - HTTP subscription
- \`file://\` - Local file (relative to /etc/dae/)
- \`https-file://\` - Persist subscription that saves to local file as fallback

Example:
\`\`\`dae
subscription {
  my_sub: 'https://example.com/sub'
  persist_sub: 'https-file://example.com/sub'
  'file://relative/path/to/mysub.sub'
}
\`\`\``,node:`**Node Section**

Nodes defined here will be merged as a part of the global node pool.

**Supported protocols:** socks5, http, https, ss, ssr, vmess, vless, trojan, tuic, juicity, hysteria2, hysteria

Full support list: https://github.com/daeuniverse/dae/blob/main/docs/en/proxy-protocols.md

Example:
\`\`\`dae
node {
  'socks5://localhost:1080'
  mynode: 'ss://...'
  node1: 'vmess://...'
  chains: 'tuic://... -> vmess://...'  # Node chaining
  hysteria2: 'hysteria2://password@server:port/?sni=domain'
}
\`\`\``,dns:"**DNS Section**\n\nConfigure DNS resolution and routing.\n\nSee: https://github.com/daeuniverse/dae/blob/main/docs/en/configuration/dns.md\n\nContains:\n- `ipversion_prefer`: Prefer IPv4 (4) or IPv6 (6) responses\n- `fixed_domain_ttl`: Set fixed TTL for specific domains\n- `bind`: Local DNS listening address\n- `upstream`: Define DNS upstreams (tcp/udp/tcp+udp/h3/http3/quic/https/tls)\n- `routing`: DNS routing rules with `request` and `response` sections",group:"**Group Section (Outbound)**\n\nDefine proxy groups for load balancing.\n\n**Options:**\n- `filter`: Filter nodes by subscription tag (`subtag`) or name pattern (`name`)\n- `policy`: Load balancing policy\n- Can override global check settings: `tcp_check_url`, `tcp_check_http_method`, `udp_check_dns`, `check_interval`, `check_tolerance`\n\n**Policy options:**\n- `random`: Randomly select a node\n- `fixed(n)`: Select node at index n\n- `min`: Select node with minimum last latency\n- `min_moving_avg`: Select node with minimum moving average latency\n- `min_avg10`: Select node with minimum average of last 10 latencies",routing:"**Routing Section**\n\nDefine traffic routing rules.\n\nSee: https://github.com/daeuniverse/dae/blob/main/docs/en/configuration/routing.md\n\n**Format:** `condition -> outbound`\n\n**Built-in outbounds:**\n- `direct`: Connect directly without proxy\n- `proxy`: Use default proxy group\n- `block`: Block the connection\n- `must_direct`: Force direct (cannot be overridden)\n- `must_proxy`: Force proxy (cannot be overridden)\n\n**Common conditions:** `domain()`, `dip()`, `dport()`, `l4proto()`, `pname()`, etc."},hn={tproxy_port:`TProxy port to listen on. It is NOT a HTTP/SOCKS port, and is just used by eBPF program.
In normal case, you do not need to use it.

Default: \`12345\``,tproxy_port_protect:`Set it true to protect tproxy port from unsolicited traffic.
Set it false to allow users to use self-managed iptables tproxy rules.

Default: \`true\``,pprof_port:`Set non-zero value to enable pprof for debugging.

Default: \`0\``,so_mark_from_dae:`If not zero, traffic sent from dae will be set SO_MARK.
It is useful to avoid traffic loop with iptables tproxy rules.

Default: \`0\``,log_level:"Log level for dae.\n\n**Values:** `error`, `warn`, `info`, `debug`, `trace`\n\nDefault: `info`",disable_waiting_network:`Disable waiting for network before pulling subscriptions.

Default: \`false\``,enable_local_tcp_fast_redirect:`Enable fast redirect for local TCP connections.

 There is a known kernel issue that breaks certain clients/proxies, such as nadoo/glider.
Users may enable this experimental option at their own risks.

Default: \`false\``,lan_interface:'The LAN interface to bind. Use it if you want to proxy LAN.\nMultiple interfaces split by ",".\n\nExample: `docker0` or `br-lan,docker0`',wan_interface:`The WAN interface to bind. Use it if you want to proxy localhost.
Multiple interfaces split by ",". Use "auto" to auto detect.

Default: \`auto\``,auto_config_kernel_parameter:"Automatically configure Linux kernel parameters like `ip_forward` and `send_redirects`.\n\nSee: https://github.com/daeuniverse/dae/blob/main/docs/en/user-guide/kernel-parameters.md\n\nDefault: `true`",auto_config_firewall_rule:`Automatically configure firewall rules.

Default: \`true\``,tcp_check_url:`URL for TCP health check. Host of URL should have both IPv4 and IPv6 if you have double stack in local.

Format: \`URL,IPv4,IPv6\` (IP addresses are optional hints)

Considering traffic consumption, it is recommended to choose a site with anycast IP and less response.

Example: \`http://cp.cloudflare.com,1.1.1.1,2606:4700:4700::1111\``,tcp_check_http_method:"The HTTP request method to `tcp_check_url`.\n\n**Values:** `HEAD`, `GET`\n\nUse 'HEAD' by default because some server implementations bypass accounting for this kind of traffic.\n\nDefault: `HEAD`",udp_check_dns:`DNS server for UDP health check. This DNS will be used to check UDP connectivity of nodes.
And if dns_upstream below contains tcp, it also be used to check TCP DNS connectivity of nodes.

Format: \`host:port,IPv4,IPv6\`

This DNS should have both IPv4 and IPv6 if you have double stack in local.

Example: \`dns.google:53,8.8.8.8,2001:4860:4860::8888\``,check_interval:"Interval between health checks.\n\n**Format:** Go duration (e.g., `30s`, `1m`, `500ms`)\n\nDefault: `30s`",check_tolerance:"Group will switch node only when `new_latency <= old_latency - tolerance`.\n\n**Format:** Go duration (e.g., `50ms`, `100ms`)\n\nDefault: `50ms`",dial_mode:"Dialing mode for proxy connections.\n\n**Values:**\n- `ip`: Dial proxy using the IP from DNS directly. This allows your IPv4/IPv6 to choose the optimal path respectively. Sniffing will be disabled.\n- `domain`: Dial proxy using the domain from sniffing. This will relieve DNS pollution problem. Generally brings faster proxy response time because proxy will re-resolve the domain in remote.\n- `domain+`: Based on domain mode but do not check the reality of sniffed domain. Useful for users whose DNS requests do not go through dae.\n- `domain++`: Based on domain+ mode but force to re-route traffic using sniffed domain to partially recover domain based traffic split ability.\n\nDefault: `domain`",allow_insecure:`Allow insecure TLS certificates.

 It is not recommended to turn it on unless you have to.

Default: \`false\``,sniffing_timeout:"Timeout to waiting for first data sending for sniffing.\nIt is always 0 if dial_mode is ip. Set it higher is useful in high latency LAN network.\n\n**Format:** Go duration (e.g., `100ms`, `200ms`)\n\nDefault: `100ms`",tls_implementation:`TLS implementation to use.

**Values:**
- \`tls\`: Use Go's crypto/tls
- \`utls\`: Use uTLS, which can imitate browser's Client Hello

Default: \`tls\``,utls_imitate:"The Client Hello ID for uTLS to imitate. This takes effect only if tls_implementation is utls.\n\n**Values:**\n- `randomized`, `randomizedalpn`, `randomizednoalpn`\n- `chrome_auto`, `chrome_58`, `chrome_62`, `chrome_70`, `chrome_72`, `chrome_83`, `chrome_87`, `chrome_96`, `chrome_100`, `chrome_102`\n- `firefox_auto`, `firefox_55`, `firefox_56`, `firefox_63`, `firefox_65`, `firefox_99`, `firefox_102`, `firefox_105`\n- `safari_auto`, `safari_16_0`\n- `edge_auto`, `edge_85`, `edge_106`\n- `ios_auto`, `ios_11_1`, `ios_12_1`, `ios_13`, `ios_14`\n- `android_11_okhttp`\n- `360_auto`, `360_7_5`, `360_11_0`\n- `qq_auto`, `qq_11_1`\n\nDefault: `chrome_auto`",tls_fragment:`TLS fragmentation support. If is true, dae will send Client Hello in fragments to bypass SNI blocking.

Default: \`false\``,tls_fragment_length:"TLS fragment packet length range, in bytes.\nThe length of each fragment is randomly generated from this range.\n\nFormat: `min-max` (e.g., `50-100`)\n\nDefault: `50-100`",tls_fragment_interval:"TLS fragment packet interval, in milliseconds.\nEach fragment interval is randomly generated from this range.\n\nFormat: `min-max` (e.g., `10-20`)\n\nDefault: `10-20`",mptcp:`Multipath TCP (MPTCP) support. If is true, dae will try to use MPTCP to connect all nodes,
but it will only take effects when the node supports MPTCP.
It can use for load balance and failover to multiple interfaces and IPs.

Default: \`false\``,bandwidth_max_tx:"Maximum upload bandwidth. Useful for some specific protocols (e.g., Hysteria2),\nwhich will perform better with bandwidth information provided.\n\n**Units:** `b`, `kb`, `mb`, `gb`, `tb`, `mbps`, `gbps` or bytes per second\n\nFormats: https://v2.hysteria.network/docs/advanced/Full-Client-Config/#bandwidth\n\nExample: `200 mbps` or `200 m` or `200 mb` or `25000000`",bandwidth_max_rx:"Maximum download bandwidth. Useful for some specific protocols (e.g., Hysteria2),\nwhich will perform better with bandwidth information provided.\n\n**Units:** `b`, `kb`, `mb`, `gb`, `tb`, `mbps`, `gbps` or bytes per second\n\nExample: `1 gbps` or `1 g` or `1 gb` or `125000000`",fallback_resolver:"Fallback DNS resolver used when DNS resolution using resolv.conf fails.\nThis ensures DNS resolution continues to work even when the system's default DNS servers are unavailable.\n\n**Format:**\n- IPv4: `ipv4:port` (e.g., `8.8.8.8:53`)\n- IPv6: `[ipv6]:port` (e.g., `[2001:4860:4860::8888]:53`)\n\nDefault: `8.8.8.8:53`",ipversion_prefer:"Prefer IPv4 or IPv6 responses. If set to 4 and the domain has both A and AAAA records,\ndae will only respond to type A queries and response empty answer to type AAAA queries.\n\n**Values:** `4` or `6`",bind:"Bind to local address to listen for DNS queries.\n\n**Format:** `[scheme://]host:port`\n\n**Schemes:** `tcp`, `udp`, `tcp+udp` (default)\n\nExample: `127.0.0.1:5353` or `tcp+udp://127.0.0.1:5353`",filter:`Filter nodes in group from the global node pool.

**Functions:**
- \`subtag(tag)\`: Filter by subscription tag
- \`name(keyword: 'pattern')\`: Filter by name with keyword match
- \`name(regex: 'pattern')\`: Filter by name with regex match

**Modifiers:**
- \`[add_latency: -500ms]\`: Add latency offset for failover

Multiple filters indicate 'or' logic.`,policy:"Load balancing policy for the group.\n\n**Values:**\n- `random`: Randomly select a node for every connection\n- `fixed(n)`: Select the node at index n\n- `min`: Select node with minimum last latency\n- `min_moving_avg`: Select node with minimum moving average latency\n- `min_avg10`: Select node with minimum average of last 10 latencies"},gn={domain:"Match by domain (suffix match).\n\n**Prefixes:**\n- `geosite:tag` - Match using geosite database\n- `full:domain` - Full domain match (exact)\n- `keyword:word` - Domain contains keyword\n- `regexp:pattern` - Match using regular expression\n\nExample: `domain(example.com)` or `domain(geosite:cn)`",dip:"Match by destination IP address.\n\n**Prefixes:**\n- `geoip:tag` - Match using geoip database\n\nExample: `dip(geoip:cn)` or `dip(192.168.0.0/16)` or `dip(224.0.0.0/3)`",dport:"Match by destination port.\n\nSupports single port, port range, or multiple ports.\n\nExample: `dport(443)` or `dport(80-443)` or `dport(80, 443, 8080)`",sip:`Match by source IP address.

Example: \`sip(192.168.1.0/24)\``,sport:`Match by source port.

Example: \`sport(12345)\``,pname:`Match by process name.

Useful for routing traffic from specific applications.

Example: \`pname(chrome)\` or \`pname(NetworkManager)\``,qname:`Match DNS query name.

Used in DNS routing section.

**Prefixes:** Same as domain()

Example: \`qname(geosite:cn)\``,qtype:"Match DNS query type.\n\nExample: `qtype(A)` or `qtype(AAAA)`",l4proto:"Match Layer 4 protocol.\n\n**Values:** `tcp`, `udp`\n\nExample: `l4proto(tcp)` or `l4proto(udp)`",ipversion:"Match IP version.\n\n**Values:** `4`, `6`\n\nExample: `ipversion(4)` or `ipversion(6)`",mac:`Match by MAC address.

Useful for routing traffic from specific devices on LAN.

Example: \`mac(00:00:00:00:00:00)\``,subtag:`Filter nodes by subscription tag.

Used in group filter to select nodes from specific subscriptions.

**Prefixes:**
- \`regex:'pattern'\` - Match tag with regex

Example: \`subtag(my_sub)\` or \`subtag(regex: '^my_', another_sub)\``,name:"Filter nodes by name pattern.\n\nUsed in group filter.\n\n**Prefixes:**\n- `keyword: 'pattern'` - Name contains keyword\n- `regex: 'pattern'` - Match using regex\n\nExample: `name(keyword: 'HK')` or `name(regex: 'US.*')` or `name(node1, node2)`",dscp:`Match by DSCP (Differentiated Services Code Point) value.

Example: \`dscp(0x04)\``,upstream:`Match by DNS upstream (used in DNS response routing).

Example: \`upstream(googledns) -> accept\``,ip:`Match by IP address (used in DNS response routing).

Example: \`ip(geoip:private)\``,must:`Wrap a condition to make it mandatory (cannot be overridden).

Example: \`must(domain(example.com) -> direct)\``,tag:`Match by node tag.

Example: \`tag(my_tag)\``},_n={direct:`Connect directly without proxy.

Traffic will bypass all proxies and connect to the destination directly.`,proxy:`Use proxy (default group).

Traffic will be sent through the configured proxy group.`,block:`Block the connection.

The connection will be rejected/dropped.`,must_direct:`Force direct connection (cannot be overridden).

This cannot be overridden by subsequent routing rules.`,must_proxy:`Force proxy connection (cannot be overridden).

This cannot be overridden by subsequent routing rules.`,accept:`Accept the DNS response (used in DNS routing).

Used in DNS response routing to accept the current DNS response.`},vn={geosite:`Match using geosite database`,geoip:`Match using geoip database`,full:`Full domain match (exact)`,contains:`Domain contains keyword`,keyword:`Match by keyword`,regexp:`Match using regular expression`,regex:`Match using regular expression`,ext:`Match using external data file`};function yn(e,t){let{tabSize:n=2,insertSpaces:r=!0}=t,i=r?` `.repeat(n):`	`,a=e.split(`
`).map(e=>bn(e)),o=0,s=[];for(let e of a){if(e.isBlank){let e=s[s.length-1];if(e===``||e===void 0)continue;s.push(``);continue}e.isBlockEnd&&!e.isBlockStart&&(o=Math.max(0,o-1));let t=i.repeat(o),n=Sn(e.content),r=e.comment?n?` ${e.comment}`:e.comment:``;s.push(`${t}${n}${r}`),e.isBlockStart&&!e.isBlockEnd&&o++}for(;s.length>0&&s[s.length-1]===``;)s.pop();return`${s.join(`
`)}\n`}function bn(e){let t=e.trim();if(t===``)return{content:``,comment:``,isBlank:!0,isBlockStart:!1,isBlockEnd:!1};let n=t,r=``,i=xn(t);i!==-1&&(n=t.slice(0,i).trim(),r=t.slice(i).trim());let a=n.includes(`{`),o=n.includes(`}`);return{content:n,comment:r,isBlank:!1,isBlockStart:a,isBlockEnd:o}}function xn(e){let t=!1,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if((r>0?e[r-1]:``)!==`\\`){if(i===`'`&&!n)t=!t;else if(i===`"`&&!t)n=!n;else if(i===`#`&&!t&&!n)return r}}return-1}function Sn(e){if(!e)return``;let t=e;return t=t.replace(/\s*->\s*/g,` -> `),t=t.replace(/\s*&&\s*/g,` && `),t=t.replace(/!\s+/g,`!`),t=t.replace(/\s*,\s*/g,`, `),t=t.replace(/(\w+):\s+(\w+)/g,(e,t,n)=>[`geosite`,`geoip`,`full`,`contains`,`regexp`,`ext`,`keyword`,`regex`].includes(t.toLowerCase())?`${t}:${n}`:`${t}: ${n}`),t=t.replace(/\(\s+/g,`(`),t=t.replace(/\s+\)/g,`)`),t=t.replace(/\{\s+/g,`{ `),t=t.replace(/\s+\}/g,` }`),t=t.replace(/\s{2,}/g,` `),t=t.trim(),t}let Cn=[`global`,`subscription`,`node`,`dns`,`group`,`routing`],wn=[`upstream`,`routing`,`request`,`response`,`fixed_domain_ttl`],Tn=[`domain`,`ip`,`source`,`port`,`sourcePort`,`inboundTag`,`network`,`protocol`,`user`,`dip`,`dport`,`sip`,`sport`,`ipversion`,`l4proto`,`mac`,`pname`,`qname`,`qtype`,`upstream`,`subtag`,`name`,`tag`,`dscp`,`must`],En=[`proxy`,`direct`,`block`,`must_direct`,`must_proxy`,`accept`];function Dn(e){let t=e.split(`
`),n=[],r=[],i=[],a=[],o=null,s=!1;for(let e=0;e<t.length;e++){let i=t[e],c=i.trim();if(c===``||c.startsWith(`#`))continue;let l=An(c),u=l===-1?c:c.slice(0,l).trim();if(!u)continue;let d=u.match(/^(\w[\w-]*)(\s*\{)?$/);if(d){let t=d[1],r=!!d[2],c=i.indexOf(t),l={name:t,kind:kn(t,a),range:{start:{line:e,character:0},end:{line:e,character:i.length}},nameRange:{start:{line:e,character:c},end:{line:e,character:c+t.length}},children:[]};Cn.includes(t)&&a.length===0&&(o=t),t===`upstream`&&(s=!0),r&&a.push(l),a.length>1?a[a.length-2].children?.push(l):r&&n.push(l);continue}let f=u.match(/^fallback:\s*(\w+)$/);if(f){let t=f[1],n=i.lastIndexOf(t);if(!En.includes(t)){let i=o===`dns`||s?`upstream`:`group`;r.push({name:t,kind:i,range:{start:{line:e,character:n},end:{line:e,character:n+t.length}}})}continue}let p=u.indexOf(`:`);if(p!==-1&&a.length>0){let t=u.substring(0,p).match(/^(\w[\w-]*)$/);if(t){let n=t[1],s=u.substring(p+1).trim(),c=i.indexOf(n),l=a[a.length-1],d=`parameter`;if(l.name===`subscription`?d=`subscription`:l.name===`node`?d=`node`:l.name===`upstream`&&(d=`upstream`),d!==`parameter`){let t={name:n,kind:d,range:{start:{line:e,character:0},end:{line:e,character:i.length}},nameRange:{start:{line:e,character:c},end:{line:e,character:c+n.length}}};l.children?.push(t)}On(s,e,i.indexOf(s),r,o);continue}}let m=u.indexOf(`->`);if(m!==-1){let t=u.substring(0,m).trimEnd(),n=u.substring(m+2).trim().match(/^(\w+)$/);if(t&&n){let a=t,c=n[1],l=i.lastIndexOf(c);if(!En.includes(c)){let t=o===`dns`||s?`upstream`:`group`;r.push({name:c,kind:t,range:{start:{line:e,character:l},end:{line:e,character:l+c.length}}})}On(a,e,i.indexOf(a),r,o);continue}}if(u===`}`){if(a.length>0){let t=a.pop();t.range.end={line:e,character:i.length},Cn.includes(t.name)&&a.length===0&&(o=null)}continue}u.startsWith(`'`)||u.startsWith(`"`)}let c=jn(n);for(let e of r)if(!c.get(e.name)){if(En.includes(e.name)||e.kind===`group`)continue;i.push({message:`Undefined ${e.kind}: '${e.name}'`,range:e.range,severity:`warning`})}return{symbols:n,references:r,diagnostics:i}}function On(e,t,n,r,i){let a=/subtag\(([^)]+)\)/g,o=a.exec(e);for(;o!==null;){let i=o[1].split(`,`).map(e=>e.trim());for(let a of i){let i=a.replace(/^['"]|['"]$/g,``).replace(/^regex:\s*/,``).replace(/^\^/,``);if(i&&!i.includes(`:`)){let s=e.indexOf(a,o.index);r.push({name:i,kind:`subscription`,range:{start:{line:t,character:n+s},end:{line:t,character:n+s+a.length}}})}}o=a.exec(e)}let s=/\bname\(([^)]+)\)/g;for(o=s.exec(e);o!==null;){let i=o[1].split(`,`).map(e=>e.trim());for(let a of i){if(a.includes(`:`))continue;let i=a.replace(/^['"]|['"]$/g,``);if(i){let s=e.indexOf(a,o.index);r.push({name:i,kind:`node`,range:{start:{line:t,character:n+s},end:{line:t,character:n+s+a.length}}})}}o=s.exec(e)}if(i===`dns`){let i=/->\s*(\w+)/g;for(o=i.exec(e);o!==null;){let a=o[1];if(!En.includes(a)){let i=e.indexOf(a,o.index);r.push({name:a,kind:`upstream`,range:{start:{line:t,character:n+i},end:{line:t,character:n+i+a.length}}})}o=i.exec(e)}let a=/upstream\(([^)]+)\)/g;for(o=a.exec(e);o!==null;){let i=o[1].split(`,`).map(e=>e.trim());for(let a of i){let i=a.replace(/^['"]|['"]$/g,``);if(i&&!En.includes(i)){let s=e.indexOf(a,o.index);r.push({name:i,kind:`upstream`,range:{start:{line:t,character:n+s},end:{line:t,character:n+s+a.length}}})}}o=a.exec(e)}}}function kn(e,t){if(Cn.includes(e))return`section`;if(t.length>0){if(t[t.length-1].name===`group`)return`group`;if(wn.includes(e))return`section`}return`group`}function An(e){let t=!1,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if((r>0?e[r-1]:``)!==`\\`){if(i===`'`&&!n)t=!t;else if(i===`"`&&!t)n=!n;else if(i===`#`&&!t&&!n)return r}}return-1}function jn(e){let t=new Map;function n(e){for(let r of e)r.kind!==`section`&&r.kind!==`parameter`&&t.set(r.name,r),r.children&&n(r.children)}return n(e),t}function Mn(e,t){function n(e){for(let r of e){if(In(t,r.nameRange))return r;if(r.children){let e=n(r.children);if(e)return e}}}return n(e)}function Nn(e,t){for(let n of e)if(In(t,n.range))return n}function Pn(e,t,n){function r(e){for(let i of e){if(i.name===t&&(!n||i.kind===n))return i;if(i.children){let e=r(i.children);if(e)return e}}}return r(e)}function Fn(e,t,n){return e.filter(e=>e.name===t&&(!n||e.kind===n))}function In(e,t){return!(e.line<t.start.line||e.line>t.end.line||e.line===t.start.line&&e.character<t.start.character||e.line===t.end.line&&e.character>t.end.character)}function Ln(e,t){let n=e.split(`
`),r=null,i=null,a=!1,o=0,s=[];for(let e=0;e<=t.line&&e<n.length;e++){let t=n[e],c=t.trim();if(c.startsWith(`#`)||c===``)continue;let l=(t.match(/\{/g)||[]).length,u=(t.match(/\}/g)||[]).length,d=c.match(/^(\w+)\s*\{/);if(d){let e=d[1];Cn.includes(e)&&o===0?(r=e,s.push(e)):wn.includes(e)?(i=e,s.push(e),e===`upstream`&&(a=!0)):s.push(e)}if(o+=l-u,u>0)for(let e=0;e<u&&s.length>0;e++){let e=s.pop();e&&wn.includes(e)&&(i=null),e&&Cn.includes(e)&&o===0&&(r=null)}}return{section:r,subsection:i,isDnsContext:r===`dns`||a,isRoutingContext:r===`routing`||i===`routing`||i===`request`||i===`response`,symbolPath:s}}let Rn=[`namespace`,`type`,`class`,`enum`,`function`,`variable`,`keyword`,`comment`,`string`,`number`,`operator`],zn={tokenTypes:Rn,tokenModifiers:[`declaration`,`definition`,`readonly`,`static`]},Bn=new Map;function Vn(e){let t=Bn.get(e.uri);if(t&&t.version===e.version)return t.result;let n=Dn(e.getText());return Bn.set(e.uri,{version:e.version,result:n}),n}function Hn(e){return $.Range.create($.Position.create(e.start.line,e.start.character),$.Position.create(e.end.line,e.end.character))}function Un(e){switch(e){case`keyword`:return $.CompletionItemKind.Keyword;case`function`:return $.CompletionItemKind.Function;case`constant`:return $.CompletionItemKind.Constant;case`type`:return $.CompletionItemKind.TypeParameter;case`variable`:return $.CompletionItemKind.Variable;case`snippet`:return $.CompletionItemKind.Snippet;case`property`:return $.CompletionItemKind.Property;default:return $.CompletionItemKind.Text}}function Wn(e,t){let n=[];function r(e){for(let i of e)t.includes(i.kind)&&n.push(i),i.children&&r(i.children)}return r(e),n}function Gn(e,t){let n=Vn(t),r=[];for(let e of n.diagnostics){let t=e.severity===`error`?$.DiagnosticSeverity.Error:e.severity===`warning`?$.DiagnosticSeverity.Warning:$.DiagnosticSeverity.Information;r.push({range:Hn(e.range),message:e.message,severity:t,source:`dae`})}e.sendDiagnostics({uri:t.uri,diagnostics:r})}function Kn(e,t){e.onInitialize(e=>({capabilities:{textDocumentSync:$.TextDocumentSyncKind.Incremental,completionProvider:{resolveProvider:!0,triggerCharacters:[`.`,`:`,`(`,`,`,` `]},hoverProvider:!0,definitionProvider:!0,referencesProvider:!0,renameProvider:{prepareProvider:!0},documentFormattingProvider:!0,semanticTokensProvider:{legend:zn,full:!0}}})),e.onInitialized(()=>{e.console.log(`DAE Language Server initialized`)}),e.onCompletion(e=>{let n=t.get(e.textDocument.uri);if(!n)return dn.map(e=>({label:e.label,kind:Un(e.kind),detail:e.detail,documentation:{kind:$.MarkupKind.Markdown,value:e.documentation||``},insertText:e.insertText,insertTextFormat:e.isSnippet?$.InsertTextFormat.Snippet:$.InsertTextFormat.PlainText}));let r=n.getText(),i=(r.split(`
`)[e.position.line]||``).substring(0,e.position.character),a=Vn(n),o=i.match(/(?:filter\s*:\s*)?\b(name|subtag)\s*\(\s*(['"]?)(\w*)$/);if(o){o[2];let e=o[3].toLowerCase();return Wn(a.symbols,[`node`,`subscription`]).filter(t=>t.name.toLowerCase().includes(e)).map((e,t)=>({label:e.name,kind:e.kind===`node`?$.CompletionItemKind.Variable:$.CompletionItemKind.Module,detail:e.kind,documentation:{kind:$.MarkupKind.Markdown,value:`**${e.kind}**: \`${e.name}\`\n\nDefined at line ${e.nameRange.start.line+1}`},sortText:String(t).padStart(2,`0`),insertText:e.name,insertTextFormat:$.InsertTextFormat.PlainText}))}let s=i.match(/^\s*(\w+)\s*:\s*$/);if(s){let e=s[1],t=fn[e];if(t)return t.values.map((n,r)=>({label:n,kind:t.type===`boolean`?$.CompletionItemKind.Value:$.CompletionItemKind.EnumMember,detail:`${e} value`,sortText:String(r).padStart(2,`0`),insertText:n,insertTextFormat:$.InsertTextFormat.PlainText}))}let c=i.match(/^\s*(\w+)\s*:\s*(\w+)$/);if(c){let e=c[1],t=c[2].toLowerCase(),n=fn[e];if(n)return n.values.filter(e=>e.toLowerCase().startsWith(t)).map((t,r)=>({label:t,kind:n.type===`boolean`?$.CompletionItemKind.Value:$.CompletionItemKind.EnumMember,detail:`${e} value`,sortText:String(r).padStart(2,`0`),insertText:t,insertTextFormat:$.InsertTextFormat.PlainText}))}let l=Ln(r,{line:e.position.line,character:e.position.character}),u=[...dn];l.isDnsContext&&(u=[...pn,...u]);let d=[];if(l.isDnsContext){let e=Wn(a.symbols,[`upstream`]);for(let t of e)d.push({label:t.name,kind:$.CompletionItemKind.Variable,detail:`DNS upstream`,documentation:{kind:$.MarkupKind.Markdown,value:`**DNS Upstream**: \`${t.name}\`\n\nDefined at line ${t.nameRange.start.line+1}`},insertText:t.name,insertTextFormat:$.InsertTextFormat.PlainText,sortText:`00${t.name}`})}if(l.isRoutingContext||l.section===`routing`){let e=Wn(a.symbols,[`group`]);for(let t of e)d.push({label:t.name,kind:$.CompletionItemKind.Variable,detail:`Proxy group`,documentation:{kind:$.MarkupKind.Markdown,value:`**Group**: \`${t.name}\`\n\nDefined at line ${t.nameRange.start.line+1}`},insertText:t.name,insertTextFormat:$.InsertTextFormat.PlainText,sortText:`00${t.name}`})}let f=u.map(e=>({label:e.label,kind:Un(e.kind),detail:e.detail,documentation:{kind:$.MarkupKind.Markdown,value:e.documentation||``},insertText:e.insertText,insertTextFormat:e.isSnippet?$.InsertTextFormat.Snippet:$.InsertTextFormat.PlainText}));return[...d,...f]}),e.onCompletionResolve(e=>e),e.onHover(e=>{let n=t.get(e.textDocument.uri);if(!n)return null;let r=Vn(n),i=e.position,a=n.getText().split(`
`)[i.line];if(!a)return null;let o=i.character,s=i.character;for(;o>0&&/[\w+\-]/.test(a[o-1]);)o--;for(;s<a.length&&/[\w+\-]/.test(a[s]);)s++;let c=a.substring(o,s);if(!c)return null;let l=$.Range.create(i.line,o,i.line,s),u=a.match(/^\s*(\w+)\s*:\s*(\S.*)$/);if(u){let e=u[1],t=a.indexOf(u[2]);if(i.character>=t){let t=fn[e];if(t&&t.values.includes(c)){let t=`Value \`${c}\` for **${e}**`;return{contents:{kind:$.MarkupKind.Markdown,value:hn[e]?`**${c}**\n\n${hn[e]}`:t},range:l}}}}if(mn[c])return{contents:{kind:$.MarkupKind.Markdown,value:mn[c]},range:l};if(hn[c])return{contents:{kind:$.MarkupKind.Markdown,value:`**${c}**\n\n${hn[c]}`},range:l};let d=a.substring(s).trim();if(Tn.includes(c)&&d.startsWith(`(`)){let e=gn[c]||`Rule function: ${c}`;return{contents:{kind:$.MarkupKind.Markdown,value:`**${c}()**\n\n${e}`},range:l}}if(_n[c])return{contents:{kind:$.MarkupKind.Markdown,value:`**${c}**\n\n${_n[c]}`},range:l};let f={line:i.line,character:i.character},p=Mn(r.symbols,f);if(p)return{contents:{kind:$.MarkupKind.Markdown,value:`**${p.kind}**: \`${p.name}\``},range:l};let m=Nn(r.references,f);if(m){let e=Pn(r.symbols,m.name);return e?{contents:{kind:$.MarkupKind.Markdown,value:`**${e.kind}**: \`${e.name}\`\n\nDefined at line ${e.nameRange.start.line+1}`},range:l}:{contents:{kind:$.MarkupKind.Markdown,value:`Reference to ${m.kind}: \`${m.name}\``},range:l}}let h=a.match(/(geosite|geoip|full|contains|keyword|regexp|regex|ext):(\w+)/);if(h){let e=h[1];if(c===e||c===h[2]){let t=vn[e]||``;return{contents:{kind:$.MarkupKind.Markdown,value:`**${e}:${h[2]}**\n\n${t}`},range:l}}}return null}),e.onDefinition(e=>{let n=t.get(e.textDocument.uri);if(!n)return null;let r=Vn(n),i={line:e.position.line,character:e.position.character},a=Nn(r.references,i);if(a){let t=Pn(r.symbols,a.name,{group:`group`,subscription:`subscription`,node:`node`,upstream:`upstream`}[a.kind]);if(t)return $.Location.create(e.textDocument.uri,Hn(t.nameRange))}let o=Mn(r.symbols,i);return o?$.Location.create(e.textDocument.uri,Hn(o.nameRange)):null}),e.onReferences(e=>{let n=t.get(e.textDocument.uri);if(!n)return null;let r=Vn(n),i={line:e.position.line,character:e.position.character},a=Mn(r.symbols,i);if(!a)return null;let o=Fn(r.references,a.name).map(t=>$.Location.create(e.textDocument.uri,Hn(t.range)));return e.context.includeDeclaration&&o.unshift($.Location.create(e.textDocument.uri,Hn(a.nameRange))),o.length>0?o:null}),e.onPrepareRename(e=>{let n=t.get(e.textDocument.uri);if(!n)return null;let r=Vn(n),i={line:e.position.line,character:e.position.character},a=Mn(r.symbols,i);return a?{range:Hn(a.nameRange),placeholder:a.name}:null}),e.onRenameRequest(e=>{let n=t.get(e.textDocument.uri);if(!n)return null;let r=Vn(n),i={line:e.position.line,character:e.position.character},a=Mn(r.symbols,i),o;if(a)o=a.name;else{let e=Nn(r.references,i);e&&(o=e.name,a=Pn(r.symbols,e.name,e.kind))}if(!o)return null;let s=[];a&&s.push($.TextEdit.replace(Hn(a.nameRange),e.newName));let c=Fn(r.references,o);for(let t of c)s.push($.TextEdit.replace(Hn(t.range),e.newName));return s.length===0?null:{changes:{[e.textDocument.uri]:s}}}),e.onDocumentFormatting(e=>{let n=t.get(e.textDocument.uri);if(!n)return null;let r=n.getText(),i=yn(r,{tabSize:e.options.tabSize,insertSpaces:e.options.insertSpaces});if(i===r)return null;let a=n.getText().length,o=$.Range.create($.Position.create(0,0),n.positionAt(a));return[$.TextEdit.replace(o,i)]}),e.languages.semanticTokens.on(e=>{let n=t.get(e.textDocument.uri);if(!n)return{data:[]};let r=new $.SemanticTokensBuilder,i=n.getText().split(`
`),a=[];for(let e=0;e<i.length;e++){let t=i[e];if(!t.trim())continue;if(t.trim().startsWith(`#`)){let n=t.indexOf(`#`);a.push({line:e,char:n,length:t.length-n,tokenType:Rn.indexOf(`comment`),tokenModifiers:0});continue}let n=t.match(/^(\s*)(global|subscription|node|dns|group|routing)\s*\{/);if(n){a.push({line:e,char:n[1].length,length:n[2].length,tokenType:Rn.indexOf(`namespace`),tokenModifiers:0});continue}let r=t.match(/^(\s*)(\w[\w-]*)\s*:/);r&&a.push({line:e,char:r[1].length,length:r[2].length,tokenType:Rn.indexOf(`variable`),tokenModifiers:1});let o=t.match(/^\s*(fallback)\s*:/);if(o){let n=t.indexOf(o[1]);a.push({line:e,char:n,length:o[1].length,tokenType:Rn.indexOf(`keyword`),tokenModifiers:0})}let s=t.match(/->\s*(direct|block|must_direct|must_rules|must_group|proxy|\w+)/);if(s){let n=t.lastIndexOf(s[1]),r=En.includes(s[1]);a.push({line:e,char:n,length:s[1].length,tokenType:Rn.indexOf(r?`keyword`:`variable`),tokenModifiers:0})}qn(t,e,a,Rn)}a.sort((e,t)=>e.line===t.line?e.char-t.char:e.line-t.line);for(let e of a)r.push(e.line,e.char,e.length,e.tokenType,e.tokenModifiers);return r.build()}),t.onDidChangeContent(t=>{Gn(e,t.document)}),t.onDidClose(t=>{Bn.delete(t.document.uri),e.sendDiagnostics({uri:t.document.uri,diagnostics:[]})}),t.listen(e),e.listen(),e.console.log(`DAE Language Server started`)}function qn(e,t,n,r){let i=e.indexOf(`->`);if(i===-1)return;let a=e.substring(0,i),o=/\b(domain|dip|dport|sip|sport|pname|qname|qtype|l4proto|ipversion|mac|dscp|upstream|ip|must|tag|name|subtag)\s*\(/g,s=o.exec(a);for(;s!==null;)n.push({line:t,char:0+s.index,length:s[1].length,tokenType:r.indexOf(`function`),tokenModifiers:0}),s=o.exec(a);let c=/(geosite|geoip|full|contains|keyword|regexp|regex|ext):/g;for(s=c.exec(a);s!==null;)n.push({line:t,char:0+s.index,length:s[1].length,tokenType:r.indexOf(`type`),tokenModifiers:0}),s=c.exec(a);let l=/&&/g;for(s=l.exec(a);s!==null;)n.push({line:t,char:0+s.index,length:2,tokenType:r.indexOf(`operator`),tokenModifiers:0}),s=l.exec(a);let u=/!/g;for(s=u.exec(a);s!==null;)n.push({line:t,char:0+s.index,length:1,tokenType:r.indexOf(`operator`),tokenModifiers:0}),s=u.exec(a)}var Jn=tn(),Yn=class{errorEmitter=new un.Emitter;closeEmitter=new un.Emitter;messageEmitter=new un.Emitter;partialMessageEmitter=new un.Emitter;onError=this.errorEmitter.event;onClose=this.closeEmitter.event;onPartialMessage=this.partialMessageEmitter.event;messageHandler=e=>{try{let t=e.data,n=typeof t==`string`?JSON.parse(t):t;this.messageEmitter.fire(n)}catch(e){console.error(`[DAE LSP Worker] Error handling message:`,e),this.errorEmitter.fire(e instanceof Error?e:Error(String(e)))}};constructor(){self.addEventListener(`message`,this.messageHandler)}listen(e){return this.messageEmitter.event(e)}dispose(){self.removeEventListener(`message`,this.messageHandler),this.errorEmitter.dispose(),this.closeEmitter.dispose(),this.messageEmitter.dispose(),this.partialMessageEmitter.dispose()}},Xn=class{errorEmitter=new un.Emitter;closeEmitter=new un.Emitter;onError=this.errorEmitter.event;onClose=this.closeEmitter.event;async write(e){try{self.postMessage(JSON.stringify(e))}catch(t){this.errorEmitter.fire([t instanceof Error?t:Error(String(t)),e,void 0])}}end(){this.closeEmitter.fire()}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}};Kn((0,un.createConnection)(new Yn,new Xn),new Jn.TextDocuments(rn))})();