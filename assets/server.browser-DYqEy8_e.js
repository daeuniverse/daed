(function(){"use strict";var Kt=Object.defineProperty,Ui=Object.getOwnPropertyDescriptor,Bi=Object.getOwnPropertyNames,fi=Object.prototype.hasOwnProperty,zi=(e,t)=>()=>(e&&(t=e(e=0)),t),N=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Vi=(e,t)=>{let o={};for(var i in e)Kt(o,i,{get:e[i],enumerable:!0});return o},xi=(e,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(var n=Bi(t),r=0,a=n.length,c;r<a;r++)c=n[r],!fi.call(e,c)&&c!==o&&Kt(e,c,{get:(s=>t[s]).bind(null,c),enumerable:!(i=Ui(t,c))||i.enumerable});return e},Gt=e=>fi.call(e,"module.exports")?e["module.exports"]:xi(Kt({},"__esModule",{value:!0}),e),lt=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringArray=e.array=e.func=e.error=e.number=e.string=e.boolean=void 0;function t(s){return s===!0||s===!1}e.boolean=t;function o(s){return typeof s=="string"||s instanceof String}e.string=o;function i(s){return typeof s=="number"||s instanceof Number}e.number=i;function n(s){return s instanceof Error}e.error=n;function r(s){return typeof s=="function"}e.func=r;function a(s){return Array.isArray(s)}e.array=a;function c(s){return a(s)&&s.every(u=>o(u))}e.stringArray=c})),hi=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Message=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType=e.RequestType0=e.AbstractMessageSignature=e.ParameterStructures=e.ResponseError=e.ErrorCodes=void 0;const t=lt();var o;(function(y){y.ParseError=-32700,y.InvalidRequest=-32600,y.MethodNotFound=-32601,y.InvalidParams=-32602,y.InternalError=-32603,y.jsonrpcReservedErrorRangeStart=-32099,y.serverErrorStart=-32099,y.MessageWriteError=-32099,y.MessageReadError=-32098,y.PendingResponseRejected=-32097,y.ConnectionInactive=-32096,y.ServerNotInitialized=-32002,y.UnknownErrorCode=-32001,y.jsonrpcReservedErrorRangeEnd=-32e3,y.serverErrorEnd=-32e3})(o||(e.ErrorCodes=o={}));var i=class ji extends Error{constructor(O,H,A){super(H),this.code=t.number(O)?O:o.UnknownErrorCode,this.data=A,Object.setPrototypeOf(this,ji.prototype)}toJson(){const O={code:this.code,message:this.message};return this.data!==void 0&&(O.data=this.data),O}};e.ResponseError=i;var n=class Vt{constructor(O){this.kind=O}static is(O){return O===Vt.auto||O===Vt.byName||O===Vt.byPosition}toString(){return this.kind}};e.ParameterStructures=n,n.auto=new n("auto"),n.byPosition=new n("byPosition"),n.byName=new n("byName");var r=class{constructor(y,O){this.method=y,this.numberOfParams=O}get parameterStructures(){return n.auto}};e.AbstractMessageSignature=r;var a=class extends r{constructor(y){super(y,0)}};e.RequestType0=a;var c=class extends r{constructor(y,O=n.auto){super(y,1),this._parameterStructures=O}get parameterStructures(){return this._parameterStructures}};e.RequestType=c;var s=class extends r{constructor(y,O=n.auto){super(y,1),this._parameterStructures=O}get parameterStructures(){return this._parameterStructures}};e.RequestType1=s;var u=class extends r{constructor(y){super(y,2)}};e.RequestType2=u;var d=class extends r{constructor(y){super(y,3)}};e.RequestType3=d;var h=class extends r{constructor(y){super(y,4)}};e.RequestType4=h;var m=class extends r{constructor(y){super(y,5)}};e.RequestType5=m;var _=class extends r{constructor(y){super(y,6)}};e.RequestType6=_;var g=class extends r{constructor(y){super(y,7)}};e.RequestType7=g;var S=class extends r{constructor(y){super(y,8)}};e.RequestType8=S;var I=class extends r{constructor(y){super(y,9)}};e.RequestType9=I;var M=class extends r{constructor(y,O=n.auto){super(y,1),this._parameterStructures=O}get parameterStructures(){return this._parameterStructures}};e.NotificationType=M;var q=class extends r{constructor(y){super(y,0)}};e.NotificationType0=q;var P=class extends r{constructor(y,O=n.auto){super(y,1),this._parameterStructures=O}get parameterStructures(){return this._parameterStructures}};e.NotificationType1=P;var L=class extends r{constructor(y){super(y,2)}};e.NotificationType2=L;var V=class extends r{constructor(y){super(y,3)}};e.NotificationType3=V;var z=class extends r{constructor(y){super(y,4)}};e.NotificationType4=z;var W=class extends r{constructor(y){super(y,5)}};e.NotificationType5=W;var J=class extends r{constructor(y){super(y,6)}};e.NotificationType6=J;var te=class extends r{constructor(y){super(y,7)}};e.NotificationType7=te;var he=class extends r{constructor(y){super(y,8)}};e.NotificationType8=he;var re=class extends r{constructor(y){super(y,9)}};e.NotificationType9=re;var be;(function(y){function O(K){const ne=K;return ne&&t.string(ne.method)&&(t.string(ne.id)||t.number(ne.id))}y.isRequest=O;function H(K){const ne=K;return ne&&t.string(ne.method)&&K.id===void 0}y.isNotification=H;function A(K){const ne=K;return ne&&(ne.result!==void 0||!!ne.error)&&(t.string(ne.id)||t.number(ne.id)||ne.id===null)}y.isResponse=A})(be||(e.Message=be={}))})),mi=N((e=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=void 0;var o;(function(r){r.None=0,r.First=1,r.AsOld=r.First,r.Last=2,r.AsNew=r.Last})(o||(e.Touch=o={}));var i=class{constructor(){this[t]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(r){return this._map.has(r)}get(r,a=o.None){const c=this._map.get(r);if(c)return a!==o.None&&this.touch(c,a),c.value}set(r,a,c=o.None){let s=this._map.get(r);if(s)s.value=a,c!==o.None&&this.touch(s,c);else{switch(s={key:r,value:a,next:void 0,previous:void 0},c){case o.None:this.addItemLast(s);break;case o.First:this.addItemFirst(s);break;case o.Last:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(r,s),this._size++}return this}delete(r){return!!this.remove(r)}remove(r){const a=this._map.get(r);if(a)return this._map.delete(r),this.removeItem(a),this._size--,a.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const r=this._head;return this._map.delete(r.key),this.removeItem(r),this._size--,r.value}forEach(r,a){const c=this._state;let s=this._head;for(;s;){if(a?r.bind(a)(s.value,s.key,this):r(s.value,s.key,this),this._state!==c)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const r=this._state;let a=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==r)throw new Error("LinkedMap got modified during iteration.");if(a){const s={value:a.key,done:!1};return a=a.next,s}else return{value:void 0,done:!0}}};return c}values(){const r=this._state;let a=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==r)throw new Error("LinkedMap got modified during iteration.");if(a){const s={value:a.value,done:!1};return a=a.next,s}else return{value:void 0,done:!0}}};return c}entries(){const r=this._state;let a=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==r)throw new Error("LinkedMap got modified during iteration.");if(a){const s={value:[a.key,a.value],done:!1};return a=a.next,s}else return{value:void 0,done:!0}}};return c}[(t=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(r){if(r>=this.size)return;if(r===0){this.clear();return}let a=this._head,c=this.size;for(;a&&c>r;)this._map.delete(a.key),a=a.next,c--;this._head=a,this._size=c,a&&(a.previous=void 0),this._state++}addItemFirst(r){if(!this._head&&!this._tail)this._tail=r;else if(this._head)r.next=this._head,this._head.previous=r;else throw new Error("Invalid list");this._head=r,this._state++}addItemLast(r){if(!this._head&&!this._tail)this._head=r;else if(this._tail)r.previous=this._tail,this._tail.next=r;else throw new Error("Invalid list");this._tail=r,this._state++}removeItem(r){if(r===this._head&&r===this._tail)this._head=void 0,this._tail=void 0;else if(r===this._head){if(!r.next)throw new Error("Invalid list");r.next.previous=void 0,this._head=r.next}else if(r===this._tail){if(!r.previous)throw new Error("Invalid list");r.previous.next=void 0,this._tail=r.previous}else{const a=r.next,c=r.previous;if(!a||!c)throw new Error("Invalid list");a.previous=c,c.next=a}r.next=void 0,r.previous=void 0,this._state++}touch(r,a){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(a!==o.First&&a!==o.Last)){if(a===o.First){if(r===this._head)return;const c=r.next,s=r.previous;r===this._tail?(s.next=void 0,this._tail=s):(c.previous=s,s.next=c),r.previous=void 0,r.next=this._head,this._head.previous=r,this._head=r,this._state++}else if(a===o.Last){if(r===this._tail)return;const c=r.next,s=r.previous;r===this._head?(c.previous=void 0,this._head=c):(c.previous=s,s.next=c),r.next=void 0,r.previous=this._tail,this._tail.next=r,this._tail=r,this._state++}}}toJSON(){const r=[];return this.forEach((a,c)=>{r.push([c,a])}),r}fromJSON(r){this.clear();for(const[a,c]of r)this.set(a,c)}};e.LinkedMap=i;var n=class extends i{constructor(r,a=1){super(),this._limit=r,this._ratio=Math.min(Math.max(0,a),1)}get limit(){return this._limit}set limit(r){this._limit=r,this.checkTrim()}get ratio(){return this._ratio}set ratio(r){this._ratio=Math.min(Math.max(0,r),1),this.checkTrim()}get(r,a=o.AsNew){return super.get(r,a)}peek(r){return super.get(r,o.None)}set(r,a){return super.set(r,a,o.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};e.LRUCache=n})),Ki=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Disposable=void 0;var t;(function(o){function i(n){return{dispose:n}}o.create=i})(t||(e.Disposable=t={}))})),Ke=N((e=>{Object.defineProperty(e,"__esModule",{value:!0});let t;function o(){if(t===void 0)throw new Error("No runtime abstraction layer installed");return t}(function(i){function n(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");t=r}i.install=n})(o||(o={})),e.default=o})),dt=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=e.Event=void 0;const t=Ke();var o;(function(r){const a={dispose(){}};r.None=function(){return a}})(o||(e.Event=o={}));var i=class{add(r,a=null,c){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(r),this._contexts.push(a),Array.isArray(c)&&c.push({dispose:()=>this.remove(r,a)})}remove(r,a=null){if(!this._callbacks)return;let c=!1;for(let s=0,u=this._callbacks.length;s<u;s++)if(this._callbacks[s]===r)if(this._contexts[s]===a){this._callbacks.splice(s,1),this._contexts.splice(s,1);return}else c=!0;if(c)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...r){if(!this._callbacks)return[];const a=[],c=this._callbacks.slice(0),s=this._contexts.slice(0);for(let u=0,d=c.length;u<d;u++)try{a.push(c[u].apply(s[u],r))}catch(h){(0,t.default)().console.error(h)}return a}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},n=class Ai{constructor(a){this._options=a}get event(){return this._event||(this._event=(a,c,s)=>{this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(a,c);const u={dispose:()=>{this._callbacks&&(this._callbacks.remove(a,c),u.dispose=Ai._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(s)&&s.push(u),u}),this._event}fire(a){this._callbacks&&this._callbacks.invoke.call(this._callbacks,a)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};e.Emitter=n,n._noop=function(){}})),Jt=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;const t=Ke(),o=lt(),i=dt();var n;(function(s){s.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),s.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i.Event.None});function u(d){const h=d;return h&&(h===s.None||h===s.Cancelled||o.boolean(h.isCancellationRequested)&&!!h.onCancellationRequested)}s.is=u})(n||(e.CancellationToken=n={}));const r=Object.freeze(function(s,u){const d=(0,t.default)().timer.setTimeout(s.bind(u),0);return{dispose(){d.dispose()}}});var a=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?r:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},c=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=n.Cancelled}dispose(){this._token?this._token instanceof a&&this._token.dispose():this._token=n.None}};e.CancellationTokenSource=c})),Gi=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SharedArrayReceiverStrategy=e.SharedArraySenderStrategy=void 0;const t=Jt();var o;(function(c){c.Continue=0,c.Cancelled=1})(o||(o={}));var i=class{constructor(){this.buffers=new Map}enableCancellation(c){if(c.id===null)return;const s=new SharedArrayBuffer(4),u=new Int32Array(s,0,1);u[0]=o.Continue,this.buffers.set(c.id,s),c.$cancellationData=s}async sendCancellation(c,s){const u=this.buffers.get(s);if(u===void 0)return;const d=new Int32Array(u,0,1);Atomics.store(d,0,o.Cancelled)}cleanup(c){this.buffers.delete(c)}dispose(){this.buffers.clear()}};e.SharedArraySenderStrategy=i;var n=class{constructor(c){this.data=new Int32Array(c,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===o.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},r=class{constructor(c){this.token=new n(c)}cancel(){}dispose(){}},a=class{constructor(){this.kind="request"}createCancellationTokenSource(c){const s=c.$cancellationData;return s===void 0?new t.CancellationTokenSource:new r(s)}};e.SharedArrayReceiverStrategy=a})),gi=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Semaphore=void 0;const t=Ke();var o=class{constructor(i=1){if(i<=0)throw new Error("Capacity must be greater than 0");this._capacity=i,this._active=0,this._waiting=[]}lock(i){return new Promise((n,r)=>{this._waiting.push({thunk:i,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,t.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const i=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const n=i.thunk();n instanceof Promise?n.then(r=>{this._active--,i.resolve(r),this.runNext()},r=>{this._active--,i.reject(r),this.runNext()}):(this._active--,i.resolve(n),this.runNext())}catch(n){this._active--,i.reject(n),this.runNext()}}};e.Semaphore=o})),Ji=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=void 0;const t=Ke(),o=lt(),i=dt(),n=gi();var r;(function(u){function d(h){let m=h;return m&&o.func(m.listen)&&o.func(m.dispose)&&o.func(m.onError)&&o.func(m.onClose)&&o.func(m.onPartialMessage)}u.is=d})(r||(e.MessageReader=r={}));var a=class{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter,this.partialMessageEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(u){this.errorEmitter.fire(this.asError(u))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(u){this.partialMessageEmitter.fire(u)}asError(u){return u instanceof Error?u:new Error(`Reader received error. Reason: ${o.string(u.message)?u.message:"unknown"}`)}};e.AbstractMessageReader=a;var c;(function(u){function d(h){let m,_;const g=new Map;let S;const I=new Map;if(h===void 0||typeof h=="string")m=h??"utf-8";else{if(m=h.charset??"utf-8",h.contentDecoder!==void 0&&(_=h.contentDecoder,g.set(_.name,_)),h.contentDecoders!==void 0)for(const M of h.contentDecoders)g.set(M.name,M);if(h.contentTypeDecoder!==void 0&&(S=h.contentTypeDecoder,I.set(S.name,S)),h.contentTypeDecoders!==void 0)for(const M of h.contentTypeDecoders)I.set(M.name,M)}return S===void 0&&(S=(0,t.default)().applicationJson.decoder,I.set(S.name,S)),{charset:m,contentDecoder:_,contentDecoders:g,contentTypeDecoder:S,contentTypeDecoders:I}}u.fromOptions=d})(c||(c={}));var s=class extends a{constructor(u,d){super(),this.readable=u,this.options=c.fromOptions(d),this.buffer=(0,t.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new n.Semaphore(1)}set partialMessageTimeout(u){this._partialMessageTimeout=u}get partialMessageTimeout(){return this._partialMessageTimeout}listen(u){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=u;const d=this.readable.onData(h=>{this.onData(h)});return this.readable.onError(h=>this.fireError(h)),this.readable.onClose(()=>this.fireClose()),d}onData(u){try{for(this.buffer.append(u);;){if(this.nextMessageLength===-1){const h=this.buffer.tryReadHeaders(!0);if(!h)return;const m=h.get("content-length");if(!m){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(h))}`));return}const _=parseInt(m);if(isNaN(_)){this.fireError(new Error(`Content-Length value must be a number. Got ${m}`));return}this.nextMessageLength=_}const d=this.buffer.tryReadBody(this.nextMessageLength);if(d===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{const h=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(d):d,m=await this.options.contentTypeDecoder.decode(h,this.options);this.callback(m)}).catch(h=>{this.fireError(h)})}}catch(d){this.fireError(d)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,t.default)().timer.setTimeout((u,d)=>{this.partialMessageTimer=void 0,u===this.messageToken&&(this.firePartialMessage({messageToken:u,waitingTime:d}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};e.ReadableStreamMessageReader=s})),Qi=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=void 0;const t=Ke(),o=lt(),i=gi(),n=dt(),r="Content-Length: ",a=`\r
`;var c;(function(h){function m(_){let g=_;return g&&o.func(g.dispose)&&o.func(g.onClose)&&o.func(g.onError)&&o.func(g.write)}h.is=m})(c||(e.MessageWriter=c={}));var s=class{constructor(){this.errorEmitter=new n.Emitter,this.closeEmitter=new n.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(h,m,_){this.errorEmitter.fire([this.asError(h),m,_])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(h){return h instanceof Error?h:new Error(`Writer received error. Reason: ${o.string(h.message)?h.message:"unknown"}`)}};e.AbstractMessageWriter=s;var u;(function(h){function m(_){return _===void 0||typeof _=="string"?{charset:_??"utf-8",contentTypeEncoder:(0,t.default)().applicationJson.encoder}:{charset:_.charset??"utf-8",contentEncoder:_.contentEncoder,contentTypeEncoder:_.contentTypeEncoder??(0,t.default)().applicationJson.encoder}}h.fromOptions=m})(u||(u={}));var d=class extends s{constructor(h,m){super(),this.writable=h,this.options=u.fromOptions(m),this.errorCount=0,this.writeSemaphore=new i.Semaphore(1),this.writable.onError(_=>this.fireError(_)),this.writable.onClose(()=>this.fireClose())}async write(h){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(h,this.options).then(m=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(m):m).then(m=>{const _=[];return _.push(r,m.byteLength.toString(),a),_.push(a),this.doWrite(h,_,m)},m=>{throw this.fireError(m),m}))}async doWrite(h,m,_){try{return await this.writable.write(m.join(""),"ascii"),this.writable.write(_)}catch(g){return this.handleError(g,h),Promise.reject(g)}}handleError(h,m){this.errorCount++,this.fireError(h,m,this.errorCount)}end(){this.writable.end()}};e.WriteableStreamMessageWriter=d})),Xi=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractMessageBuffer=void 0;const t=13,o=10,i=`\r
`;var n=class{constructor(r="utf-8"){this._encoding=r,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(r){const a=typeof r=="string"?this.fromString(r,this._encoding):r;this._chunks.push(a),this._totalLength+=a.byteLength}tryReadHeaders(r=!1){if(this._chunks.length===0)return;let a=0,c=0,s=0,u=0;e:for(;c<this._chunks.length;){const _=this._chunks[c];for(s=0;s<_.length;){switch(_[s]){case t:switch(a){case 0:a=1;break;case 2:a=3;break;default:a=0}break;case o:switch(a){case 1:a=2;break;case 3:a=4,s++;break e;default:a=0}break;default:a=0}s++}u+=_.byteLength,c++}if(a!==4)return;const d=this._read(u+s),h=new Map,m=this.toString(d,"ascii").split(i);if(m.length<2)return h;for(let _=0;_<m.length-2;_++){const g=m[_],S=g.indexOf(":");if(S===-1)throw new Error(`Message header must separate key and value using ':'
${g}`);const I=g.substr(0,S),M=g.substr(S+1).trim();h.set(r?I.toLowerCase():I,M)}return h}tryReadBody(r){if(!(this._totalLength<r))return this._read(r)}get numberOfBytes(){return this._totalLength}_read(r){if(r===0)return this.emptyBuffer();if(r>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===r){const u=this._chunks[0];return this._chunks.shift(),this._totalLength-=r,this.asNative(u)}if(this._chunks[0].byteLength>r){const u=this._chunks[0],d=this.asNative(u,r);return this._chunks[0]=u.slice(r),this._totalLength-=r,d}const a=this.allocNative(r);let c=0,s=0;for(;r>0;){const u=this._chunks[s];if(u.byteLength>r){const d=u.slice(0,r);a.set(d,c),c+=r,this._chunks[s]=u.slice(r),this._totalLength-=r,r-=r}else a.set(u,c),c+=u.byteLength,this._chunks.shift(),this._totalLength-=u.byteLength,r-=u.byteLength}return a}};e.AbstractMessageBuffer=n})),Yi=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.ConnectionOptions=e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.RequestCancellationReceiverStrategy=e.IdCancellationReceiverStrategy=e.ConnectionStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=e.NullLogger=e.ProgressType=e.ProgressToken=void 0;const t=Ke(),o=lt(),i=hi(),n=mi(),r=dt(),a=Jt();var c;(function(y){y.type=new i.NotificationType("$/cancelRequest")})(c||(c={}));var s;(function(y){function O(H){return typeof H=="string"||typeof H=="number"}y.is=O})(s||(e.ProgressToken=s={}));var u;(function(y){y.type=new i.NotificationType("$/progress")})(u||(u={}));var d=class{constructor(){}};e.ProgressType=d;var h;(function(y){function O(H){return o.func(H)}y.is=O})(h||(h={})),e.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var m;(function(y){y[y.Off=0]="Off",y[y.Messages=1]="Messages",y[y.Compact=2]="Compact",y[y.Verbose=3]="Verbose"})(m||(e.Trace=m={}));var _;(function(y){y.Off="off",y.Messages="messages",y.Compact="compact",y.Verbose="verbose"})(_||(e.TraceValues=_={})),(function(y){function O(A){if(!o.string(A))return y.Off;switch(A=A.toLowerCase(),A){case"off":return y.Off;case"messages":return y.Messages;case"compact":return y.Compact;case"verbose":return y.Verbose;default:return y.Off}}y.fromString=O;function H(A){switch(A){case y.Off:return"off";case y.Messages:return"messages";case y.Compact:return"compact";case y.Verbose:return"verbose";default:return"off"}}y.toString=H})(m||(e.Trace=m={}));var g;(function(y){y.Text="text",y.JSON="json"})(g||(e.TraceFormat=g={})),(function(y){function O(H){return o.string(H)?(H=H.toLowerCase(),H==="json"?y.JSON:y.Text):y.Text}y.fromString=O})(g||(e.TraceFormat=g={}));var S;(function(y){y.type=new i.NotificationType("$/setTrace")})(S||(e.SetTraceNotification=S={}));var I;(function(y){y.type=new i.NotificationType("$/logTrace")})(I||(e.LogTraceNotification=I={}));var M;(function(y){y[y.Closed=1]="Closed",y[y.Disposed=2]="Disposed",y[y.AlreadyListening=3]="AlreadyListening"})(M||(e.ConnectionErrors=M={}));var q=class Wi extends Error{constructor(O,H){super(H),this.code=O,Object.setPrototypeOf(this,Wi.prototype)}};e.ConnectionError=q;var P;(function(y){function O(H){const A=H;return A&&o.func(A.cancelUndispatched)}y.is=O})(P||(e.ConnectionStrategy=P={}));var L;(function(y){function O(H){const A=H;return A&&(A.kind===void 0||A.kind==="id")&&o.func(A.createCancellationTokenSource)&&(A.dispose===void 0||o.func(A.dispose))}y.is=O})(L||(e.IdCancellationReceiverStrategy=L={}));var V;(function(y){function O(H){const A=H;return A&&A.kind==="request"&&o.func(A.createCancellationTokenSource)&&(A.dispose===void 0||o.func(A.dispose))}y.is=O})(V||(e.RequestCancellationReceiverStrategy=V={}));var z;(function(y){y.Message=Object.freeze({createCancellationTokenSource(H){return new a.CancellationTokenSource}});function O(H){return L.is(H)||V.is(H)}y.is=O})(z||(e.CancellationReceiverStrategy=z={}));var W;(function(y){y.Message=Object.freeze({sendCancellation(H,A){return H.sendNotification(c.type,{id:A})},cleanup(H){}});function O(H){const A=H;return A&&o.func(A.sendCancellation)&&o.func(A.cleanup)}y.is=O})(W||(e.CancellationSenderStrategy=W={}));var J;(function(y){y.Message=Object.freeze({receiver:z.Message,sender:W.Message});function O(H){const A=H;return A&&z.is(A.receiver)&&W.is(A.sender)}y.is=O})(J||(e.CancellationStrategy=J={}));var te;(function(y){function O(H){const A=H;return A&&o.func(A.handleMessage)}y.is=O})(te||(e.MessageStrategy=te={}));var he;(function(y){function O(H){const A=H;return A&&(J.is(A.cancellationStrategy)||P.is(A.connectionStrategy)||te.is(A.messageStrategy))}y.is=O})(he||(e.ConnectionOptions=he={}));var re;(function(y){y[y.New=1]="New",y[y.Listening=2]="Listening",y[y.Closed=3]="Closed",y[y.Disposed=4]="Disposed"})(re||(re={}));function be(y,O,H,A){const K=H!==void 0?H:e.NullLogger;let ne=0,Ze=0,$e=0;const De="2.0";let ke;const Pe=new Map;let Re;const Ce=new Map,qe=new Map;let Oe,pe=new n.LinkedMap,ve=new Map,Ie=new Set,v=new Map,w=m.Off,T=g.Text,U,k=re.New;const de=new r.Emitter,we=new r.Emitter,He=new r.Emitter,Ue=new r.Emitter,Be=new r.Emitter,ge=A&&A.cancellationStrategy?A.cancellationStrategy:J.Message;function ze(f){if(f===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+f.toString()}function Le(f){return f===null?"res-unknown-"+(++$e).toString():"res-"+f.toString()}function ct(){return"not-"+(++Ze).toString()}function Fe(f,R){i.Message.isRequest(R)?f.set(ze(R.id),R):i.Message.isResponse(R)?f.set(Le(R.id),R):f.set(ct(),R)}function je(f){}function Me(){return k===re.Listening}function _e(){return k===re.Closed}function b(){return k===re.Disposed}function D(){(k===re.New||k===re.Listening)&&(k=re.Closed,we.fire(void 0))}function E(f){de.fire([f,void 0,void 0])}function ue(f){de.fire(f)}y.onClose(D),y.onError(E),O.onClose(D),O.onError(ue);function et(){Oe||pe.size===0||(Oe=(0,t.default)().timer.setImmediate(()=>{Oe=void 0,Nt()}))}function kt(f){i.Message.isRequest(f)?It(f):i.Message.isNotification(f)?Ft(f):i.Message.isResponse(f)?Lt(f):jt(f)}function Nt(){if(pe.size===0)return;const f=pe.shift();try{const R=A?.messageStrategy;te.is(R)?R.handleMessage(f,kt):kt(f)}finally{et()}}const Ot=f=>{try{if(i.Message.isNotification(f)&&f.method===c.type.method){const R=f.params.id,C=ze(R),F=pe.get(C);if(i.Message.isRequest(F)){const X=A?.connectionStrategy,ie=X&&X.cancelUndispatched?X.cancelUndispatched(F,je):void 0;if(ie&&(ie.error!==void 0||ie.result!==void 0)){pe.delete(C),v.delete(R),ie.id=F.id,tt(ie,f.method,Date.now()),O.write(ie).catch(()=>K.error("Sending response for canceled message failed."));return}}const Y=v.get(R);if(Y!==void 0){Y.cancel(),ut(f);return}else Ie.add(R)}Fe(pe,f)}finally{et()}};function It(f){if(b())return;function R(G,$,Q){const le={jsonrpc:De,id:f.id};G instanceof i.ResponseError?le.error=G.toJson():le.result=G===void 0?null:G,tt(le,$,Q),O.write(le).catch(()=>K.error("Sending response failed."))}function C(G,$,Q){const le={jsonrpc:De,id:f.id,error:G.toJson()};tt(le,$,Q),O.write(le).catch(()=>K.error("Sending response failed."))}function F(G,$,Q){G===void 0&&(G=null);const le={jsonrpc:De,id:f.id,result:G};tt(le,$,Q),O.write(le).catch(()=>K.error("Sending response failed."))}Ht(f);const Y=Pe.get(f.method);let X,ie;Y&&(X=Y.type,ie=Y.handler);const se=Date.now();if(ie||ke){const G=f.id??String(Date.now()),$=L.is(ge.receiver)?ge.receiver.createCancellationTokenSource(G):ge.receiver.createCancellationTokenSource(f);f.id!==null&&Ie.has(f.id)&&$.cancel(),f.id!==null&&v.set(G,$);try{let Q;if(ie)if(f.params===void 0){if(X!==void 0&&X.numberOfParams!==0){C(new i.ResponseError(i.ErrorCodes.InvalidParams,`Request ${f.method} defines ${X.numberOfParams} params but received none.`),f.method,se);return}Q=ie($.token)}else if(Array.isArray(f.params)){if(X!==void 0&&X.parameterStructures===i.ParameterStructures.byName){C(new i.ResponseError(i.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by name but received parameters by position`),f.method,se);return}Q=ie(...f.params,$.token)}else{if(X!==void 0&&X.parameterStructures===i.ParameterStructures.byPosition){C(new i.ResponseError(i.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by position but received parameters by name`),f.method,se);return}Q=ie(f.params,$.token)}else ke&&(Q=ke(f.method,f.params,$.token));const le=Q;Q?le.then?le.then(me=>{v.delete(G),R(me,f.method,se)},me=>{v.delete(G),me instanceof i.ResponseError?C(me,f.method,se):me&&o.string(me.message)?C(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${me.message}`),f.method,se):C(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,se)}):(v.delete(G),R(Q,f.method,se)):(v.delete(G),F(Q,f.method,se))}catch(Q){v.delete(G),Q instanceof i.ResponseError?R(Q,f.method,se):Q&&o.string(Q.message)?C(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${Q.message}`),f.method,se):C(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,se)}}else C(new i.ResponseError(i.ErrorCodes.MethodNotFound,`Unhandled method ${f.method}`),f.method,se)}function Lt(f){if(!b())if(f.id===null)f.error?K.error(`Received response message without id: Error is: 
${JSON.stringify(f.error,void 0,4)}`):K.error("Received response message without id. No further error information provided.");else{const R=f.id,C=ve.get(R);if(Ut(f,C),C!==void 0){ve.delete(R);try{if(f.error){const F=f.error;C.reject(new i.ResponseError(F.code,F.message,F.data))}else if(f.result!==void 0)C.resolve(f.result);else throw new Error("Should never happen.")}catch(F){F.message?K.error(`Response handler '${C.method}' failed with message: ${F.message}`):K.error(`Response handler '${C.method}' failed unexpectedly.`)}}}}function Ft(f){if(b())return;let R,C;if(f.method===c.type.method){const F=f.params.id;Ie.delete(F),ut(f);return}else{const F=Ce.get(f.method);F&&(C=F.handler,R=F.type)}if(C||Re)try{if(ut(f),C)if(f.params===void 0)R!==void 0&&R.numberOfParams!==0&&R.parameterStructures!==i.ParameterStructures.byName&&K.error(`Notification ${f.method} defines ${R.numberOfParams} params but received none.`),C();else if(Array.isArray(f.params)){const F=f.params;f.method===u.type.method&&F.length===2&&s.is(F[0])?C({token:F[0],value:F[1]}):(R!==void 0&&(R.parameterStructures===i.ParameterStructures.byName&&K.error(`Notification ${f.method} defines parameters by name but received parameters by position`),R.numberOfParams!==f.params.length&&K.error(`Notification ${f.method} defines ${R.numberOfParams} params but received ${F.length} arguments`)),C(...F))}else R!==void 0&&R.parameterStructures===i.ParameterStructures.byPosition&&K.error(`Notification ${f.method} defines parameters by position but received parameters by name`),C(f.params);else Re&&Re(f.method,f.params)}catch(F){F.message?K.error(`Notification handler '${f.method}' failed with message: ${F.message}`):K.error(`Notification handler '${f.method}' failed unexpectedly.`)}else He.fire(f)}function jt(f){if(!f){K.error("Received empty message.");return}K.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(f,null,4)}`);const R=f;if(o.string(R.id)||o.number(R.id)){const C=R.id,F=ve.get(C);F&&F.reject(new Error("The received response has neither a result nor an error property."))}}function Te(f){if(f!=null)switch(w){case m.Verbose:return JSON.stringify(f,null,4);case m.Compact:return JSON.stringify(f);default:return}}function At(f){if(!(w===m.Off||!U))if(T===g.Text){let R;(w===m.Verbose||w===m.Compact)&&f.params&&(R=`Params: ${Te(f.params)}

`),U.log(`Sending request '${f.method} - (${f.id})'.`,R)}else Ae("send-request",f)}function Wt(f){if(!(w===m.Off||!U))if(T===g.Text){let R;(w===m.Verbose||w===m.Compact)&&(f.params?R=`Params: ${Te(f.params)}

`:R=`No parameters provided.

`),U.log(`Sending notification '${f.method}'.`,R)}else Ae("send-notification",f)}function tt(f,R,C){if(!(w===m.Off||!U))if(T===g.Text){let F;(w===m.Verbose||w===m.Compact)&&(f.error&&f.error.data?F=`Error data: ${Te(f.error.data)}

`:f.result?F=`Result: ${Te(f.result)}

`:f.error===void 0&&(F=`No result returned.

`)),U.log(`Sending response '${R} - (${f.id})'. Processing request took ${Date.now()-C}ms`,F)}else Ae("send-response",f)}function Ht(f){if(!(w===m.Off||!U))if(T===g.Text){let R;(w===m.Verbose||w===m.Compact)&&f.params&&(R=`Params: ${Te(f.params)}

`),U.log(`Received request '${f.method} - (${f.id})'.`,R)}else Ae("receive-request",f)}function ut(f){if(!(w===m.Off||!U||f.method===I.type.method))if(T===g.Text){let R;(w===m.Verbose||w===m.Compact)&&(f.params?R=`Params: ${Te(f.params)}

`:R=`No parameters provided.

`),U.log(`Received notification '${f.method}'.`,R)}else Ae("receive-notification",f)}function Ut(f,R){if(!(w===m.Off||!U))if(T===g.Text){let C;if((w===m.Verbose||w===m.Compact)&&(f.error&&f.error.data?C=`Error data: ${Te(f.error.data)}

`:f.result?C=`Result: ${Te(f.result)}

`:f.error===void 0&&(C=`No result returned.

`)),R){const F=f.error?` Request failed: ${f.error.message} (${f.error.code}).`:"";U.log(`Received response '${R.method} - (${f.id})' in ${Date.now()-R.timerStart}ms.${F}`,C)}else U.log(`Received response ${f.id} without active response promise.`,C)}else Ae("receive-response",f)}function Ae(f,R){if(!U||w===m.Off)return;const C={isLSPMessage:!0,type:f,message:R,timestamp:Date.now()};U.log(C)}function Ve(){if(_e())throw new q(M.Closed,"Connection is closed.");if(b())throw new q(M.Disposed,"Connection is disposed.")}function Bt(){if(Me())throw new q(M.AlreadyListening,"Connection is already listening")}function zt(){if(!Me())throw new Error("Call listen() first.")}function xe(f){return f===void 0?null:f}function Rt(f){if(f!==null)return f}function l(f){return f!=null&&!Array.isArray(f)&&typeof f=="object"}function oe(f,R){switch(f){case i.ParameterStructures.auto:return l(R)?Rt(R):[xe(R)];case i.ParameterStructures.byName:if(!l(R))throw new Error("Received parameters by name but param is not an object literal.");return Rt(R);case i.ParameterStructures.byPosition:return[xe(R)];default:throw new Error(`Unknown parameter structure ${f.toString()}`)}}function ae(f,R){let C;const F=f.numberOfParams;switch(F){case 0:C=void 0;break;case 1:C=oe(f.parameterStructures,R[0]);break;default:C=[];for(let Y=0;Y<R.length&&Y<F;Y++)C.push(xe(R[Y]));if(R.length<F)for(let Y=R.length;Y<F;Y++)C.push(null);break}return C}const B={sendNotification:(f,...R)=>{Ve();let C,F;if(o.string(f)){C=f;const X=R[0];let ie=0,se=i.ParameterStructures.auto;i.ParameterStructures.is(X)&&(ie=1,se=X);let G=R.length;const $=G-ie;switch($){case 0:F=void 0;break;case 1:F=oe(se,R[ie]);break;default:if(se===i.ParameterStructures.byName)throw new Error(`Received ${$} parameters for 'by Name' notification parameter structure.`);F=R.slice(ie,G).map(Q=>xe(Q));break}}else{const X=R;C=f.method,F=ae(f,X)}const Y={jsonrpc:De,method:C,params:F};return Wt(Y),O.write(Y).catch(X=>{throw K.error("Sending notification failed."),X})},onNotification:(f,R)=>{Ve();let C;return o.func(f)?Re=f:R&&(o.string(f)?(C=f,Ce.set(f,{type:void 0,handler:R})):(C=f.method,Ce.set(f.method,{type:f,handler:R}))),{dispose:()=>{C!==void 0?Ce.delete(C):Re=void 0}}},onProgress:(f,R,C)=>{if(qe.has(R))throw new Error(`Progress handler for token ${R} already registered`);return qe.set(R,C),{dispose:()=>{qe.delete(R)}}},sendProgress:(f,R,C)=>B.sendNotification(u.type,{token:R,value:C}),onUnhandledProgress:Ue.event,sendRequest:(f,...R)=>{Ve(),zt();let C,F,Y;if(o.string(f)){C=f;const G=R[0],$=R[R.length-1];let Q=0,le=i.ParameterStructures.auto;i.ParameterStructures.is(G)&&(Q=1,le=G);let me=R.length;a.CancellationToken.is($)&&(me=me-1,Y=$);const Ee=me-Q;switch(Ee){case 0:F=void 0;break;case 1:F=oe(le,R[Q]);break;default:if(le===i.ParameterStructures.byName)throw new Error(`Received ${Ee} parameters for 'by Name' request parameter structure.`);F=R.slice(Q,me).map(so=>xe(so));break}}else{const G=R;C=f.method,F=ae(f,G);const $=f.numberOfParams;Y=a.CancellationToken.is(G[$])?G[$]:void 0}const X=ne++;let ie;Y&&(ie=Y.onCancellationRequested(()=>{const G=ge.sender.sendCancellation(B,X);return G===void 0?(K.log(`Received no promise from cancellation strategy when cancelling id ${X}`),Promise.resolve()):G.catch(()=>{K.log(`Sending cancellation messages for id ${X} failed`)})}));const se={jsonrpc:De,id:X,method:C,params:F};return At(se),typeof ge.sender.enableCancellation=="function"&&ge.sender.enableCancellation(se),new Promise(async(G,$)=>{const Q=Ee=>{G(Ee),ge.sender.cleanup(X),ie?.dispose()},le=Ee=>{$(Ee),ge.sender.cleanup(X),ie?.dispose()},me={method:C,timerStart:Date.now(),resolve:Q,reject:le};try{await O.write(se),ve.set(X,me)}catch(Ee){throw K.error("Sending request failed."),me.reject(new i.ResponseError(i.ErrorCodes.MessageWriteError,Ee.message?Ee.message:"Unknown reason")),Ee}})},onRequest:(f,R)=>{Ve();let C=null;return h.is(f)?(C=void 0,ke=f):o.string(f)?(C=null,R!==void 0&&(C=f,Pe.set(f,{handler:R,type:void 0}))):R!==void 0&&(C=f.method,Pe.set(f.method,{type:f,handler:R})),{dispose:()=>{C!==null&&(C!==void 0?Pe.delete(C):ke=void 0)}}},hasPendingResponse:()=>ve.size>0,trace:async(f,R,C)=>{let F=!1,Y=g.Text;C!==void 0&&(o.boolean(C)?F=C:(F=C.sendNotification||!1,Y=C.traceFormat||g.Text)),w=f,T=Y,w===m.Off?U=void 0:U=R,F&&!_e()&&!b()&&await B.sendNotification(S.type,{value:m.toString(f)})},onError:de.event,onClose:we.event,onUnhandledNotification:He.event,onDispose:Be.event,end:()=>{O.end()},dispose:()=>{if(b())return;k=re.Disposed,Be.fire(void 0);const f=new i.ResponseError(i.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const R of ve.values())R.reject(f);ve=new Map,v=new Map,Ie=new Set,pe=new n.LinkedMap,o.func(O.dispose)&&O.dispose(),o.func(y.dispose)&&y.dispose()},listen:()=>{Ve(),Bt(),k=re.Listening,y.listen(Ot)},inspect:()=>{(0,t.default)().console.log("inspect")}};return B.onNotification(I.type,f=>{if(w===m.Off||!U)return;const R=w===m.Verbose||w===m.Compact;U.log(f.message,R?f.verbose:void 0)}),B.onNotification(u.type,f=>{const R=qe.get(f.token);R?R(f.value):Ue.fire(f)}),B}e.createMessageConnection=be})),Qt=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgressType=e.ProgressToken=e.createMessageConnection=e.NullLogger=e.ConnectionOptions=e.ConnectionStrategy=e.AbstractMessageBuffer=e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=e.SharedArrayReceiverStrategy=e.SharedArraySenderStrategy=e.CancellationToken=e.CancellationTokenSource=e.Emitter=e.Event=e.Disposable=e.LRUCache=e.Touch=e.LinkedMap=e.ParameterStructures=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.ErrorCodes=e.ResponseError=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType0=e.RequestType=e.Message=e.RAL=void 0,e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=void 0;const t=hi();Object.defineProperty(e,"Message",{enumerable:!0,get:function(){return t.Message}}),Object.defineProperty(e,"RequestType",{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(e,"RequestType0",{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(e,"RequestType1",{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(e,"RequestType2",{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(e,"RequestType3",{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(e,"RequestType4",{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(e,"RequestType5",{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(e,"RequestType6",{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(e,"RequestType7",{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(e,"RequestType8",{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(e,"RequestType9",{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(e,"ResponseError",{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(e,"NotificationType",{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(e,"NotificationType0",{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(e,"NotificationType1",{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(e,"NotificationType2",{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(e,"NotificationType3",{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(e,"NotificationType4",{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(e,"NotificationType5",{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(e,"NotificationType6",{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(e,"NotificationType7",{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(e,"NotificationType8",{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(e,"NotificationType9",{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(e,"ParameterStructures",{enumerable:!0,get:function(){return t.ParameterStructures}});const o=mi();Object.defineProperty(e,"LinkedMap",{enumerable:!0,get:function(){return o.LinkedMap}}),Object.defineProperty(e,"LRUCache",{enumerable:!0,get:function(){return o.LRUCache}}),Object.defineProperty(e,"Touch",{enumerable:!0,get:function(){return o.Touch}});const i=Ki();Object.defineProperty(e,"Disposable",{enumerable:!0,get:function(){return i.Disposable}});const n=dt();Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return n.Event}}),Object.defineProperty(e,"Emitter",{enumerable:!0,get:function(){return n.Emitter}});const r=Jt();Object.defineProperty(e,"CancellationTokenSource",{enumerable:!0,get:function(){return r.CancellationTokenSource}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return r.CancellationToken}});const a=Gi();Object.defineProperty(e,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return a.SharedArraySenderStrategy}}),Object.defineProperty(e,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return a.SharedArrayReceiverStrategy}});const c=Ji();Object.defineProperty(e,"MessageReader",{enumerable:!0,get:function(){return c.MessageReader}}),Object.defineProperty(e,"AbstractMessageReader",{enumerable:!0,get:function(){return c.AbstractMessageReader}}),Object.defineProperty(e,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return c.ReadableStreamMessageReader}});const s=Qi();Object.defineProperty(e,"MessageWriter",{enumerable:!0,get:function(){return s.MessageWriter}}),Object.defineProperty(e,"AbstractMessageWriter",{enumerable:!0,get:function(){return s.AbstractMessageWriter}}),Object.defineProperty(e,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return s.WriteableStreamMessageWriter}});const u=Xi();Object.defineProperty(e,"AbstractMessageBuffer",{enumerable:!0,get:function(){return u.AbstractMessageBuffer}});const d=Yi();Object.defineProperty(e,"ConnectionStrategy",{enumerable:!0,get:function(){return d.ConnectionStrategy}}),Object.defineProperty(e,"ConnectionOptions",{enumerable:!0,get:function(){return d.ConnectionOptions}}),Object.defineProperty(e,"NullLogger",{enumerable:!0,get:function(){return d.NullLogger}}),Object.defineProperty(e,"createMessageConnection",{enumerable:!0,get:function(){return d.createMessageConnection}}),Object.defineProperty(e,"ProgressToken",{enumerable:!0,get:function(){return d.ProgressToken}}),Object.defineProperty(e,"ProgressType",{enumerable:!0,get:function(){return d.ProgressType}}),Object.defineProperty(e,"Trace",{enumerable:!0,get:function(){return d.Trace}}),Object.defineProperty(e,"TraceValues",{enumerable:!0,get:function(){return d.TraceValues}}),Object.defineProperty(e,"TraceFormat",{enumerable:!0,get:function(){return d.TraceFormat}}),Object.defineProperty(e,"SetTraceNotification",{enumerable:!0,get:function(){return d.SetTraceNotification}}),Object.defineProperty(e,"LogTraceNotification",{enumerable:!0,get:function(){return d.LogTraceNotification}}),Object.defineProperty(e,"ConnectionErrors",{enumerable:!0,get:function(){return d.ConnectionErrors}}),Object.defineProperty(e,"ConnectionError",{enumerable:!0,get:function(){return d.ConnectionError}}),Object.defineProperty(e,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return d.CancellationReceiverStrategy}}),Object.defineProperty(e,"CancellationSenderStrategy",{enumerable:!0,get:function(){return d.CancellationSenderStrategy}}),Object.defineProperty(e,"CancellationStrategy",{enumerable:!0,get:function(){return d.CancellationStrategy}}),Object.defineProperty(e,"MessageStrategy",{enumerable:!0,get:function(){return d.MessageStrategy}});const h=Ke();e.RAL=h.default})),Zi=N((e=>{Object.defineProperty(e,"__esModule",{value:!0});const t=Qt();var o=class Hi extends t.AbstractMessageBuffer{constructor(u="utf-8"){super(u),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return Hi.emptyBuffer}fromString(u,d){return new TextEncoder().encode(u)}toString(u,d){return d==="ascii"?this.asciiDecoder.decode(u):new TextDecoder(d).decode(u)}asNative(u,d){return d===void 0?u:u.slice(0,d)}allocNative(u){return new Uint8Array(u)}};o.emptyBuffer=new Uint8Array(0);var i=class{constructor(s){this.socket=s,this._onData=new t.Emitter,this._messageListener=u=>{u.data.arrayBuffer().then(d=>{this._onData.fire(new Uint8Array(d))},()=>{(0,t.RAL)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(s){return this.socket.addEventListener("close",s),t.Disposable.create(()=>this.socket.removeEventListener("close",s))}onError(s){return this.socket.addEventListener("error",s),t.Disposable.create(()=>this.socket.removeEventListener("error",s))}onEnd(s){return this.socket.addEventListener("end",s),t.Disposable.create(()=>this.socket.removeEventListener("end",s))}onData(s){return this._onData.event(s)}},n=class{constructor(s){this.socket=s}onClose(s){return this.socket.addEventListener("close",s),t.Disposable.create(()=>this.socket.removeEventListener("close",s))}onError(s){return this.socket.addEventListener("error",s),t.Disposable.create(()=>this.socket.removeEventListener("error",s))}onEnd(s){return this.socket.addEventListener("end",s),t.Disposable.create(()=>this.socket.removeEventListener("end",s))}write(s,u){if(typeof s=="string"){if(u!==void 0&&u!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${u}`);this.socket.send(s)}else this.socket.send(s);return Promise.resolve()}end(){this.socket.close()}};const r=new TextEncoder,a=Object.freeze({messageBuffer:Object.freeze({create:s=>new o(s)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(s,u)=>{if(u.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${u.charset}`);return Promise.resolve(r.encode(JSON.stringify(s,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(s,u)=>{if(!(s instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(u.charset).decode(s)))}})}),stream:Object.freeze({asReadableStream:s=>new i(s),asWritableStream:s=>new n(s)}),console,timer:Object.freeze({setTimeout(s,u,...d){const h=setTimeout(s,u,...d);return{dispose:()=>clearTimeout(h)}},setImmediate(s,...u){const d=setTimeout(s,0,...u);return{dispose:()=>clearTimeout(d)}},setInterval(s,u,...d){const h=setInterval(s,u,...d);return{dispose:()=>clearInterval(h)}}})});function c(){return a}(function(s){function u(){t.RAL.install(a)}s.install=u})(c||(c={})),e.default=c})),nt=N((e=>{var t=e&&e.__createBinding||(Object.create?(function(c,s,u,d){d===void 0&&(d=u);var h=Object.getOwnPropertyDescriptor(s,u);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(c,d,h)}):(function(c,s,u,d){d===void 0&&(d=u),c[d]=s[u]})),o=e&&e.__exportStar||function(c,s){for(var u in c)u!=="default"&&!Object.prototype.hasOwnProperty.call(s,u)&&t(s,c,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.BrowserMessageWriter=e.BrowserMessageReader=void 0,Zi().default.install();const i=Qt();o(Qt(),e);var n=class extends i.AbstractMessageReader{constructor(c){super(),this._onData=new i.Emitter,this._messageListener=s=>{this._onData.fire(s.data)},c.addEventListener("error",s=>this.fireError(s)),c.onmessage=this._messageListener}listen(c){return this._onData.event(c)}};e.BrowserMessageReader=n;var r=class extends i.AbstractMessageWriter{constructor(c){super(),this.port=c,this.errorCount=0,c.addEventListener("error",s=>this.fireError(s))}write(c){try{return this.port.postMessage(c),Promise.resolve()}catch(s){return this.handleError(s,c),Promise.reject(s)}}handleError(c,s){this.errorCount++,this.fireError(c,s,this.errorCount)}end(){}};e.BrowserMessageWriter=r;function a(c,s,u,d){return u===void 0&&(u=i.NullLogger),i.ConnectionStrategy.is(d)&&(d={connectionStrategy:d}),(0,i.createMessageConnection)(c,s,u,d)}e.createMessageConnection=a})),pi=N(((e,t)=>{t.exports=nt()})),Xt=Vi({AnnotatedTextEdit:()=>Ne,ChangeAnnotation:()=>Je,ChangeAnnotationIdentifier:()=>fe,CodeAction:()=>Nn,CodeActionContext:()=>En,CodeActionKind:()=>Mn,CodeActionTriggerKind:()=>_t,CodeDescription:()=>sn,CodeLens:()=>On,Color:()=>Tt,ColorInformation:()=>en,ColorPresentation:()=>tn,Command:()=>Ge,CompletionItem:()=>vn,CompletionItemKind:()=>fn,CompletionItemLabelDetails:()=>yn,CompletionItemTag:()=>mn,CompletionList:()=>_n,CreateFile:()=>it,DeleteFile:()=>ot,Diagnostic:()=>mt,DiagnosticRelatedInformation:()=>St,DiagnosticSeverity:()=>on,DiagnosticTag:()=>an,DocumentHighlight:()=>wn,DocumentHighlightKind:()=>Rn,DocumentLink:()=>Ln,DocumentSymbol:()=>qn,DocumentUri:()=>Yt,EOL:()=>vi,FoldingRange:()=>rn,FoldingRangeKind:()=>nn,FormattingOptions:()=>In,Hover:()=>bn,InlayHint:()=>Vn,InlayHintKind:()=>qt,InlayHintLabelPart:()=>Mt,InlineCompletionContext:()=>Xn,InlineCompletionItem:()=>Kn,InlineCompletionList:()=>Gn,InlineCompletionTriggerKind:()=>Jn,InlineValueContext:()=>zn,InlineValueEvaluatableExpression:()=>Bn,InlineValueText:()=>Hn,InlineValueVariableLookup:()=>Un,InsertReplaceEdit:()=>gn,InsertTextFormat:()=>hn,InsertTextMode:()=>pn,Location:()=>ht,LocationLink:()=>$t,MarkedString:()=>vt,MarkupContent:()=>at,MarkupKind:()=>Ct,OptionalVersionedTextDocumentIdentifier:()=>yt,ParameterInformation:()=>Dn,Position:()=>ye,Range:()=>ee,RenameFile:()=>rt,SelectedCompletionInfo:()=>Qn,SelectionRange:()=>Fn,SemanticTokenModifiers:()=>An,SemanticTokenTypes:()=>jn,SemanticTokens:()=>Wn,SignatureInformation:()=>kn,StringValue:()=>xn,SymbolInformation:()=>Pn,SymbolKind:()=>Tn,SymbolTag:()=>Sn,TextDocument:()=>Zn,TextDocumentEdit:()=>gt,TextDocumentIdentifier:()=>un,TextDocumentItem:()=>dn,TextEdit:()=>Se,URI:()=>wt,VersionedTextDocumentIdentifier:()=>ln,WorkspaceChange:()=>yi,WorkspaceEdit:()=>Pt,WorkspaceFolder:()=>Yn,WorkspaceSymbol:()=>Cn,integer:()=>Zt,uinteger:()=>ft}),Yt,wt,Zt,ft,ye,ee,ht,$t,Tt,en,tn,nn,rn,St,on,an,sn,mt,Ge,Se,Je,fe,Ne,gt,it,rt,ot,Pt,pt,cn,yi,un,ln,yt,dn,Ct,at,fn,hn,mn,gn,pn,yn,vn,_n,vt,bn,Dn,kn,Rn,wn,Tn,Sn,Pn,Cn,qn,Mn,_t,En,Nn,On,In,Ln,Fn,jn,An,Wn,Hn,Un,Bn,zn,qt,Mt,Vn,xn,Kn,Gn,Jn,Qn,Xn,Yn,vi,Zn,_i,p,$n=zi((()=>{(function(e){function t(o){return typeof o=="string"}e.is=t})(Yt||(Yt={})),(function(e){function t(o){return typeof o=="string"}e.is=t})(wt||(wt={})),(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(o){return typeof o=="number"&&e.MIN_VALUE<=o&&o<=e.MAX_VALUE}e.is=t})(Zt||(Zt={})),(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(o){return typeof o=="number"&&e.MIN_VALUE<=o&&o<=e.MAX_VALUE}e.is=t})(ft||(ft={})),(function(e){function t(i,n){return i===Number.MAX_VALUE&&(i=ft.MAX_VALUE),n===Number.MAX_VALUE&&(n=ft.MAX_VALUE),{line:i,character:n}}e.create=t;function o(i){let n=i;return p.objectLiteral(n)&&p.uinteger(n.line)&&p.uinteger(n.character)}e.is=o})(ye||(ye={})),(function(e){function t(i,n,r,a){if(p.uinteger(i)&&p.uinteger(n)&&p.uinteger(r)&&p.uinteger(a))return{start:ye.create(i,n),end:ye.create(r,a)};if(ye.is(i)&&ye.is(n))return{start:i,end:n};throw new Error(`Range#create called with invalid arguments[${i}, ${n}, ${r}, ${a}]`)}e.create=t;function o(i){let n=i;return p.objectLiteral(n)&&ye.is(n.start)&&ye.is(n.end)}e.is=o})(ee||(ee={})),(function(e){function t(i,n){return{uri:i,range:n}}e.create=t;function o(i){let n=i;return p.objectLiteral(n)&&ee.is(n.range)&&(p.string(n.uri)||p.undefined(n.uri))}e.is=o})(ht||(ht={})),(function(e){function t(i,n,r,a){return{targetUri:i,targetRange:n,targetSelectionRange:r,originSelectionRange:a}}e.create=t;function o(i){let n=i;return p.objectLiteral(n)&&ee.is(n.targetRange)&&p.string(n.targetUri)&&ee.is(n.targetSelectionRange)&&(ee.is(n.originSelectionRange)||p.undefined(n.originSelectionRange))}e.is=o})($t||($t={})),(function(e){function t(i,n,r,a){return{red:i,green:n,blue:r,alpha:a}}e.create=t;function o(i){const n=i;return p.objectLiteral(n)&&p.numberRange(n.red,0,1)&&p.numberRange(n.green,0,1)&&p.numberRange(n.blue,0,1)&&p.numberRange(n.alpha,0,1)}e.is=o})(Tt||(Tt={})),(function(e){function t(i,n){return{range:i,color:n}}e.create=t;function o(i){const n=i;return p.objectLiteral(n)&&ee.is(n.range)&&Tt.is(n.color)}e.is=o})(en||(en={})),(function(e){function t(i,n,r){return{label:i,textEdit:n,additionalTextEdits:r}}e.create=t;function o(i){const n=i;return p.objectLiteral(n)&&p.string(n.label)&&(p.undefined(n.textEdit)||Se.is(n))&&(p.undefined(n.additionalTextEdits)||p.typedArray(n.additionalTextEdits,Se.is))}e.is=o})(tn||(tn={})),(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(nn||(nn={})),(function(e){function t(i,n,r,a,c,s){const u={startLine:i,endLine:n};return p.defined(r)&&(u.startCharacter=r),p.defined(a)&&(u.endCharacter=a),p.defined(c)&&(u.kind=c),p.defined(s)&&(u.collapsedText=s),u}e.create=t;function o(i){const n=i;return p.objectLiteral(n)&&p.uinteger(n.startLine)&&p.uinteger(n.startLine)&&(p.undefined(n.startCharacter)||p.uinteger(n.startCharacter))&&(p.undefined(n.endCharacter)||p.uinteger(n.endCharacter))&&(p.undefined(n.kind)||p.string(n.kind))}e.is=o})(rn||(rn={})),(function(e){function t(i,n){return{location:i,message:n}}e.create=t;function o(i){let n=i;return p.defined(n)&&ht.is(n.location)&&p.string(n.message)}e.is=o})(St||(St={})),(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(on||(on={})),(function(e){e.Unnecessary=1,e.Deprecated=2})(an||(an={})),(function(e){function t(o){const i=o;return p.objectLiteral(i)&&p.string(i.href)}e.is=t})(sn||(sn={})),(function(e){function t(i,n,r,a,c,s){let u={range:i,message:n};return p.defined(r)&&(u.severity=r),p.defined(a)&&(u.code=a),p.defined(c)&&(u.source=c),p.defined(s)&&(u.relatedInformation=s),u}e.create=t;function o(i){var n;let r=i;return p.defined(r)&&ee.is(r.range)&&p.string(r.message)&&(p.number(r.severity)||p.undefined(r.severity))&&(p.integer(r.code)||p.string(r.code)||p.undefined(r.code))&&(p.undefined(r.codeDescription)||p.string((n=r.codeDescription)===null||n===void 0?void 0:n.href))&&(p.string(r.source)||p.undefined(r.source))&&(p.undefined(r.relatedInformation)||p.typedArray(r.relatedInformation,St.is))}e.is=o})(mt||(mt={})),(function(e){function t(i,n,...r){let a={title:i,command:n};return p.defined(r)&&r.length>0&&(a.arguments=r),a}e.create=t;function o(i){let n=i;return p.defined(n)&&p.string(n.title)&&p.string(n.command)}e.is=o})(Ge||(Ge={})),(function(e){function t(r,a){return{range:r,newText:a}}e.replace=t;function o(r,a){return{range:{start:r,end:r},newText:a}}e.insert=o;function i(r){return{range:r,newText:""}}e.del=i;function n(r){const a=r;return p.objectLiteral(a)&&p.string(a.newText)&&ee.is(a.range)}e.is=n})(Se||(Se={})),(function(e){function t(i,n,r){const a={label:i};return n!==void 0&&(a.needsConfirmation=n),r!==void 0&&(a.description=r),a}e.create=t;function o(i){const n=i;return p.objectLiteral(n)&&p.string(n.label)&&(p.boolean(n.needsConfirmation)||n.needsConfirmation===void 0)&&(p.string(n.description)||n.description===void 0)}e.is=o})(Je||(Je={})),(function(e){function t(o){const i=o;return p.string(i)}e.is=t})(fe||(fe={})),(function(e){function t(r,a,c){return{range:r,newText:a,annotationId:c}}e.replace=t;function o(r,a,c){return{range:{start:r,end:r},newText:a,annotationId:c}}e.insert=o;function i(r,a){return{range:r,newText:"",annotationId:a}}e.del=i;function n(r){const a=r;return Se.is(a)&&(Je.is(a.annotationId)||fe.is(a.annotationId))}e.is=n})(Ne||(Ne={})),(function(e){function t(i,n){return{textDocument:i,edits:n}}e.create=t;function o(i){let n=i;return p.defined(n)&&yt.is(n.textDocument)&&Array.isArray(n.edits)}e.is=o})(gt||(gt={})),(function(e){function t(i,n,r){let a={kind:"create",uri:i};return n!==void 0&&(n.overwrite!==void 0||n.ignoreIfExists!==void 0)&&(a.options=n),r!==void 0&&(a.annotationId=r),a}e.create=t;function o(i){let n=i;return n&&n.kind==="create"&&p.string(n.uri)&&(n.options===void 0||(n.options.overwrite===void 0||p.boolean(n.options.overwrite))&&(n.options.ignoreIfExists===void 0||p.boolean(n.options.ignoreIfExists)))&&(n.annotationId===void 0||fe.is(n.annotationId))}e.is=o})(it||(it={})),(function(e){function t(i,n,r,a){let c={kind:"rename",oldUri:i,newUri:n};return r!==void 0&&(r.overwrite!==void 0||r.ignoreIfExists!==void 0)&&(c.options=r),a!==void 0&&(c.annotationId=a),c}e.create=t;function o(i){let n=i;return n&&n.kind==="rename"&&p.string(n.oldUri)&&p.string(n.newUri)&&(n.options===void 0||(n.options.overwrite===void 0||p.boolean(n.options.overwrite))&&(n.options.ignoreIfExists===void 0||p.boolean(n.options.ignoreIfExists)))&&(n.annotationId===void 0||fe.is(n.annotationId))}e.is=o})(rt||(rt={})),(function(e){function t(i,n,r){let a={kind:"delete",uri:i};return n!==void 0&&(n.recursive!==void 0||n.ignoreIfNotExists!==void 0)&&(a.options=n),r!==void 0&&(a.annotationId=r),a}e.create=t;function o(i){let n=i;return n&&n.kind==="delete"&&p.string(n.uri)&&(n.options===void 0||(n.options.recursive===void 0||p.boolean(n.options.recursive))&&(n.options.ignoreIfNotExists===void 0||p.boolean(n.options.ignoreIfNotExists)))&&(n.annotationId===void 0||fe.is(n.annotationId))}e.is=o})(ot||(ot={})),(function(e){function t(o){let i=o;return i&&(i.changes!==void 0||i.documentChanges!==void 0)&&(i.documentChanges===void 0||i.documentChanges.every(n=>p.string(n.kind)?it.is(n)||rt.is(n)||ot.is(n):gt.is(n)))}e.is=t})(Pt||(Pt={})),pt=class{constructor(e,t){this.edits=e,this.changeAnnotations=t}insert(e,t,o){let i,n;if(o===void 0?i=Se.insert(e,t):fe.is(o)?(n=o,i=Ne.insert(e,t,o)):(this.assertChangeAnnotations(this.changeAnnotations),n=this.changeAnnotations.manage(o),i=Ne.insert(e,t,n)),this.edits.push(i),n!==void 0)return n}replace(e,t,o){let i,n;if(o===void 0?i=Se.replace(e,t):fe.is(o)?(n=o,i=Ne.replace(e,t,o)):(this.assertChangeAnnotations(this.changeAnnotations),n=this.changeAnnotations.manage(o),i=Ne.replace(e,t,n)),this.edits.push(i),n!==void 0)return n}delete(e,t){let o,i;if(t===void 0?o=Se.del(e):fe.is(t)?(i=t,o=Ne.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(t),o=Ne.del(e,i)),this.edits.push(o),i!==void 0)return i}add(e){this.edits.push(e)}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length)}assertChangeAnnotations(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")}},cn=class{constructor(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}all(){return this._annotations}get size(){return this._size}manage(e,t){let o;if(fe.is(e)?o=e:(o=this.nextId(),t=e),this._annotations[o]!==void 0)throw new Error(`Id ${o} is already in use.`);if(t===void 0)throw new Error(`No annotation provided for id ${o}`);return this._annotations[o]=t,this._size++,o}nextId(){return this._counter++,this._counter.toString()}},yi=class{constructor(e){this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new cn(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(t=>{if(gt.is(t)){const o=new pt(t.edits,this._changeAnnotations);this._textEditChanges[t.textDocument.uri]=o}})):e.changes&&Object.keys(e.changes).forEach(t=>{const o=new pt(e.changes[t]);this._textEditChanges[t]=o})):this._workspaceEdit={}}get edit(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(e){if(yt.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");const t={uri:e.uri,version:e.version};let o=this._textEditChanges[t.uri];if(!o){const i=[],n={textDocument:t,edits:i};this._workspaceEdit.documentChanges.push(n),o=new pt(i,this._changeAnnotations),this._textEditChanges[t.uri]=o}return o}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");let t=this._textEditChanges[e];if(!t){let o=[];this._workspaceEdit.changes[e]=o,t=new pt(o),this._textEditChanges[e]=t}return t}}initDocumentChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new cn,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())}initChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))}createFile(e,t,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;Je.is(t)||fe.is(t)?i=t:o=t;let n,r;if(i===void 0?n=it.create(e,o):(r=fe.is(i)?i:this._changeAnnotations.manage(i),n=it.create(e,o,r)),this._workspaceEdit.documentChanges.push(n),r!==void 0)return r}renameFile(e,t,o,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let n;Je.is(o)||fe.is(o)?n=o:i=o;let r,a;if(n===void 0?r=rt.create(e,t,i):(a=fe.is(n)?n:this._changeAnnotations.manage(n),r=rt.create(e,t,i,a)),this._workspaceEdit.documentChanges.push(r),a!==void 0)return a}deleteFile(e,t,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;Je.is(t)||fe.is(t)?i=t:o=t;let n,r;if(i===void 0?n=ot.create(e,o):(r=fe.is(i)?i:this._changeAnnotations.manage(i),n=ot.create(e,o,r)),this._workspaceEdit.documentChanges.push(n),r!==void 0)return r}},(function(e){function t(i){return{uri:i}}e.create=t;function o(i){let n=i;return p.defined(n)&&p.string(n.uri)}e.is=o})(un||(un={})),(function(e){function t(i,n){return{uri:i,version:n}}e.create=t;function o(i){let n=i;return p.defined(n)&&p.string(n.uri)&&p.integer(n.version)}e.is=o})(ln||(ln={})),(function(e){function t(i,n){return{uri:i,version:n}}e.create=t;function o(i){let n=i;return p.defined(n)&&p.string(n.uri)&&(n.version===null||p.integer(n.version))}e.is=o})(yt||(yt={})),(function(e){function t(i,n,r,a){return{uri:i,languageId:n,version:r,text:a}}e.create=t;function o(i){let n=i;return p.defined(n)&&p.string(n.uri)&&p.string(n.languageId)&&p.integer(n.version)&&p.string(n.text)}e.is=o})(dn||(dn={})),(function(e){e.PlainText="plaintext",e.Markdown="markdown";function t(o){const i=o;return i===e.PlainText||i===e.Markdown}e.is=t})(Ct||(Ct={})),(function(e){function t(o){const i=o;return p.objectLiteral(o)&&Ct.is(i.kind)&&p.string(i.value)}e.is=t})(at||(at={})),(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(fn||(fn={})),(function(e){e.PlainText=1,e.Snippet=2})(hn||(hn={})),(function(e){e.Deprecated=1})(mn||(mn={})),(function(e){function t(i,n,r){return{newText:i,insert:n,replace:r}}e.create=t;function o(i){const n=i;return n&&p.string(n.newText)&&ee.is(n.insert)&&ee.is(n.replace)}e.is=o})(gn||(gn={})),(function(e){e.asIs=1,e.adjustIndentation=2})(pn||(pn={})),(function(e){function t(o){const i=o;return i&&(p.string(i.detail)||i.detail===void 0)&&(p.string(i.description)||i.description===void 0)}e.is=t})(yn||(yn={})),(function(e){function t(o){return{label:o}}e.create=t})(vn||(vn={})),(function(e){function t(o,i){return{items:o||[],isIncomplete:!!i}}e.create=t})(_n||(_n={})),(function(e){function t(i){return i.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function o(i){const n=i;return p.string(n)||p.objectLiteral(n)&&p.string(n.language)&&p.string(n.value)}e.is=o})(vt||(vt={})),(function(e){function t(o){let i=o;return!!i&&p.objectLiteral(i)&&(at.is(i.contents)||vt.is(i.contents)||p.typedArray(i.contents,vt.is))&&(o.range===void 0||ee.is(o.range))}e.is=t})(bn||(bn={})),(function(e){function t(o,i){return i?{label:o,documentation:i}:{label:o}}e.create=t})(Dn||(Dn={})),(function(e){function t(o,i,...n){let r={label:o};return p.defined(i)&&(r.documentation=i),p.defined(n)?r.parameters=n:r.parameters=[],r}e.create=t})(kn||(kn={})),(function(e){e.Text=1,e.Read=2,e.Write=3})(Rn||(Rn={})),(function(e){function t(o,i){let n={range:o};return p.number(i)&&(n.kind=i),n}e.create=t})(wn||(wn={})),(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(Tn||(Tn={})),(function(e){e.Deprecated=1})(Sn||(Sn={})),(function(e){function t(o,i,n,r,a){let c={name:o,kind:i,location:{uri:r,range:n}};return a&&(c.containerName=a),c}e.create=t})(Pn||(Pn={})),(function(e){function t(o,i,n,r){return r!==void 0?{name:o,kind:i,location:{uri:n,range:r}}:{name:o,kind:i,location:{uri:n}}}e.create=t})(Cn||(Cn={})),(function(e){function t(i,n,r,a,c,s){let u={name:i,detail:n,kind:r,range:a,selectionRange:c};return s!==void 0&&(u.children=s),u}e.create=t;function o(i){let n=i;return n&&p.string(n.name)&&p.number(n.kind)&&ee.is(n.range)&&ee.is(n.selectionRange)&&(n.detail===void 0||p.string(n.detail))&&(n.deprecated===void 0||p.boolean(n.deprecated))&&(n.children===void 0||Array.isArray(n.children))&&(n.tags===void 0||Array.isArray(n.tags))}e.is=o})(qn||(qn={})),(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(Mn||(Mn={})),(function(e){e.Invoked=1,e.Automatic=2})(_t||(_t={})),(function(e){function t(i,n,r){let a={diagnostics:i};return n!=null&&(a.only=n),r!=null&&(a.triggerKind=r),a}e.create=t;function o(i){let n=i;return p.defined(n)&&p.typedArray(n.diagnostics,mt.is)&&(n.only===void 0||p.typedArray(n.only,p.string))&&(n.triggerKind===void 0||n.triggerKind===_t.Invoked||n.triggerKind===_t.Automatic)}e.is=o})(En||(En={})),(function(e){function t(i,n,r){let a={title:i},c=!0;return typeof n=="string"?(c=!1,a.kind=n):Ge.is(n)?a.command=n:a.edit=n,c&&r!==void 0&&(a.kind=r),a}e.create=t;function o(i){let n=i;return n&&p.string(n.title)&&(n.diagnostics===void 0||p.typedArray(n.diagnostics,mt.is))&&(n.kind===void 0||p.string(n.kind))&&(n.edit!==void 0||n.command!==void 0)&&(n.command===void 0||Ge.is(n.command))&&(n.isPreferred===void 0||p.boolean(n.isPreferred))&&(n.edit===void 0||Pt.is(n.edit))}e.is=o})(Nn||(Nn={})),(function(e){function t(i,n){let r={range:i};return p.defined(n)&&(r.data=n),r}e.create=t;function o(i){let n=i;return p.defined(n)&&ee.is(n.range)&&(p.undefined(n.command)||Ge.is(n.command))}e.is=o})(On||(On={})),(function(e){function t(i,n){return{tabSize:i,insertSpaces:n}}e.create=t;function o(i){let n=i;return p.defined(n)&&p.uinteger(n.tabSize)&&p.boolean(n.insertSpaces)}e.is=o})(In||(In={})),(function(e){function t(i,n,r){return{range:i,target:n,data:r}}e.create=t;function o(i){let n=i;return p.defined(n)&&ee.is(n.range)&&(p.undefined(n.target)||p.string(n.target))}e.is=o})(Ln||(Ln={})),(function(e){function t(i,n){return{range:i,parent:n}}e.create=t;function o(i){let n=i;return p.objectLiteral(n)&&ee.is(n.range)&&(n.parent===void 0||e.is(n.parent))}e.is=o})(Fn||(Fn={})),(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"})(jn||(jn={})),(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(An||(An={})),(function(e){function t(o){const i=o;return p.objectLiteral(i)&&(i.resultId===void 0||typeof i.resultId=="string")&&Array.isArray(i.data)&&(i.data.length===0||typeof i.data[0]=="number")}e.is=t})(Wn||(Wn={})),(function(e){function t(i,n){return{range:i,text:n}}e.create=t;function o(i){const n=i;return n!=null&&ee.is(n.range)&&p.string(n.text)}e.is=o})(Hn||(Hn={})),(function(e){function t(i,n,r){return{range:i,variableName:n,caseSensitiveLookup:r}}e.create=t;function o(i){const n=i;return n!=null&&ee.is(n.range)&&p.boolean(n.caseSensitiveLookup)&&(p.string(n.variableName)||n.variableName===void 0)}e.is=o})(Un||(Un={})),(function(e){function t(i,n){return{range:i,expression:n}}e.create=t;function o(i){const n=i;return n!=null&&ee.is(n.range)&&(p.string(n.expression)||n.expression===void 0)}e.is=o})(Bn||(Bn={})),(function(e){function t(i,n){return{frameId:i,stoppedLocation:n}}e.create=t;function o(i){const n=i;return p.defined(n)&&ee.is(i.stoppedLocation)}e.is=o})(zn||(zn={})),(function(e){e.Type=1,e.Parameter=2;function t(o){return o===1||o===2}e.is=t})(qt||(qt={})),(function(e){function t(i){return{value:i}}e.create=t;function o(i){const n=i;return p.objectLiteral(n)&&(n.tooltip===void 0||p.string(n.tooltip)||at.is(n.tooltip))&&(n.location===void 0||ht.is(n.location))&&(n.command===void 0||Ge.is(n.command))}e.is=o})(Mt||(Mt={})),(function(e){function t(i,n,r){const a={position:i,label:n};return r!==void 0&&(a.kind=r),a}e.create=t;function o(i){const n=i;return p.objectLiteral(n)&&ye.is(n.position)&&(p.string(n.label)||p.typedArray(n.label,Mt.is))&&(n.kind===void 0||qt.is(n.kind))&&n.textEdits===void 0||p.typedArray(n.textEdits,Se.is)&&(n.tooltip===void 0||p.string(n.tooltip)||at.is(n.tooltip))&&(n.paddingLeft===void 0||p.boolean(n.paddingLeft))&&(n.paddingRight===void 0||p.boolean(n.paddingRight))}e.is=o})(Vn||(Vn={})),(function(e){function t(o){return{kind:"snippet",value:o}}e.createSnippet=t})(xn||(xn={})),(function(e){function t(o,i,n,r){return{insertText:o,filterText:i,range:n,command:r}}e.create=t})(Kn||(Kn={})),(function(e){function t(o){return{items:o}}e.create=t})(Gn||(Gn={})),(function(e){e.Invoked=0,e.Automatic=1})(Jn||(Jn={})),(function(e){function t(o,i){return{range:o,text:i}}e.create=t})(Qn||(Qn={})),(function(e){function t(o,i){return{triggerKind:o,selectedCompletionInfo:i}}e.create=t})(Xn||(Xn={})),(function(e){function t(o){const i=o;return p.objectLiteral(i)&&wt.is(i.uri)&&p.string(i.name)}e.is=t})(Yn||(Yn={})),vi=[`
`,`\r
`,"\r"],(function(e){function t(r,a,c,s){return new _i(r,a,c,s)}e.create=t;function o(r){let a=r;return!!(p.defined(a)&&p.string(a.uri)&&(p.undefined(a.languageId)||p.string(a.languageId))&&p.uinteger(a.lineCount)&&p.func(a.getText)&&p.func(a.positionAt)&&p.func(a.offsetAt))}e.is=o;function i(r,a){let c=r.getText(),s=n(a,(d,h)=>{let m=d.range.start.line-h.range.start.line;return m===0?d.range.start.character-h.range.start.character:m}),u=c.length;for(let d=s.length-1;d>=0;d--){let h=s[d],m=r.offsetAt(h.range.start),_=r.offsetAt(h.range.end);if(_<=u)c=c.substring(0,m)+h.newText+c.substring(_,c.length);else throw new Error("Overlapping edit");u=m}return c}e.applyEdits=i;function n(r,a){if(r.length<=1)return r;const c=r.length/2|0,s=r.slice(0,c),u=r.slice(c);n(s,a),n(u,a);let d=0,h=0,m=0;for(;d<s.length&&h<u.length;)a(s[d],u[h])<=0?r[m++]=s[d++]:r[m++]=u[h++];for(;d<s.length;)r[m++]=s[d++];for(;h<u.length;)r[m++]=u[h++];return r}})(Zn||(Zn={})),_i=class{constructor(e,t,o,i){this._uri=e,this._languageId=t,this._version=o,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),o=this.offsetAt(e.end);return this._content.substring(t,o)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],t=this._content,o=!0;for(let i=0;i<t.length;i++){o&&(e.push(i),o=!1);let n=t.charAt(i);o=n==="\r"||n===`
`,n==="\r"&&i+1<t.length&&t.charAt(i+1)===`
`&&i++}o&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),o=0,i=t.length;if(i===0)return ye.create(0,e);for(;o<i;){let r=Math.floor((o+i)/2);t[r]>e?i=r:o=r+1}let n=o-1;return ye.create(n,e-t[n])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let o=t[e.line],i=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(o+e.character,i),o)}get lineCount(){return this.getLineOffsets().length}},(function(e){const t=Object.prototype.toString;function o(_){return typeof _<"u"}e.defined=o;function i(_){return typeof _>"u"}e.undefined=i;function n(_){return _===!0||_===!1}e.boolean=n;function r(_){return t.call(_)==="[object String]"}e.string=r;function a(_){return t.call(_)==="[object Number]"}e.number=a;function c(_,g,S){return t.call(_)==="[object Number]"&&g<=_&&_<=S}e.numberRange=c;function s(_){return t.call(_)==="[object Number]"&&-2147483648<=_&&_<=2147483647}e.integer=s;function u(_){return t.call(_)==="[object Number]"&&0<=_&&_<=2147483647}e.uinteger=u;function d(_){return t.call(_)==="[object Function]"}e.func=d;function h(_){return _!==null&&typeof _=="object"}e.objectLiteral=h;function m(_,g){return Array.isArray(_)&&_.every(g)}e.typedArray=m})(p||(p={}))})),Z=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProtocolNotificationType=e.ProtocolNotificationType0=e.ProtocolRequestType=e.ProtocolRequestType0=e.RegistrationType=e.MessageDirection=void 0;const t=nt();var o;(function(s){s.clientToServer="clientToServer",s.serverToClient="serverToClient",s.both="both"})(o||(e.MessageDirection=o={}));var i=class{constructor(s){this.method=s}};e.RegistrationType=i;var n=class extends t.RequestType0{constructor(s){super(s)}};e.ProtocolRequestType0=n;var r=class extends t.RequestType{constructor(s){super(s,t.ParameterStructures.byName)}};e.ProtocolRequestType=r;var a=class extends t.NotificationType0{constructor(s){super(s)}};e.ProtocolNotificationType0=a;var c=class extends t.NotificationType{constructor(s){super(s,t.ParameterStructures.byName)}};e.ProtocolNotificationType=c})),ei=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.objectLiteral=e.typedArray=e.stringArray=e.array=e.func=e.error=e.number=e.string=e.boolean=void 0;function t(d){return d===!0||d===!1}e.boolean=t;function o(d){return typeof d=="string"||d instanceof String}e.string=o;function i(d){return typeof d=="number"||d instanceof Number}e.number=i;function n(d){return d instanceof Error}e.error=n;function r(d){return typeof d=="function"}e.func=r;function a(d){return Array.isArray(d)}e.array=a;function c(d){return a(d)&&d.every(h=>o(h))}e.stringArray=c;function s(d,h){return Array.isArray(d)&&d.every(h)}e.typedArray=s;function u(d){return d!==null&&typeof d=="object"}e.objectLiteral=u})),$i=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationRequest=void 0;const t=Z();var o;(function(i){i.method="textDocument/implementation",i.messageDirection=t.MessageDirection.clientToServer,i.type=new t.ProtocolRequestType(i.method)})(o||(e.ImplementationRequest=o={}))})),er=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TypeDefinitionRequest=void 0;const t=Z();var o;(function(i){i.method="textDocument/typeDefinition",i.messageDirection=t.MessageDirection.clientToServer,i.type=new t.ProtocolRequestType(i.method)})(o||(e.TypeDefinitionRequest=o={}))})),tr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=void 0;const t=Z();var o;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)})(o||(e.WorkspaceFoldersRequest=o={}));var i;(function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)})(i||(e.DidChangeWorkspaceFoldersNotification=i={}))})),nr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationRequest=void 0;const t=Z();var o;(function(i){i.method="workspace/configuration",i.messageDirection=t.MessageDirection.serverToClient,i.type=new t.ProtocolRequestType(i.method)})(o||(e.ConfigurationRequest=o={}))})),ir=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPresentationRequest=e.DocumentColorRequest=void 0;const t=Z();var o;(function(n){n.method="textDocument/documentColor",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(o||(e.DocumentColorRequest=o={}));var i;(function(n){n.method="textDocument/colorPresentation",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(i||(e.ColorPresentationRequest=i={}))})),rr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FoldingRangeRefreshRequest=e.FoldingRangeRequest=void 0;const t=Z();var o;(function(n){n.method="textDocument/foldingRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(o||(e.FoldingRangeRequest=o={}));var i;(function(n){n.method="workspace/foldingRange/refresh",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)})(i||(e.FoldingRangeRefreshRequest=i={}))})),or=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DeclarationRequest=void 0;const t=Z();var o;(function(i){i.method="textDocument/declaration",i.messageDirection=t.MessageDirection.clientToServer,i.type=new t.ProtocolRequestType(i.method)})(o||(e.DeclarationRequest=o={}))})),ar=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRangeRequest=void 0;const t=Z();var o;(function(i){i.method="textDocument/selectionRange",i.messageDirection=t.MessageDirection.clientToServer,i.type=new t.ProtocolRequestType(i.method)})(o||(e.SelectionRangeRequest=o={}))})),sr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=void 0;const t=nt(),o=Z();var i;(function(a){a.type=new t.ProgressType;function c(s){return s===a.type}a.is=c})(i||(e.WorkDoneProgress=i={}));var n;(function(a){a.method="window/workDoneProgress/create",a.messageDirection=o.MessageDirection.serverToClient,a.type=new o.ProtocolRequestType(a.method)})(n||(e.WorkDoneProgressCreateRequest=n={}));var r;(function(a){a.method="window/workDoneProgress/cancel",a.messageDirection=o.MessageDirection.clientToServer,a.type=new o.ProtocolNotificationType(a.method)})(r||(e.WorkDoneProgressCancelNotification=r={}))})),cr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.CallHierarchyPrepareRequest=void 0;const t=Z();var o;(function(r){r.method="textDocument/prepareCallHierarchy",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method)})(o||(e.CallHierarchyPrepareRequest=o={}));var i;(function(r){r.method="callHierarchy/incomingCalls",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method)})(i||(e.CallHierarchyIncomingCallsRequest=i={}));var n;(function(r){r.method="callHierarchy/outgoingCalls",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method)})(n||(e.CallHierarchyOutgoingCallsRequest=n={}))})),ur=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.SemanticTokensRegistrationType=e.TokenFormat=void 0;const t=Z();var o;(function(s){s.Relative="relative"})(o||(e.TokenFormat=o={}));var i;(function(s){s.method="textDocument/semanticTokens",s.type=new t.RegistrationType(s.method)})(i||(e.SemanticTokensRegistrationType=i={}));var n;(function(s){s.method="textDocument/semanticTokens/full",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method),s.registrationMethod=i.method})(n||(e.SemanticTokensRequest=n={}));var r;(function(s){s.method="textDocument/semanticTokens/full/delta",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method),s.registrationMethod=i.method})(r||(e.SemanticTokensDeltaRequest=r={}));var a;(function(s){s.method="textDocument/semanticTokens/range",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method),s.registrationMethod=i.method})(a||(e.SemanticTokensRangeRequest=a={}));var c;(function(s){s.method="workspace/semanticTokens/refresh",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolRequestType0(s.method)})(c||(e.SemanticTokensRefreshRequest=c={}))})),lr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShowDocumentRequest=void 0;const t=Z();var o;(function(i){i.method="window/showDocument",i.messageDirection=t.MessageDirection.serverToClient,i.type=new t.ProtocolRequestType(i.method)})(o||(e.ShowDocumentRequest=o={}))})),dr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedEditingRangeRequest=void 0;const t=Z();var o;(function(i){i.method="textDocument/linkedEditingRange",i.messageDirection=t.MessageDirection.clientToServer,i.type=new t.ProtocolRequestType(i.method)})(o||(e.LinkedEditingRangeRequest=o={}))})),fr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.DidRenameFilesNotification=e.WillRenameFilesRequest=e.DidCreateFilesNotification=e.WillCreateFilesRequest=e.FileOperationPatternKind=void 0;const t=Z();var o;(function(u){u.file="file",u.folder="folder"})(o||(e.FileOperationPatternKind=o={}));var i;(function(u){u.method="workspace/willCreateFiles",u.messageDirection=t.MessageDirection.clientToServer,u.type=new t.ProtocolRequestType(u.method)})(i||(e.WillCreateFilesRequest=i={}));var n;(function(u){u.method="workspace/didCreateFiles",u.messageDirection=t.MessageDirection.clientToServer,u.type=new t.ProtocolNotificationType(u.method)})(n||(e.DidCreateFilesNotification=n={}));var r;(function(u){u.method="workspace/willRenameFiles",u.messageDirection=t.MessageDirection.clientToServer,u.type=new t.ProtocolRequestType(u.method)})(r||(e.WillRenameFilesRequest=r={}));var a;(function(u){u.method="workspace/didRenameFiles",u.messageDirection=t.MessageDirection.clientToServer,u.type=new t.ProtocolNotificationType(u.method)})(a||(e.DidRenameFilesNotification=a={}));var c;(function(u){u.method="workspace/didDeleteFiles",u.messageDirection=t.MessageDirection.clientToServer,u.type=new t.ProtocolNotificationType(u.method)})(c||(e.DidDeleteFilesNotification=c={}));var s;(function(u){u.method="workspace/willDeleteFiles",u.messageDirection=t.MessageDirection.clientToServer,u.type=new t.ProtocolRequestType(u.method)})(s||(e.WillDeleteFilesRequest=s={}))})),hr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=void 0;const t=Z();var o;(function(r){r.document="document",r.project="project",r.group="group",r.scheme="scheme",r.global="global"})(o||(e.UniquenessLevel=o={}));var i;(function(r){r.$import="import",r.$export="export",r.local="local"})(i||(e.MonikerKind=i={}));var n;(function(r){r.method="textDocument/moniker",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method)})(n||(e.MonikerRequest=n={}))})),mr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TypeHierarchySubtypesRequest=e.TypeHierarchySupertypesRequest=e.TypeHierarchyPrepareRequest=void 0;const t=Z();var o;(function(r){r.method="textDocument/prepareTypeHierarchy",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method)})(o||(e.TypeHierarchyPrepareRequest=o={}));var i;(function(r){r.method="typeHierarchy/supertypes",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method)})(i||(e.TypeHierarchySupertypesRequest=i={}));var n;(function(r){r.method="typeHierarchy/subtypes",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method)})(n||(e.TypeHierarchySubtypesRequest=n={}))})),gr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InlineValueRefreshRequest=e.InlineValueRequest=void 0;const t=Z();var o;(function(n){n.method="textDocument/inlineValue",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(o||(e.InlineValueRequest=o={}));var i;(function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)})(i||(e.InlineValueRefreshRequest=i={}))})),pr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=void 0;const t=Z();var o;(function(r){r.method="textDocument/inlayHint",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method)})(o||(e.InlayHintRequest=o={}));var i;(function(r){r.method="inlayHint/resolve",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method)})(i||(e.InlayHintResolveRequest=i={}));var n;(function(r){r.method="workspace/inlayHint/refresh",r.messageDirection=t.MessageDirection.serverToClient,r.type=new t.ProtocolRequestType0(r.method)})(n||(e.InlayHintRefreshRequest=n={}))})),yr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=void 0;const t=nt(),o=ei(),i=Z();var n;(function(u){function d(h){const m=h;return m&&o.boolean(m.retriggerRequest)}u.is=d})(n||(e.DiagnosticServerCancellationData=n={}));var r;(function(u){u.Full="full",u.Unchanged="unchanged"})(r||(e.DocumentDiagnosticReportKind=r={}));var a;(function(u){u.method="textDocument/diagnostic",u.messageDirection=i.MessageDirection.clientToServer,u.type=new i.ProtocolRequestType(u.method),u.partialResult=new t.ProgressType})(a||(e.DocumentDiagnosticRequest=a={}));var c;(function(u){u.method="workspace/diagnostic",u.messageDirection=i.MessageDirection.clientToServer,u.type=new i.ProtocolRequestType(u.method),u.partialResult=new t.ProgressType})(c||(e.WorkspaceDiagnosticRequest=c={}));var s;(function(u){u.method="workspace/diagnostic/refresh",u.messageDirection=i.MessageDirection.serverToClient,u.type=new i.ProtocolRequestType0(u.method)})(s||(e.DiagnosticRefreshRequest=s={}))})),vr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=void 0;const t=($n(),Gt(Xt)),o=ei(),i=Z();var n;(function(g){g.Markup=1,g.Code=2;function S(I){return I===1||I===2}g.is=S})(n||(e.NotebookCellKind=n={}));var r;(function(g){function S(q,P){const L={executionOrder:q};return(P===!0||P===!1)&&(L.success=P),L}g.create=S;function I(q){const P=q;return o.objectLiteral(P)&&t.uinteger.is(P.executionOrder)&&(P.success===void 0||o.boolean(P.success))}g.is=I;function M(q,P){return q===P?!0:q==null||P===null||P===void 0?!1:q.executionOrder===P.executionOrder&&q.success===P.success}g.equals=M})(r||(e.ExecutionSummary=r={}));var a;(function(g){function S(P,L){return{kind:P,document:L}}g.create=S;function I(P){const L=P;return o.objectLiteral(L)&&n.is(L.kind)&&t.DocumentUri.is(L.document)&&(L.metadata===void 0||o.objectLiteral(L.metadata))}g.is=I;function M(P,L){const V=new Set;return P.document!==L.document&&V.add("document"),P.kind!==L.kind&&V.add("kind"),P.executionSummary!==L.executionSummary&&V.add("executionSummary"),(P.metadata!==void 0||L.metadata!==void 0)&&!q(P.metadata,L.metadata)&&V.add("metadata"),(P.executionSummary!==void 0||L.executionSummary!==void 0)&&!r.equals(P.executionSummary,L.executionSummary)&&V.add("executionSummary"),V}g.diff=M;function q(P,L){if(P===L)return!0;if(P==null||L===null||L===void 0||typeof P!=typeof L||typeof P!="object")return!1;const V=Array.isArray(P),z=Array.isArray(L);if(V!==z)return!1;if(V&&z){if(P.length!==L.length)return!1;for(let W=0;W<P.length;W++)if(!q(P[W],L[W]))return!1}if(o.objectLiteral(P)&&o.objectLiteral(L)){const W=Object.keys(P),J=Object.keys(L);if(W.length!==J.length||(W.sort(),J.sort(),!q(W,J)))return!1;for(let te=0;te<W.length;te++){const he=W[te];if(!q(P[he],L[he]))return!1}}return!0}})(a||(e.NotebookCell=a={}));var c;(function(g){function S(M,q,P,L){return{uri:M,notebookType:q,version:P,cells:L}}g.create=S;function I(M){const q=M;return o.objectLiteral(q)&&o.string(q.uri)&&t.integer.is(q.version)&&o.typedArray(q.cells,a.is)}g.is=I})(c||(e.NotebookDocument=c={}));var s;(function(g){g.method="notebookDocument/sync",g.messageDirection=i.MessageDirection.clientToServer,g.type=new i.RegistrationType(g.method)})(s||(e.NotebookDocumentSyncRegistrationType=s={}));var u;(function(g){g.method="notebookDocument/didOpen",g.messageDirection=i.MessageDirection.clientToServer,g.type=new i.ProtocolNotificationType(g.method),g.registrationMethod=s.method})(u||(e.DidOpenNotebookDocumentNotification=u={}));var d;(function(g){function S(M){const q=M;return o.objectLiteral(q)&&t.uinteger.is(q.start)&&t.uinteger.is(q.deleteCount)&&(q.cells===void 0||o.typedArray(q.cells,a.is))}g.is=S;function I(M,q,P){const L={start:M,deleteCount:q};return P!==void 0&&(L.cells=P),L}g.create=I})(d||(e.NotebookCellArrayChange=d={}));var h;(function(g){g.method="notebookDocument/didChange",g.messageDirection=i.MessageDirection.clientToServer,g.type=new i.ProtocolNotificationType(g.method),g.registrationMethod=s.method})(h||(e.DidChangeNotebookDocumentNotification=h={}));var m;(function(g){g.method="notebookDocument/didSave",g.messageDirection=i.MessageDirection.clientToServer,g.type=new i.ProtocolNotificationType(g.method),g.registrationMethod=s.method})(m||(e.DidSaveNotebookDocumentNotification=m={}));var _;(function(g){g.method="notebookDocument/didClose",g.messageDirection=i.MessageDirection.clientToServer,g.type=new i.ProtocolNotificationType(g.method),g.registrationMethod=s.method})(_||(e.DidCloseNotebookDocumentNotification=_={}))})),_r=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InlineCompletionRequest=void 0;const t=Z();var o;(function(i){i.method="textDocument/inlineCompletion",i.messageDirection=t.MessageDirection.clientToServer,i.type=new t.ProtocolRequestType(i.method)})(o||(e.InlineCompletionRequest=o={}))})),br=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspaceSymbolRequest=e.CodeActionResolveRequest=e.CodeActionRequest=e.DocumentSymbolRequest=e.DocumentHighlightRequest=e.ReferencesRequest=e.DefinitionRequest=e.SignatureHelpRequest=e.SignatureHelpTriggerKind=e.HoverRequest=e.CompletionResolveRequest=e.CompletionRequest=e.CompletionTriggerKind=e.PublishDiagnosticsNotification=e.WatchKind=e.RelativePattern=e.FileChangeType=e.DidChangeWatchedFilesNotification=e.WillSaveTextDocumentWaitUntilRequest=e.WillSaveTextDocumentNotification=e.TextDocumentSaveReason=e.DidSaveTextDocumentNotification=e.DidCloseTextDocumentNotification=e.DidChangeTextDocumentNotification=e.TextDocumentContentChangeEvent=e.DidOpenTextDocumentNotification=e.TextDocumentSyncKind=e.TelemetryEventNotification=e.LogMessageNotification=e.ShowMessageRequest=e.ShowMessageNotification=e.MessageType=e.DidChangeConfigurationNotification=e.ExitNotification=e.ShutdownRequest=e.InitializedNotification=e.InitializeErrorCodes=e.InitializeRequest=e.WorkDoneProgressOptions=e.TextDocumentRegistrationOptions=e.StaticRegistrationOptions=e.PositionEncodingKind=e.FailureHandlingKind=e.ResourceOperationKind=e.UnregistrationRequest=e.RegistrationRequest=e.DocumentSelector=e.NotebookCellTextDocumentFilter=e.NotebookDocumentFilter=e.TextDocumentFilter=void 0,e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.WillRenameFilesRequest=e.DidRenameFilesNotification=e.WillCreateFilesRequest=e.DidCreateFilesNotification=e.FileOperationPatternKind=e.LinkedEditingRangeRequest=e.ShowDocumentRequest=e.SemanticTokensRegistrationType=e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.TokenFormat=e.CallHierarchyPrepareRequest=e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=e.SelectionRangeRequest=e.DeclarationRequest=e.FoldingRangeRefreshRequest=e.FoldingRangeRequest=e.ColorPresentationRequest=e.DocumentColorRequest=e.ConfigurationRequest=e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=e.TypeDefinitionRequest=e.ImplementationRequest=e.ApplyWorkspaceEditRequest=e.ExecuteCommandRequest=e.PrepareRenameRequest=e.RenameRequest=e.PrepareSupportDefaultBehavior=e.DocumentOnTypeFormattingRequest=e.DocumentRangesFormattingRequest=e.DocumentRangeFormattingRequest=e.DocumentFormattingRequest=e.DocumentLinkResolveRequest=e.DocumentLinkRequest=e.CodeLensRefreshRequest=e.CodeLensResolveRequest=e.CodeLensRequest=e.WorkspaceSymbolResolveRequest=void 0,e.InlineCompletionRequest=e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=e.InlineValueRefreshRequest=e.InlineValueRequest=e.TypeHierarchySupertypesRequest=e.TypeHierarchySubtypesRequest=e.TypeHierarchyPrepareRequest=void 0;const t=Z(),o=($n(),Gt(Xt)),i=ei(),n=$i();Object.defineProperty(e,"ImplementationRequest",{enumerable:!0,get:function(){return n.ImplementationRequest}});const r=er();Object.defineProperty(e,"TypeDefinitionRequest",{enumerable:!0,get:function(){return r.TypeDefinitionRequest}});const a=tr();Object.defineProperty(e,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return a.WorkspaceFoldersRequest}}),Object.defineProperty(e,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return a.DidChangeWorkspaceFoldersNotification}});const c=nr();Object.defineProperty(e,"ConfigurationRequest",{enumerable:!0,get:function(){return c.ConfigurationRequest}});const s=ir();Object.defineProperty(e,"DocumentColorRequest",{enumerable:!0,get:function(){return s.DocumentColorRequest}}),Object.defineProperty(e,"ColorPresentationRequest",{enumerable:!0,get:function(){return s.ColorPresentationRequest}});const u=rr();Object.defineProperty(e,"FoldingRangeRequest",{enumerable:!0,get:function(){return u.FoldingRangeRequest}}),Object.defineProperty(e,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return u.FoldingRangeRefreshRequest}});const d=or();Object.defineProperty(e,"DeclarationRequest",{enumerable:!0,get:function(){return d.DeclarationRequest}});const h=ar();Object.defineProperty(e,"SelectionRangeRequest",{enumerable:!0,get:function(){return h.SelectionRangeRequest}});const m=sr();Object.defineProperty(e,"WorkDoneProgress",{enumerable:!0,get:function(){return m.WorkDoneProgress}}),Object.defineProperty(e,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return m.WorkDoneProgressCreateRequest}}),Object.defineProperty(e,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return m.WorkDoneProgressCancelNotification}});const _=cr();Object.defineProperty(e,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return _.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(e,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return _.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(e,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return _.CallHierarchyPrepareRequest}});const g=ur();Object.defineProperty(e,"TokenFormat",{enumerable:!0,get:function(){return g.TokenFormat}}),Object.defineProperty(e,"SemanticTokensRequest",{enumerable:!0,get:function(){return g.SemanticTokensRequest}}),Object.defineProperty(e,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return g.SemanticTokensDeltaRequest}}),Object.defineProperty(e,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return g.SemanticTokensRangeRequest}}),Object.defineProperty(e,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return g.SemanticTokensRefreshRequest}}),Object.defineProperty(e,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return g.SemanticTokensRegistrationType}});const S=lr();Object.defineProperty(e,"ShowDocumentRequest",{enumerable:!0,get:function(){return S.ShowDocumentRequest}});const I=dr();Object.defineProperty(e,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return I.LinkedEditingRangeRequest}});const M=fr();Object.defineProperty(e,"FileOperationPatternKind",{enumerable:!0,get:function(){return M.FileOperationPatternKind}}),Object.defineProperty(e,"DidCreateFilesNotification",{enumerable:!0,get:function(){return M.DidCreateFilesNotification}}),Object.defineProperty(e,"WillCreateFilesRequest",{enumerable:!0,get:function(){return M.WillCreateFilesRequest}}),Object.defineProperty(e,"DidRenameFilesNotification",{enumerable:!0,get:function(){return M.DidRenameFilesNotification}}),Object.defineProperty(e,"WillRenameFilesRequest",{enumerable:!0,get:function(){return M.WillRenameFilesRequest}}),Object.defineProperty(e,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return M.DidDeleteFilesNotification}}),Object.defineProperty(e,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return M.WillDeleteFilesRequest}});const q=hr();Object.defineProperty(e,"UniquenessLevel",{enumerable:!0,get:function(){return q.UniquenessLevel}}),Object.defineProperty(e,"MonikerKind",{enumerable:!0,get:function(){return q.MonikerKind}}),Object.defineProperty(e,"MonikerRequest",{enumerable:!0,get:function(){return q.MonikerRequest}});const P=mr();Object.defineProperty(e,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return P.TypeHierarchyPrepareRequest}}),Object.defineProperty(e,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return P.TypeHierarchySubtypesRequest}}),Object.defineProperty(e,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return P.TypeHierarchySupertypesRequest}});const L=gr();Object.defineProperty(e,"InlineValueRequest",{enumerable:!0,get:function(){return L.InlineValueRequest}}),Object.defineProperty(e,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return L.InlineValueRefreshRequest}});const V=pr();Object.defineProperty(e,"InlayHintRequest",{enumerable:!0,get:function(){return V.InlayHintRequest}}),Object.defineProperty(e,"InlayHintResolveRequest",{enumerable:!0,get:function(){return V.InlayHintResolveRequest}}),Object.defineProperty(e,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return V.InlayHintRefreshRequest}});const z=yr();Object.defineProperty(e,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return z.DiagnosticServerCancellationData}}),Object.defineProperty(e,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return z.DocumentDiagnosticReportKind}}),Object.defineProperty(e,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return z.DocumentDiagnosticRequest}}),Object.defineProperty(e,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return z.WorkspaceDiagnosticRequest}}),Object.defineProperty(e,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return z.DiagnosticRefreshRequest}});const W=vr();Object.defineProperty(e,"NotebookCellKind",{enumerable:!0,get:function(){return W.NotebookCellKind}}),Object.defineProperty(e,"ExecutionSummary",{enumerable:!0,get:function(){return W.ExecutionSummary}}),Object.defineProperty(e,"NotebookCell",{enumerable:!0,get:function(){return W.NotebookCell}}),Object.defineProperty(e,"NotebookDocument",{enumerable:!0,get:function(){return W.NotebookDocument}}),Object.defineProperty(e,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return W.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(e,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return W.DidOpenNotebookDocumentNotification}}),Object.defineProperty(e,"NotebookCellArrayChange",{enumerable:!0,get:function(){return W.NotebookCellArrayChange}}),Object.defineProperty(e,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return W.DidChangeNotebookDocumentNotification}}),Object.defineProperty(e,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return W.DidSaveNotebookDocumentNotification}}),Object.defineProperty(e,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return W.DidCloseNotebookDocumentNotification}});const J=_r();Object.defineProperty(e,"InlineCompletionRequest",{enumerable:!0,get:function(){return J.InlineCompletionRequest}});var te;(function(l){function oe(ae){const B=ae;return i.string(B)||i.string(B.language)||i.string(B.scheme)||i.string(B.pattern)}l.is=oe})(te||(e.TextDocumentFilter=te={}));var he;(function(l){function oe(ae){const B=ae;return i.objectLiteral(B)&&(i.string(B.notebookType)||i.string(B.scheme)||i.string(B.pattern))}l.is=oe})(he||(e.NotebookDocumentFilter=he={}));var re;(function(l){function oe(ae){const B=ae;return i.objectLiteral(B)&&(i.string(B.notebook)||he.is(B.notebook))&&(B.language===void 0||i.string(B.language))}l.is=oe})(re||(e.NotebookCellTextDocumentFilter=re={}));var be;(function(l){function oe(ae){if(!Array.isArray(ae))return!1;for(let B of ae)if(!i.string(B)&&!te.is(B)&&!re.is(B))return!1;return!0}l.is=oe})(be||(e.DocumentSelector=be={}));var y;(function(l){l.method="client/registerCapability",l.messageDirection=t.MessageDirection.serverToClient,l.type=new t.ProtocolRequestType(l.method)})(y||(e.RegistrationRequest=y={}));var O;(function(l){l.method="client/unregisterCapability",l.messageDirection=t.MessageDirection.serverToClient,l.type=new t.ProtocolRequestType(l.method)})(O||(e.UnregistrationRequest=O={}));var H;(function(l){l.Create="create",l.Rename="rename",l.Delete="delete"})(H||(e.ResourceOperationKind=H={}));var A;(function(l){l.Abort="abort",l.Transactional="transactional",l.TextOnlyTransactional="textOnlyTransactional",l.Undo="undo"})(A||(e.FailureHandlingKind=A={}));var K;(function(l){l.UTF8="utf-8",l.UTF16="utf-16",l.UTF32="utf-32"})(K||(e.PositionEncodingKind=K={}));var ne;(function(l){function oe(ae){const B=ae;return B&&i.string(B.id)&&B.id.length>0}l.hasId=oe})(ne||(e.StaticRegistrationOptions=ne={}));var Ze;(function(l){function oe(ae){const B=ae;return B&&(B.documentSelector===null||be.is(B.documentSelector))}l.is=oe})(Ze||(e.TextDocumentRegistrationOptions=Ze={}));var $e;(function(l){function oe(B){const f=B;return i.objectLiteral(f)&&(f.workDoneProgress===void 0||i.boolean(f.workDoneProgress))}l.is=oe;function ae(B){const f=B;return f&&i.boolean(f.workDoneProgress)}l.hasWorkDoneProgress=ae})($e||(e.WorkDoneProgressOptions=$e={}));var De;(function(l){l.method="initialize",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(De||(e.InitializeRequest=De={}));var ke;(function(l){l.unknownProtocolVersion=1})(ke||(e.InitializeErrorCodes=ke={}));var Pe;(function(l){l.method="initialized",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolNotificationType(l.method)})(Pe||(e.InitializedNotification=Pe={}));var Re;(function(l){l.method="shutdown",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType0(l.method)})(Re||(e.ShutdownRequest=Re={}));var Ce;(function(l){l.method="exit",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolNotificationType0(l.method)})(Ce||(e.ExitNotification=Ce={}));var qe;(function(l){l.method="workspace/didChangeConfiguration",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolNotificationType(l.method)})(qe||(e.DidChangeConfigurationNotification=qe={}));var Oe;(function(l){l.Error=1,l.Warning=2,l.Info=3,l.Log=4,l.Debug=5})(Oe||(e.MessageType=Oe={}));var pe;(function(l){l.method="window/showMessage",l.messageDirection=t.MessageDirection.serverToClient,l.type=new t.ProtocolNotificationType(l.method)})(pe||(e.ShowMessageNotification=pe={}));var ve;(function(l){l.method="window/showMessageRequest",l.messageDirection=t.MessageDirection.serverToClient,l.type=new t.ProtocolRequestType(l.method)})(ve||(e.ShowMessageRequest=ve={}));var Ie;(function(l){l.method="window/logMessage",l.messageDirection=t.MessageDirection.serverToClient,l.type=new t.ProtocolNotificationType(l.method)})(Ie||(e.LogMessageNotification=Ie={}));var v;(function(l){l.method="telemetry/event",l.messageDirection=t.MessageDirection.serverToClient,l.type=new t.ProtocolNotificationType(l.method)})(v||(e.TelemetryEventNotification=v={}));var w;(function(l){l.None=0,l.Full=1,l.Incremental=2})(w||(e.TextDocumentSyncKind=w={}));var T;(function(l){l.method="textDocument/didOpen",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolNotificationType(l.method)})(T||(e.DidOpenTextDocumentNotification=T={}));var U;(function(l){function oe(B){let f=B;return f!=null&&typeof f.text=="string"&&f.range!==void 0&&(f.rangeLength===void 0||typeof f.rangeLength=="number")}l.isIncremental=oe;function ae(B){let f=B;return f!=null&&typeof f.text=="string"&&f.range===void 0&&f.rangeLength===void 0}l.isFull=ae})(U||(e.TextDocumentContentChangeEvent=U={}));var k;(function(l){l.method="textDocument/didChange",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolNotificationType(l.method)})(k||(e.DidChangeTextDocumentNotification=k={}));var de;(function(l){l.method="textDocument/didClose",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolNotificationType(l.method)})(de||(e.DidCloseTextDocumentNotification=de={}));var we;(function(l){l.method="textDocument/didSave",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolNotificationType(l.method)})(we||(e.DidSaveTextDocumentNotification=we={}));var He;(function(l){l.Manual=1,l.AfterDelay=2,l.FocusOut=3})(He||(e.TextDocumentSaveReason=He={}));var Ue;(function(l){l.method="textDocument/willSave",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolNotificationType(l.method)})(Ue||(e.WillSaveTextDocumentNotification=Ue={}));var Be;(function(l){l.method="textDocument/willSaveWaitUntil",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(Be||(e.WillSaveTextDocumentWaitUntilRequest=Be={}));var ge;(function(l){l.method="workspace/didChangeWatchedFiles",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolNotificationType(l.method)})(ge||(e.DidChangeWatchedFilesNotification=ge={}));var ze;(function(l){l.Created=1,l.Changed=2,l.Deleted=3})(ze||(e.FileChangeType=ze={}));var Le;(function(l){function oe(ae){const B=ae;return i.objectLiteral(B)&&(o.URI.is(B.baseUri)||o.WorkspaceFolder.is(B.baseUri))&&i.string(B.pattern)}l.is=oe})(Le||(e.RelativePattern=Le={}));var ct;(function(l){l.Create=1,l.Change=2,l.Delete=4})(ct||(e.WatchKind=ct={}));var Fe;(function(l){l.method="textDocument/publishDiagnostics",l.messageDirection=t.MessageDirection.serverToClient,l.type=new t.ProtocolNotificationType(l.method)})(Fe||(e.PublishDiagnosticsNotification=Fe={}));var je;(function(l){l.Invoked=1,l.TriggerCharacter=2,l.TriggerForIncompleteCompletions=3})(je||(e.CompletionTriggerKind=je={}));var Me;(function(l){l.method="textDocument/completion",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(Me||(e.CompletionRequest=Me={}));var _e;(function(l){l.method="completionItem/resolve",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(_e||(e.CompletionResolveRequest=_e={}));var b;(function(l){l.method="textDocument/hover",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(b||(e.HoverRequest=b={}));var D;(function(l){l.Invoked=1,l.TriggerCharacter=2,l.ContentChange=3})(D||(e.SignatureHelpTriggerKind=D={}));var E;(function(l){l.method="textDocument/signatureHelp",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(E||(e.SignatureHelpRequest=E={}));var ue;(function(l){l.method="textDocument/definition",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(ue||(e.DefinitionRequest=ue={}));var et;(function(l){l.method="textDocument/references",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(et||(e.ReferencesRequest=et={}));var kt;(function(l){l.method="textDocument/documentHighlight",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(kt||(e.DocumentHighlightRequest=kt={}));var Nt;(function(l){l.method="textDocument/documentSymbol",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(Nt||(e.DocumentSymbolRequest=Nt={}));var Ot;(function(l){l.method="textDocument/codeAction",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(Ot||(e.CodeActionRequest=Ot={}));var It;(function(l){l.method="codeAction/resolve",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(It||(e.CodeActionResolveRequest=It={}));var Lt;(function(l){l.method="workspace/symbol",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(Lt||(e.WorkspaceSymbolRequest=Lt={}));var Ft;(function(l){l.method="workspaceSymbol/resolve",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(Ft||(e.WorkspaceSymbolResolveRequest=Ft={}));var jt;(function(l){l.method="textDocument/codeLens",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(jt||(e.CodeLensRequest=jt={}));var Te;(function(l){l.method="codeLens/resolve",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(Te||(e.CodeLensResolveRequest=Te={}));var At;(function(l){l.method="workspace/codeLens/refresh",l.messageDirection=t.MessageDirection.serverToClient,l.type=new t.ProtocolRequestType0(l.method)})(At||(e.CodeLensRefreshRequest=At={}));var Wt;(function(l){l.method="textDocument/documentLink",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(Wt||(e.DocumentLinkRequest=Wt={}));var tt;(function(l){l.method="documentLink/resolve",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(tt||(e.DocumentLinkResolveRequest=tt={}));var Ht;(function(l){l.method="textDocument/formatting",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(Ht||(e.DocumentFormattingRequest=Ht={}));var ut;(function(l){l.method="textDocument/rangeFormatting",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(ut||(e.DocumentRangeFormattingRequest=ut={}));var Ut;(function(l){l.method="textDocument/rangesFormatting",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(Ut||(e.DocumentRangesFormattingRequest=Ut={}));var Ae;(function(l){l.method="textDocument/onTypeFormatting",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(Ae||(e.DocumentOnTypeFormattingRequest=Ae={}));var Ve;(function(l){l.Identifier=1})(Ve||(e.PrepareSupportDefaultBehavior=Ve={}));var Bt;(function(l){l.method="textDocument/rename",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(Bt||(e.RenameRequest=Bt={}));var zt;(function(l){l.method="textDocument/prepareRename",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(zt||(e.PrepareRenameRequest=zt={}));var xe;(function(l){l.method="workspace/executeCommand",l.messageDirection=t.MessageDirection.clientToServer,l.type=new t.ProtocolRequestType(l.method)})(xe||(e.ExecuteCommandRequest=xe={}));var Rt;(function(l){l.method="workspace/applyEdit",l.messageDirection=t.MessageDirection.serverToClient,l.type=new t.ProtocolRequestType("workspace/applyEdit")})(Rt||(e.ApplyWorkspaceEditRequest=Rt={}))})),Dr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createProtocolConnection=void 0;const t=nt();function o(i,n,r,a){return t.ConnectionStrategy.is(a)&&(a={connectionStrategy:a}),(0,t.createMessageConnection)(i,n,r,a)}e.createProtocolConnection=o})),kr=N((e=>{var t=e&&e.__createBinding||(Object.create?(function(r,a,c,s){s===void 0&&(s=c);var u=Object.getOwnPropertyDescriptor(a,c);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(r,s,u)}):(function(r,a,c,s){s===void 0&&(s=c),r[s]=a[c]})),o=e&&e.__exportStar||function(r,a){for(var c in r)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&t(a,r,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.LSPErrorCodes=e.createProtocolConnection=void 0,o(nt(),e),o(($n(),Gt(Xt)),e),o(Z(),e),o(br(),e);var i=Dr();Object.defineProperty(e,"createProtocolConnection",{enumerable:!0,get:function(){return i.createProtocolConnection}});var n;(function(r){r.lspReservedErrorRangeStart=-32899,r.RequestFailed=-32803,r.ServerCancelled=-32802,r.ContentModified=-32801,r.RequestCancelled=-32800,r.lspReservedErrorRangeEnd=-32800})(n||(e.LSPErrorCodes=n={}))})),ce=N((e=>{var t=e&&e.__createBinding||(Object.create?(function(r,a,c,s){s===void 0&&(s=c);var u=Object.getOwnPropertyDescriptor(a,c);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(r,s,u)}):(function(r,a,c,s){s===void 0&&(s=c),r[s]=a[c]})),o=e&&e.__exportStar||function(r,a){for(var c in r)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&t(a,r,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.createProtocolConnection=void 0;const i=pi();o(pi(),e),o(kr(),e);function n(r,a,c,s){return(0,i.createMessageConnection)(r,a,c,s)}e.createProtocolConnection=n})),bi=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticTokensBuilder=e.SemanticTokensDiff=e.SemanticTokensFeature=void 0;const t=ce(),o=r=>class extends r{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(t.SemanticTokensRefreshRequest.type),on:a=>{const c=t.SemanticTokensRequest.type;return this.connection.onRequest(c,(s,u)=>a(s,u,this.attachWorkDoneProgress(s),this.attachPartialResultProgress(c,s)))},onDelta:a=>{const c=t.SemanticTokensDeltaRequest.type;return this.connection.onRequest(c,(s,u)=>a(s,u,this.attachWorkDoneProgress(s),this.attachPartialResultProgress(c,s)))},onRange:a=>{const c=t.SemanticTokensRangeRequest.type;return this.connection.onRequest(c,(s,u)=>a(s,u,this.attachWorkDoneProgress(s),this.attachPartialResultProgress(c,s)))}}}};e.SemanticTokensFeature=o;var i=class{constructor(r,a){this.originalSequence=r,this.modifiedSequence=a}computeDiff(){const r=this.originalSequence.length,a=this.modifiedSequence.length;let c=0;for(;c<a&&c<r&&this.originalSequence[c]===this.modifiedSequence[c];)c++;if(c<a&&c<r){let s=r-1,u=a-1;for(;s>=c&&u>=c&&this.originalSequence[s]===this.modifiedSequence[u];)s--,u--;(s<c||u<c)&&(s++,u++);const d=s-c+1,h=this.modifiedSequence.slice(c,u+1);return h.length===1&&h[0]===this.originalSequence[s]?[{start:c,deleteCount:d-1}]:[{start:c,deleteCount:d,data:h}]}else return c<a?[{start:c,deleteCount:0,data:this.modifiedSequence.slice(c)}]:c<r?[{start:c,deleteCount:r-c}]:[]}};e.SemanticTokensDiff=i;var n=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(r,a,c,s,u){let d=r,h=a;this._dataLen>0&&(d-=this._prevLine,d===0&&(h-=this._prevChar)),this._data[this._dataLen++]=d,this._data[this._dataLen++]=h,this._data[this._dataLen++]=c,this._data[this._dataLen++]=s,this._data[this._dataLen++]=u,this._prevLine=r,this._prevChar=a}get id(){return this._id.toString()}previousResult(r){this.id===r&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new i(this._prevData,this._data).computeDiff()}:this.build()}};e.SemanticTokensBuilder=n})),Rr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InlineCompletionFeature=void 0;const t=ce(),o=i=>class extends i{get inlineCompletion(){return{on:n=>this.connection.onRequest(t.InlineCompletionRequest.type,(r,a)=>n(r,a,this.attachWorkDoneProgress(r)))}}};e.InlineCompletionFeature=o})),Di=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocuments=void 0;const t=ce();var o=class{constructor(i){this._configuration=i,this._syncedDocuments=new Map,this._onDidChangeContent=new t.Emitter,this._onDidOpen=new t.Emitter,this._onDidClose=new t.Emitter,this._onDidSave=new t.Emitter,this._onWillSave=new t.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(i){this._willSaveWaitUntil=i}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(i){return this._syncedDocuments.get(i)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(i){i.__textDocumentSync=t.TextDocumentSyncKind.Incremental;const n=[];return n.push(i.onDidOpenTextDocument(r=>{const a=r.textDocument,c=this._configuration.create(a.uri,a.languageId,a.version,a.text);this._syncedDocuments.set(a.uri,c);const s=Object.freeze({document:c});this._onDidOpen.fire(s),this._onDidChangeContent.fire(s)})),n.push(i.onDidChangeTextDocument(r=>{const a=r.textDocument,c=r.contentChanges;if(c.length===0)return;const{version:s}=a;if(s==null)throw new Error(`Received document change event for ${a.uri} without valid version identifier`);let u=this._syncedDocuments.get(a.uri);u!==void 0&&(u=this._configuration.update(u,c,s),this._syncedDocuments.set(a.uri,u),this._onDidChangeContent.fire(Object.freeze({document:u})))})),n.push(i.onDidCloseTextDocument(r=>{let a=this._syncedDocuments.get(r.textDocument.uri);a!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:a})))})),n.push(i.onWillSaveTextDocument(r=>{let a=this._syncedDocuments.get(r.textDocument.uri);a!==void 0&&this._onWillSave.fire(Object.freeze({document:a,reason:r.reason}))})),n.push(i.onWillSaveTextDocumentWaitUntil((r,a)=>{let c=this._syncedDocuments.get(r.textDocument.uri);return c!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:c,reason:r.reason}),a):[]})),n.push(i.onDidSaveTextDocument(r=>{let a=this._syncedDocuments.get(r.textDocument.uri);a!==void 0&&this._onDidSave.fire(Object.freeze({document:a}))})),t.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};e.TextDocuments=o})),ki=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NotebookDocuments=e.NotebookSyncFeature=void 0;const t=ce(),o=Di(),i=a=>class extends a{get synchronization(){return{onDidOpenNotebookDocument:c=>this.connection.onNotification(t.DidOpenNotebookDocumentNotification.type,s=>{c(s)}),onDidChangeNotebookDocument:c=>this.connection.onNotification(t.DidChangeNotebookDocumentNotification.type,s=>{c(s)}),onDidSaveNotebookDocument:c=>this.connection.onNotification(t.DidSaveNotebookDocumentNotification.type,s=>{c(s)}),onDidCloseNotebookDocument:c=>this.connection.onNotification(t.DidCloseNotebookDocumentNotification.type,s=>{c(s)})}}};e.NotebookSyncFeature=i;var n=class xt{onDidOpenTextDocument(c){return this.openHandler=c,t.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(c){this.openHandler&&this.openHandler(c)}onDidChangeTextDocument(c){return this.changeHandler=c,t.Disposable.create(()=>{this.changeHandler=c})}changeTextDocument(c){this.changeHandler&&this.changeHandler(c)}onDidCloseTextDocument(c){return this.closeHandler=c,t.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(c){this.closeHandler&&this.closeHandler(c)}onWillSaveTextDocument(){return xt.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return xt.NULL_DISPOSE}onDidSaveTextDocument(){return xt.NULL_DISPOSE}};n.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var r=class{constructor(a){a instanceof o.TextDocuments?this._cellTextDocuments=a:this._cellTextDocuments=new o.TextDocuments(a),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new t.Emitter,this._onDidChange=new t.Emitter,this._onDidSave=new t.Emitter,this._onDidClose=new t.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(a){return this._cellTextDocuments.get(a.document)}getNotebookDocument(a){return this.notebookDocuments.get(a)}getNotebookCell(a){const c=this.notebookCellMap.get(a);return c&&c[0]}findNotebookDocumentForCell(a){const c=typeof a=="string"?a:a.document,s=this.notebookCellMap.get(c);return s&&s[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(a){const c=new n,s=[];return s.push(this.cellTextDocuments.listen(c)),s.push(a.notebooks.synchronization.onDidOpenNotebookDocument(u=>{this.notebookDocuments.set(u.notebookDocument.uri,u.notebookDocument);for(const d of u.cellTextDocuments)c.openTextDocument({textDocument:d});this.updateCellMap(u.notebookDocument),this._onDidOpen.fire(u.notebookDocument)})),s.push(a.notebooks.synchronization.onDidChangeNotebookDocument(u=>{const d=this.notebookDocuments.get(u.notebookDocument.uri);if(d===void 0)return;d.version=u.notebookDocument.version;const h=d.metadata;let m=!1;const _=u.change;_.metadata!==void 0&&(m=!0,d.metadata=_.metadata);const g=[],S=[],I=[],M=[];if(_.cells!==void 0){const z=_.cells;if(z.structure!==void 0){const W=z.structure.array;if(d.cells.splice(W.start,W.deleteCount,...W.cells!==void 0?W.cells:[]),z.structure.didOpen!==void 0)for(const J of z.structure.didOpen)c.openTextDocument({textDocument:J}),g.push(J.uri);if(z.structure.didClose)for(const J of z.structure.didClose)c.closeTextDocument({textDocument:J}),S.push(J.uri)}if(z.data!==void 0){const W=new Map(z.data.map(J=>[J.document,J]));for(let J=0;J<=d.cells.length;J++){const te=W.get(d.cells[J].document);if(te!==void 0){const he=d.cells.splice(J,1,te);if(I.push({old:he[0],new:te}),W.delete(te.document),W.size===0)break}}}if(z.textContent!==void 0)for(const W of z.textContent)c.changeTextDocument({textDocument:W.document,contentChanges:W.changes}),M.push(W.document.uri)}this.updateCellMap(d);const q={notebookDocument:d};m&&(q.metadata={old:h,new:d.metadata});const P=[];for(const z of g)P.push(this.getNotebookCell(z));const L=[];for(const z of S)L.push(this.getNotebookCell(z));const V=[];for(const z of M)V.push(this.getNotebookCell(z));(P.length>0||L.length>0||I.length>0||V.length>0)&&(q.cells={added:P,removed:L,changed:{data:I,textContent:V}}),(q.metadata!==void 0||q.cells!==void 0)&&this._onDidChange.fire(q)})),s.push(a.notebooks.synchronization.onDidSaveNotebookDocument(u=>{const d=this.notebookDocuments.get(u.notebookDocument.uri);d!==void 0&&this._onDidSave.fire(d)})),s.push(a.notebooks.synchronization.onDidCloseNotebookDocument(u=>{const d=this.notebookDocuments.get(u.notebookDocument.uri);if(d!==void 0){this._onDidClose.fire(d);for(const h of u.cellTextDocuments)c.closeTextDocument({textDocument:h});this.notebookDocuments.delete(u.notebookDocument.uri);for(const h of d.cells)this.notebookCellMap.delete(h.document)}})),t.Disposable.create(()=>{s.forEach(u=>u.dispose())})}updateCellMap(a){for(const c of a.cells)this.notebookCellMap.set(c.document,[c,a])}};e.NotebookDocuments=r})),Ri=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.thenable=e.typedArray=e.stringArray=e.array=e.func=e.error=e.number=e.string=e.boolean=void 0;function t(d){return d===!0||d===!1}e.boolean=t;function o(d){return typeof d=="string"||d instanceof String}e.string=o;function i(d){return typeof d=="number"||d instanceof Number}e.number=i;function n(d){return d instanceof Error}e.error=n;function r(d){return typeof d=="function"}e.func=r;function a(d){return Array.isArray(d)}e.array=a;function c(d){return a(d)&&d.every(h=>o(h))}e.stringArray=c;function s(d,h){return Array.isArray(d)&&d.every(h)}e.typedArray=s;function u(d){return d&&r(d.then)}e.thenable=u})),wi=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.generateUuid=e.parse=e.isUUID=e.v4=e.empty=void 0;var t=class{constructor(s){this._value=s}asHex(){return this._value}equals(s){return this.asHex()===s.asHex()}},o=class x extends t{static _oneOf(u){return u[Math.floor(u.length*Math.random())]}static _randomHex(){return x._oneOf(x._chars)}constructor(){super([x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),"-",x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),"-","4",x._randomHex(),x._randomHex(),x._randomHex(),"-",x._oneOf(x._timeHighBits),x._randomHex(),x._randomHex(),x._randomHex(),"-",x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex(),x._randomHex()].join(""))}};o._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],o._timeHighBits=["8","9","a","b"],e.empty=new t("00000000-0000-0000-0000-000000000000");function i(){return new o}e.v4=i;const n=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function r(s){return n.test(s)}e.isUUID=r;function a(s){if(!r(s))throw new Error("invalid uuid");return new t(s)}e.parse=a;function c(){return i().asHex()}e.generateUuid=c})),wr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.attachPartialResult=e.ProgressFeature=e.attachWorkDone=void 0;const t=ce(),o=wi();var i=class li{constructor(_,g){this._connection=_,this._token=g,li.Instances.set(this._token,this)}begin(_,g,S,I){let M={kind:"begin",title:_,percentage:g,message:S,cancellable:I};this._connection.sendProgress(t.WorkDoneProgress.type,this._token,M)}report(_,g){let S={kind:"report"};typeof _=="number"?(S.percentage=_,g!==void 0&&(S.message=g)):S.message=_,this._connection.sendProgress(t.WorkDoneProgress.type,this._token,S)}done(){li.Instances.delete(this._token),this._connection.sendProgress(t.WorkDoneProgress.type,this._token,{kind:"end"})}};i.Instances=new Map;var n=class extends i{constructor(m,_){super(m,_),this._source=new t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},r=class{constructor(){}begin(){}report(){}done(){}},a=class extends r{constructor(){super(),this._source=new t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function c(m,_){if(_===void 0||_.workDoneToken===void 0)return new r;const g=_.workDoneToken;return delete _.workDoneToken,new i(m,g)}e.attachWorkDone=c;const s=m=>class extends m{constructor(){super(),this._progressSupported=!1}initialize(_){super.initialize(_),_?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(t.WorkDoneProgressCancelNotification.type,g=>{let S=i.Instances.get(g.token);(S instanceof n||S instanceof a)&&S.cancel()}))}attachWorkDoneProgress(_){return _===void 0?new r:new i(this.connection,_)}createWorkDoneProgress(){if(this._progressSupported){const _=(0,o.generateUuid)();return this.connection.sendRequest(t.WorkDoneProgressCreateRequest.type,{token:_}).then(()=>new n(this.connection,_))}else return Promise.resolve(new a)}};e.ProgressFeature=s;var u;(function(m){m.type=new t.ProgressType})(u||(u={}));var d=class{constructor(m,_){this._connection=m,this._token=_}report(m){this._connection.sendProgress(u.type,this._token,m)}};function h(m,_){if(_===void 0||_.partialResultToken===void 0)return;const g=_.partialResultToken;return delete _.partialResultToken,new d(m,g)}e.attachPartialResult=h})),Tr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationFeature=void 0;const t=ce(),o=Ri(),i=n=>class extends n{getConfiguration(r){return r?o.string(r)?this._getConfiguration({section:r}):this._getConfiguration(r):this._getConfiguration({})}_getConfiguration(r){let a={items:Array.isArray(r)?r:[r]};return this.connection.sendRequest(t.ConfigurationRequest.type,a).then(c=>Array.isArray(c)?Array.isArray(r)?c:c[0]:Array.isArray(r)?[]:null)}};e.ConfigurationFeature=i})),Sr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspaceFoldersFeature=void 0;const t=ce(),o=i=>class extends i{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(n){super.initialize(n);let r=n.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new t.Emitter,this.connection.onNotification(t.DidChangeWorkspaceFoldersNotification.type,a=>{this._onDidChangeWorkspaceFolders.fire(a.event)}))}fillServerCapabilities(n){super.fillServerCapabilities(n);const r=n.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(t.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(t.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};e.WorkspaceFoldersFeature=o})),Pr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CallHierarchyFeature=void 0;const t=ce(),o=i=>class extends i{get callHierarchy(){return{onPrepare:n=>this.connection.onRequest(t.CallHierarchyPrepareRequest.type,(r,a)=>n(r,a,this.attachWorkDoneProgress(r),void 0)),onIncomingCalls:n=>{const r=t.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(a,c)=>n(a,c,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(r,a)))},onOutgoingCalls:n=>{const r=t.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(a,c)=>n(a,c,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(r,a)))}}}};e.CallHierarchyFeature=o})),Cr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShowDocumentFeature=void 0;const t=ce(),o=i=>class extends i{showDocument(n){return this.connection.sendRequest(t.ShowDocumentRequest.type,n)}};e.ShowDocumentFeature=o})),qr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FileOperationsFeature=void 0;const t=ce(),o=i=>class extends i{onDidCreateFiles(n){return this.connection.onNotification(t.DidCreateFilesNotification.type,r=>{n(r)})}onDidRenameFiles(n){return this.connection.onNotification(t.DidRenameFilesNotification.type,r=>{n(r)})}onDidDeleteFiles(n){return this.connection.onNotification(t.DidDeleteFilesNotification.type,r=>{n(r)})}onWillCreateFiles(n){return this.connection.onRequest(t.WillCreateFilesRequest.type,(r,a)=>n(r,a))}onWillRenameFiles(n){return this.connection.onRequest(t.WillRenameFilesRequest.type,(r,a)=>n(r,a))}onWillDeleteFiles(n){return this.connection.onRequest(t.WillDeleteFilesRequest.type,(r,a)=>n(r,a))}};e.FileOperationsFeature=o})),Mr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedEditingRangeFeature=void 0;const t=ce(),o=i=>class extends i{onLinkedEditingRange(n){return this.connection.onRequest(t.LinkedEditingRangeRequest.type,(r,a)=>n(r,a,this.attachWorkDoneProgress(r),void 0))}};e.LinkedEditingRangeFeature=o})),Er=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TypeHierarchyFeature=void 0;const t=ce(),o=i=>class extends i{get typeHierarchy(){return{onPrepare:n=>this.connection.onRequest(t.TypeHierarchyPrepareRequest.type,(r,a)=>n(r,a,this.attachWorkDoneProgress(r),void 0)),onSupertypes:n=>{const r=t.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(a,c)=>n(a,c,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(r,a)))},onSubtypes:n=>{const r=t.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(a,c)=>n(a,c,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(r,a)))}}}};e.TypeHierarchyFeature=o})),Nr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InlineValueFeature=void 0;const t=ce(),o=i=>class extends i{get inlineValue(){return{refresh:()=>this.connection.sendRequest(t.InlineValueRefreshRequest.type),on:n=>this.connection.onRequest(t.InlineValueRequest.type,(r,a)=>n(r,a,this.attachWorkDoneProgress(r)))}}};e.InlineValueFeature=o})),Or=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FoldingRangeFeature=void 0;const t=ce(),o=i=>class extends i{get foldingRange(){return{refresh:()=>this.connection.sendRequest(t.FoldingRangeRefreshRequest.type),on:n=>{const r=t.FoldingRangeRequest.type;return this.connection.onRequest(r,(a,c)=>n(a,c,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(r,a)))}}}};e.FoldingRangeFeature=o})),Ir=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InlayHintFeature=void 0;const t=ce(),o=i=>class extends i{get inlayHint(){return{refresh:()=>this.connection.sendRequest(t.InlayHintRefreshRequest.type),on:n=>this.connection.onRequest(t.InlayHintRequest.type,(r,a)=>n(r,a,this.attachWorkDoneProgress(r))),resolve:n=>this.connection.onRequest(t.InlayHintResolveRequest.type,(r,a)=>n(r,a))}}};e.InlayHintFeature=o})),Lr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticFeature=void 0;const t=ce(),o=i=>class extends i{get diagnostics(){return{refresh:()=>this.connection.sendRequest(t.DiagnosticRefreshRequest.type),on:n=>this.connection.onRequest(t.DocumentDiagnosticRequest.type,(r,a)=>n(r,a,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t.DocumentDiagnosticRequest.partialResult,r))),onWorkspace:n=>this.connection.onRequest(t.WorkspaceDiagnosticRequest.type,(r,a)=>n(r,a,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t.WorkspaceDiagnosticRequest.partialResult,r)))}}};e.DiagnosticFeature=o})),Fr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MonikerFeature=void 0;const t=ce(),o=i=>class extends i{get moniker(){return{on:n=>{const r=t.MonikerRequest.type;return this.connection.onRequest(r,(a,c)=>n(a,c,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(r,a)))}}}};e.MonikerFeature=o})),jr=N((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createConnection=e.combineFeatures=e.combineNotebooksFeatures=e.combineLanguagesFeatures=e.combineWorkspaceFeatures=e.combineWindowFeatures=e.combineClientFeatures=e.combineTracerFeatures=e.combineTelemetryFeatures=e.combineConsoleFeatures=e._NotebooksImpl=e._LanguagesImpl=e.BulkUnregistration=e.BulkRegistration=e.ErrorMessageTracker=void 0;const t=ce(),o=Ri(),i=wi(),n=wr(),r=Tr(),a=Sr(),c=Pr(),s=bi(),u=Cr(),d=qr(),h=Mr(),m=Er(),_=Nr(),g=Or(),S=Ir(),I=Lr(),M=ki(),q=Fr();function P(v){if(v!==null)return v}var L=class{constructor(){this._messages=Object.create(null)}add(v){let w=this._messages[v];w||(w=0),w++,this._messages[v]=w}sendErrors(v){Object.keys(this._messages).forEach(w=>{v.window.showErrorMessage(w)})}};e.ErrorMessageTracker=L;var V=class{constructor(){}rawAttach(v){this._rawConnection=v}attach(v){this._connection=v}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(v){}initialize(v){}error(v){this.send(t.MessageType.Error,v)}warn(v){this.send(t.MessageType.Warning,v)}info(v){this.send(t.MessageType.Info,v)}log(v){this.send(t.MessageType.Log,v)}debug(v){this.send(t.MessageType.Debug,v)}send(v,w){this._rawConnection&&this._rawConnection.sendNotification(t.LogMessageNotification.type,{type:v,message:w}).catch(()=>{(0,t.RAL)().console.error("Sending log message failed")})}},z=class{constructor(){}attach(v){this._connection=v}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(v){}fillServerCapabilities(v){}showErrorMessage(v,...w){let T={type:t.MessageType.Error,message:v,actions:w};return this.connection.sendRequest(t.ShowMessageRequest.type,T).then(P)}showWarningMessage(v,...w){let T={type:t.MessageType.Warning,message:v,actions:w};return this.connection.sendRequest(t.ShowMessageRequest.type,T).then(P)}showInformationMessage(v,...w){let T={type:t.MessageType.Info,message:v,actions:w};return this.connection.sendRequest(t.ShowMessageRequest.type,T).then(P)}};const W=(0,u.ShowDocumentFeature)((0,n.ProgressFeature)(z));var J;(function(v){function w(){return new te}v.create=w})(J||(e.BulkRegistration=J={}));var te=class{constructor(){this._registrations=[],this._registered=new Set}add(v,w){const T=o.string(v)?v:v.method;if(this._registered.has(T))throw new Error(`${T} is already added to this registration`);const U=i.generateUuid();this._registrations.push({id:U,method:T,registerOptions:w||{}}),this._registered.add(T)}asRegistrationParams(){return{registrations:this._registrations}}},he;(function(v){function w(){return new re(void 0,[])}v.create=w})(he||(e.BulkUnregistration=he={}));var re=class{constructor(v,w){this._connection=v,this._unregistrations=new Map,w.forEach(T=>{this._unregistrations.set(T.method,T)})}get isAttached(){return!!this._connection}attach(v){this._connection=v}add(v){this._unregistrations.set(v.method,v)}dispose(){let v=[];for(let T of this._unregistrations.values())v.push(T);let w={unregisterations:v};this._connection.sendRequest(t.UnregistrationRequest.type,w).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(v){const w=o.string(v)?v:v.method,T=this._unregistrations.get(w);if(!T)return!1;let U={unregisterations:[T]};return this._connection.sendRequest(t.UnregistrationRequest.type,U).then(()=>{this._unregistrations.delete(w)},k=>{this._connection.console.info(`Un-registering request handler for ${T.id} failed.`)}),!0}},be=class{attach(v){this._connection=v}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(v){}fillServerCapabilities(v){}register(v,w,T){return v instanceof te?this.registerMany(v):v instanceof re?this.registerSingle1(v,w,T):this.registerSingle2(v,w)}registerSingle1(v,w,T){const U=o.string(w)?w:w.method,k=i.generateUuid();let de={registrations:[{id:k,method:U,registerOptions:T||{}}]};return v.isAttached||v.attach(this.connection),this.connection.sendRequest(t.RegistrationRequest.type,de).then(we=>(v.add({id:k,method:U}),v),we=>(this.connection.console.info(`Registering request handler for ${U} failed.`),Promise.reject(we)))}registerSingle2(v,w){const T=o.string(v)?v:v.method,U=i.generateUuid();let k={registrations:[{id:U,method:T,registerOptions:w||{}}]};return this.connection.sendRequest(t.RegistrationRequest.type,k).then(de=>t.Disposable.create(()=>{this.unregisterSingle(U,T).catch(()=>{this.connection.console.info(`Un-registering capability with id ${U} failed.`)})}),de=>(this.connection.console.info(`Registering request handler for ${T} failed.`),Promise.reject(de)))}unregisterSingle(v,w){let T={unregisterations:[{id:v,method:w}]};return this.connection.sendRequest(t.UnregistrationRequest.type,T).catch(()=>{this.connection.console.info(`Un-registering request handler for ${v} failed.`)})}registerMany(v){let w=v.asRegistrationParams();return this.connection.sendRequest(t.RegistrationRequest.type,w).then(()=>new re(this._connection,w.registrations.map(T=>({id:T.id,method:T.method}))),T=>(this.connection.console.info("Bulk registration failed."),Promise.reject(T)))}},y=class{constructor(){}attach(v){this._connection=v}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(v){}fillServerCapabilities(v){}applyEdit(v){function w(U){return U&&!!U.edit}let T=w(v)?v:{edit:v};return this.connection.sendRequest(t.ApplyWorkspaceEditRequest.type,T)}};const O=(0,d.FileOperationsFeature)((0,a.WorkspaceFoldersFeature)((0,r.ConfigurationFeature)(y)));var H=class{constructor(){this._trace=t.Trace.Off}attach(v){this._connection=v}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(v){}fillServerCapabilities(v){}set trace(v){this._trace=v}log(v,w){this._trace!==t.Trace.Off&&this.connection.sendNotification(t.LogTraceNotification.type,{message:v,verbose:this._trace===t.Trace.Verbose?w:void 0}).catch(()=>{})}},A=class{constructor(){}attach(v){this._connection=v}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(v){}fillServerCapabilities(v){}logEvent(v){this.connection.sendNotification(t.TelemetryEventNotification.type,v).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},K=class{constructor(){}attach(v){this._connection=v}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(v){}fillServerCapabilities(v){}attachWorkDoneProgress(v){return(0,n.attachWorkDone)(this.connection,v)}attachPartialResultProgress(v,w){return(0,n.attachPartialResult)(this.connection,w)}};e._LanguagesImpl=K;const ne=(0,g.FoldingRangeFeature)((0,q.MonikerFeature)((0,I.DiagnosticFeature)((0,S.InlayHintFeature)((0,_.InlineValueFeature)((0,m.TypeHierarchyFeature)((0,h.LinkedEditingRangeFeature)((0,s.SemanticTokensFeature)((0,c.CallHierarchyFeature)(K)))))))));var Ze=class{constructor(){}attach(v){this._connection=v}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(v){}fillServerCapabilities(v){}attachWorkDoneProgress(v){return(0,n.attachWorkDone)(this.connection,v)}attachPartialResultProgress(v,w){return(0,n.attachPartialResult)(this.connection,w)}};e._NotebooksImpl=Ze;const $e=(0,M.NotebookSyncFeature)(Ze);function De(v,w){return function(T){return w(v(T))}}e.combineConsoleFeatures=De;function ke(v,w){return function(T){return w(v(T))}}e.combineTelemetryFeatures=ke;function Pe(v,w){return function(T){return w(v(T))}}e.combineTracerFeatures=Pe;function Re(v,w){return function(T){return w(v(T))}}e.combineClientFeatures=Re;function Ce(v,w){return function(T){return w(v(T))}}e.combineWindowFeatures=Ce;function qe(v,w){return function(T){return w(v(T))}}e.combineWorkspaceFeatures=qe;function Oe(v,w){return function(T){return w(v(T))}}e.combineLanguagesFeatures=Oe;function pe(v,w){return function(T){return w(v(T))}}e.combineNotebooksFeatures=pe;function ve(v,w){function T(U,k,de){return U&&k?de(U,k):U||k}return{__brand:"features",console:T(v.console,w.console,De),tracer:T(v.tracer,w.tracer,Pe),telemetry:T(v.telemetry,w.telemetry,ke),client:T(v.client,w.client,Re),window:T(v.window,w.window,Ce),workspace:T(v.workspace,w.workspace,qe),languages:T(v.languages,w.languages,Oe),notebooks:T(v.notebooks,w.notebooks,pe)}}e.combineFeatures=ve;function Ie(v,w,T){const U=T&&T.console?new(T.console(V)):new V,k=v(U);U.rawAttach(k);const de=T&&T.tracer?new(T.tracer(H)):new H,we=T&&T.telemetry?new(T.telemetry(A)):new A,He=T&&T.client?new(T.client(be)):new be,Ue=T&&T.window?new(T.window(W)):new W,Be=T&&T.workspace?new(T.workspace(O)):new O,ge=T&&T.languages?new(T.languages(ne)):new ne,ze=T&&T.notebooks?new(T.notebooks($e)):new $e,Le=[U,de,we,He,Ue,Be,ge,ze];function ct(b){return b instanceof Promise?b:o.thenable(b)?new Promise((D,E)=>{b.then(ue=>D(ue),ue=>E(ue))}):Promise.resolve(b)}let Fe,je,Me,_e={listen:()=>k.listen(),sendRequest:(b,...D)=>k.sendRequest(o.string(b)?b:b.method,...D),onRequest:(b,D)=>k.onRequest(b,D),sendNotification:(b,D)=>{const E=o.string(b)?b:b.method;return k.sendNotification(E,D)},onNotification:(b,D)=>k.onNotification(b,D),onProgress:k.onProgress,sendProgress:k.sendProgress,onInitialize:b=>(je=b,{dispose:()=>{je=void 0}}),onInitialized:b=>k.onNotification(t.InitializedNotification.type,b),onShutdown:b=>(Fe=b,{dispose:()=>{Fe=void 0}}),onExit:b=>(Me=b,{dispose:()=>{Me=void 0}}),get console(){return U},get telemetry(){return we},get tracer(){return de},get client(){return He},get window(){return Ue},get workspace(){return Be},get languages(){return ge},get notebooks(){return ze},onDidChangeConfiguration:b=>k.onNotification(t.DidChangeConfigurationNotification.type,b),onDidChangeWatchedFiles:b=>k.onNotification(t.DidChangeWatchedFilesNotification.type,b),__textDocumentSync:void 0,onDidOpenTextDocument:b=>k.onNotification(t.DidOpenTextDocumentNotification.type,b),onDidChangeTextDocument:b=>k.onNotification(t.DidChangeTextDocumentNotification.type,b),onDidCloseTextDocument:b=>k.onNotification(t.DidCloseTextDocumentNotification.type,b),onWillSaveTextDocument:b=>k.onNotification(t.WillSaveTextDocumentNotification.type,b),onWillSaveTextDocumentWaitUntil:b=>k.onRequest(t.WillSaveTextDocumentWaitUntilRequest.type,b),onDidSaveTextDocument:b=>k.onNotification(t.DidSaveTextDocumentNotification.type,b),sendDiagnostics:b=>k.sendNotification(t.PublishDiagnosticsNotification.type,b),onHover:b=>k.onRequest(t.HoverRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),void 0)),onCompletion:b=>k.onRequest(t.CompletionRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onCompletionResolve:b=>k.onRequest(t.CompletionResolveRequest.type,b),onSignatureHelp:b=>k.onRequest(t.SignatureHelpRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),void 0)),onDeclaration:b=>k.onRequest(t.DeclarationRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onDefinition:b=>k.onRequest(t.DefinitionRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onTypeDefinition:b=>k.onRequest(t.TypeDefinitionRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onImplementation:b=>k.onRequest(t.ImplementationRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onReferences:b=>k.onRequest(t.ReferencesRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onDocumentHighlight:b=>k.onRequest(t.DocumentHighlightRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onDocumentSymbol:b=>k.onRequest(t.DocumentSymbolRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onWorkspaceSymbol:b=>k.onRequest(t.WorkspaceSymbolRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onWorkspaceSymbolResolve:b=>k.onRequest(t.WorkspaceSymbolResolveRequest.type,b),onCodeAction:b=>k.onRequest(t.CodeActionRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onCodeActionResolve:b=>k.onRequest(t.CodeActionResolveRequest.type,(D,E)=>b(D,E)),onCodeLens:b=>k.onRequest(t.CodeLensRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onCodeLensResolve:b=>k.onRequest(t.CodeLensResolveRequest.type,(D,E)=>b(D,E)),onDocumentFormatting:b=>k.onRequest(t.DocumentFormattingRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),void 0)),onDocumentRangeFormatting:b=>k.onRequest(t.DocumentRangeFormattingRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),void 0)),onDocumentOnTypeFormatting:b=>k.onRequest(t.DocumentOnTypeFormattingRequest.type,(D,E)=>b(D,E)),onRenameRequest:b=>k.onRequest(t.RenameRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),void 0)),onPrepareRename:b=>k.onRequest(t.PrepareRenameRequest.type,(D,E)=>b(D,E)),onDocumentLinks:b=>k.onRequest(t.DocumentLinkRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onDocumentLinkResolve:b=>k.onRequest(t.DocumentLinkResolveRequest.type,(D,E)=>b(D,E)),onDocumentColor:b=>k.onRequest(t.DocumentColorRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onColorPresentation:b=>k.onRequest(t.ColorPresentationRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onFoldingRanges:b=>k.onRequest(t.FoldingRangeRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onSelectionRanges:b=>k.onRequest(t.SelectionRangeRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),(0,n.attachPartialResult)(k,D))),onExecuteCommand:b=>k.onRequest(t.ExecuteCommandRequest.type,(D,E)=>b(D,E,(0,n.attachWorkDone)(k,D),void 0)),dispose:()=>k.dispose()};for(let b of Le)b.attach(_e);return k.onRequest(t.InitializeRequest.type,b=>{w.initialize(b),o.string(b.trace)&&(de.trace=t.Trace.fromString(b.trace));for(let D of Le)D.initialize(b.capabilities);if(je)return ct(je(b,new t.CancellationTokenSource().token,(0,n.attachWorkDone)(k,b),void 0)).then(D=>{if(D instanceof t.ResponseError)return D;let E=D;E||(E={capabilities:{}});let ue=E.capabilities;ue||(ue={},E.capabilities=ue),ue.textDocumentSync===void 0||ue.textDocumentSync===null?ue.textDocumentSync=o.number(_e.__textDocumentSync)?_e.__textDocumentSync:t.TextDocumentSyncKind.None:!o.number(ue.textDocumentSync)&&!o.number(ue.textDocumentSync.change)&&(ue.textDocumentSync.change=o.number(_e.__textDocumentSync)?_e.__textDocumentSync:t.TextDocumentSyncKind.None);for(let et of Le)et.fillServerCapabilities(ue);return E});{let D={capabilities:{textDocumentSync:t.TextDocumentSyncKind.None}};for(let E of Le)E.fillServerCapabilities(D.capabilities);return D}}),k.onRequest(t.ShutdownRequest.type,()=>{if(w.shutdownReceived=!0,Fe)return Fe(new t.CancellationTokenSource().token)}),k.onNotification(t.ExitNotification.type,()=>{try{Me&&Me()}finally{w.shutdownReceived?w.exit(0):w.exit(1)}}),k.onNotification(t.SetTraceNotification.type,b=>{de.trace=t.Trace.fromString(b.value)}),_e}e.createConnection=Ie})),Ti=N((e=>{var t=e&&e.__createBinding||(Object.create?(function(s,u,d,h){h===void 0&&(h=d);var m=Object.getOwnPropertyDescriptor(u,d);(!m||("get"in m?!u.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(s,h,m)}):(function(s,u,d,h){h===void 0&&(h=d),s[h]=u[d]})),o=e&&e.__exportStar||function(s,u){for(var d in s)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&t(u,s,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.ProposedFeatures=e.NotebookDocuments=e.TextDocuments=e.SemanticTokensBuilder=void 0;const i=bi();Object.defineProperty(e,"SemanticTokensBuilder",{enumerable:!0,get:function(){return i.SemanticTokensBuilder}});const n=Rr();o(ce(),e);const r=Di();Object.defineProperty(e,"TextDocuments",{enumerable:!0,get:function(){return r.TextDocuments}});const a=ki();Object.defineProperty(e,"NotebookDocuments",{enumerable:!0,get:function(){return a.NotebookDocuments}}),o(jr(),e);var c;(function(s){s.all={__brand:"features",languages:n.InlineCompletionFeature}})(c||(e.ProposedFeatures=c={}))})),Ar=N(((e,t)=>{t.exports=ce()})),ti=N((e=>{var t=e&&e.__createBinding||(Object.create?(function(c,s,u,d){d===void 0&&(d=u);var h=Object.getOwnPropertyDescriptor(s,u);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(c,d,h)}):(function(c,s,u,d){d===void 0&&(d=u),c[d]=s[u]})),o=e&&e.__exportStar||function(c,s){for(var u in c)u!=="default"&&!Object.prototype.hasOwnProperty.call(s,u)&&t(s,c,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.createConnection=void 0;const i=Ti();o(Ar(),e),o(Ti(),e);let n=!1;const r={initialize:c=>{},get shutdownReceived(){return n},set shutdownReceived(c){n=c},exit:c=>{}};function a(c,s,u,d){let h,m,_,g;c!==void 0&&c.__brand==="features"&&(h=c,c=s,s=u,u=d),i.ConnectionStrategy.is(c)||i.ConnectionOptions.is(c)?g=c:(m=c,_=s,g=u);const S=I=>(0,i.createProtocolConnection)(m,_,I,g);return(0,i.createConnection)(S,r,h)}e.createConnection=a})),j=ti(),Si=class di{constructor(t,o,i,n){this._uri=t,this._languageId=o,this._version=i,this._content=n,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){const o=this.offsetAt(t.start),i=this.offsetAt(t.end);return this._content.substring(o,i)}return this._content}update(t,o){for(const i of t)if(di.isIncremental(i)){const n=qi(i.range),r=this.offsetAt(n.start),a=this.offsetAt(n.end);this._content=this._content.substring(0,r)+i.text+this._content.substring(a,this._content.length);const c=Math.max(n.start.line,0),s=Math.max(n.end.line,0);let u=this._lineOffsets;const d=Pi(i.text,!1,r);if(s-c===d.length)for(let m=0,_=d.length;m<_;m++)u[m+c+1]=d[m];else d.length<1e4?u.splice(c+1,s-c,...d):this._lineOffsets=u=u.slice(0,c+1).concat(d,u.slice(s+1));const h=i.text.length-(a-r);if(h!==0)for(let m=c+1+d.length,_=u.length;m<_;m++)u[m]=u[m]+h}else if(di.isFull(i))this._content=i.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=o}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Pi(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);const o=this.getLineOffsets();let i=0,n=o.length;if(n===0)return{line:0,character:t};for(;i<n;){const a=Math.floor((i+n)/2);o[a]>t?n=a:i=a+1}const r=i-1;return t=this.ensureBeforeEOL(t,o[r]),{line:r,character:t-o[r]}}offsetAt(t){const o=this.getLineOffsets();if(t.line>=o.length)return this._content.length;if(t.line<0)return 0;const i=o[t.line];if(t.character<=0)return i;const n=t.line+1<o.length?o[t.line+1]:this._content.length,r=Math.min(i+t.character,n);return this.ensureBeforeEOL(r,i)}ensureBeforeEOL(t,o){for(;t>o&&Ci(this._content.charCodeAt(t-1));)t--;return t}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){const o=t;return o!=null&&typeof o.text=="string"&&o.range!==void 0&&(o.rangeLength===void 0||typeof o.rangeLength=="number")}static isFull(t){const o=t;return o!=null&&typeof o.text=="string"&&o.range===void 0&&o.rangeLength===void 0}},ni;(function(e){function t(n,r,a,c){return new Si(n,r,a,c)}e.create=t;function o(n,r,a){if(n instanceof Si)return n.update(r,a),n;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=o;function i(n,r){const a=n.getText(),c=ii(r.map(Wr),(d,h)=>{const m=d.range.start.line-h.range.start.line;return m===0?d.range.start.character-h.range.start.character:m});let s=0;const u=[];for(const d of c){const h=n.offsetAt(d.range.start);if(h<s)throw new Error("Overlapping edit");h>s&&u.push(a.substring(s,h)),d.newText.length&&u.push(d.newText),s=n.offsetAt(d.range.end)}return u.push(a.substr(s)),u.join("")}e.applyEdits=i})(ni||(ni={}));function ii(e,t){if(e.length<=1)return e;const o=e.length/2|0,i=e.slice(0,o),n=e.slice(o);ii(i,t),ii(n,t);let r=0,a=0,c=0;for(;r<i.length&&a<n.length;)t(i[r],n[a])<=0?e[c++]=i[r++]:e[c++]=n[a++];for(;r<i.length;)e[c++]=i[r++];for(;a<n.length;)e[c++]=n[a++];return e}function Pi(e,t,o=0){const i=t?[o]:[];for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);Ci(r)&&(r===13&&n+1<e.length&&e.charCodeAt(n+1)===10&&n++,i.push(o+n+1))}return i}function Ci(e){return e===13||e===10}function qi(e){const t=e.start,o=e.end;return t.line>o.line||t.line===o.line&&t.character>o.character?{start:o,end:t}:e}function Wr(e){const t=qi(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var Hr=N(((e,t)=>{t.exports=ti()})),Qe=Hr();const Mi=[{label:"global",kind:"keyword",detail:"Global Section",documentation:"Global configuration section",insertText:`global {
	\${0}
}`,isSnippet:!0},{label:"subscription",kind:"keyword",detail:"Subscription Section",documentation:"Define proxy subscriptions",insertText:`subscription {
	\${0}
}`,isSnippet:!0},{label:"node",kind:"keyword",detail:"Node Section",documentation:"Define proxy nodes",insertText:`node {
	\${0}
}`,isSnippet:!0},{label:"dns",kind:"keyword",detail:"DNS Section",documentation:"DNS configuration section",insertText:`dns {
	\${0}
}`,isSnippet:!0},{label:"group",kind:"keyword",detail:"Group Section",documentation:"Proxy group configuration",insertText:`group {
	\${0}
}`,isSnippet:!0},{label:"routing",kind:"keyword",detail:"Routing Section",documentation:"Routing rules configuration",insertText:`routing {
	\${0}
}`,isSnippet:!0},{label:"tproxy_port",kind:"property",detail:"TProxy Port",documentation:"Transparent proxy listening port",insertText:"tproxy_port: ${1:12345}",isSnippet:!0},{label:"log_level",kind:"property",detail:"Log Level",documentation:"Logging level for dae output.\n\n**Values:** `error`, `warn`, `info`, `debug`, `trace`",insertText:"log_level: ${1|info,warn,error,debug,trace|}",isSnippet:!0},{label:"tcp_check_url",kind:"property",detail:"TCP Check URL",documentation:"URL for TCP health check",insertText:"tcp_check_url: '${1:http://cp.cloudflare.com}'",isSnippet:!0},{label:"udp_check_dns",kind:"property",detail:"UDP Check DNS",documentation:"DNS server for UDP health check",insertText:"udp_check_dns: '${1:dns.google:53}'",isSnippet:!0},{label:"check_interval",kind:"property",detail:"Check Interval",documentation:"Interval between health checks.\n\n**Go duration format:** ns, us/s, ms, s, m, h\n\nExamples: `30s`, `1m`, `500ms`",insertText:"check_interval: ${1|30s,1m,15s,45s,2m|}",isSnippet:!0},{label:"check_tolerance",kind:"property",detail:"Check Tolerance",documentation:"Group will switch node only when `new_latency <= old_latency - tolerance`.\n\n**Go duration format:** ns, us/s, ms, s, m, h\n\nExamples: `50ms`, `100ms`, `200ms`",insertText:"check_tolerance: ${1|50ms,100ms,150ms,200ms|}",isSnippet:!0},{label:"dial_mode",kind:"property",detail:"Dial Mode",documentation:"Dialing mode for proxy connections.\n\n**Values:**\n- `ip`: Dial using IP directly\n- `domain`: Dial using sniffed domain\n- `domain+`: domain mode without domain reality check\n- `domain++`: domain+ with re-routing",insertText:"dial_mode: ${1|domain,ip,domain\\+,domain\\+\\+|}",isSnippet:!0},{label:"wan_interface",kind:"property",detail:"WAN Interface",documentation:"WAN interface name",insertText:"wan_interface: ${1:auto}",isSnippet:!0},{label:"lan_interface",kind:"property",detail:"LAN Interface",documentation:"LAN interface names",insertText:"lan_interface: ${1:docker0}",isSnippet:!0},{label:"auto_config_kernel_parameter",kind:"property",detail:"Auto Config Kernel",documentation:"Automatically configure Linux kernel parameters like ip_forward and send_redirects.",insertText:"auto_config_kernel_parameter: ${1|true,false|}",isSnippet:!0},{label:"auto_config_firewall_rule",kind:"property",detail:"Auto Config Firewall",documentation:"Automatically configure firewall rules.",insertText:"auto_config_firewall_rule: ${1|true,false|}",isSnippet:!0},{label:"sniffing_timeout",kind:"property",detail:"Sniffing Timeout",documentation:"Timeout for waiting first data for sniffing. It is always 0 if dial_mode is ip.\n\n**Go duration format:** ns, us/s, ms, s, m, h\n\nExamples: `100ms`, `200ms`, `300ms`",insertText:"sniffing_timeout: ${1|100ms,200ms,300ms,500ms|}",isSnippet:!0},{label:"tls_implementation",kind:"property",detail:"TLS Implementation",documentation:"TLS implementation to use",insertText:"tls_implementation: ${1|tls,utls|}",isSnippet:!0},{label:"utls_imitate",kind:"property",detail:"uTLS Imitate",documentation:"Browser fingerprint to imitate when tls_implementation is utls. See: https://github.com/daeuniverse/dae/blob/main/component/outbound/transport/tls/utls.go",insertText:"utls_imitate: ${1|chrome_auto,firefox_auto,safari_auto,edge_auto,ios_auto,randomized,chrome_58,chrome_62,chrome_70,chrome_72,chrome_83,chrome_87,chrome_96,chrome_100,chrome_102,firefox_55,firefox_56,firefox_63,firefox_65,firefox_99,firefox_102,firefox_105,safari_16_0,edge_85,edge_106,ios_11_1,ios_12_1,ios_13,ios_14,android_11_okhttp,360_auto,360_7_5,360_11_0,qq_auto,qq_11_1,randomizedalpn,randomizednoalpn|}",isSnippet:!0},{label:"tproxy_port_protect",kind:"property",detail:"TProxy Port Protect",documentation:"Protect tproxy port from unsolicited traffic",insertText:"tproxy_port_protect: ${1|true,false|}",isSnippet:!0},{label:"pprof_port",kind:"property",detail:"PProf Port",documentation:"Set non-zero value to enable pprof for debugging",insertText:"pprof_port: ${1:0}",isSnippet:!0},{label:"so_mark_from_dae",kind:"property",detail:"SO_MARK from dae",documentation:"SO_MARK for traffic sent from dae to avoid traffic loop",insertText:"so_mark_from_dae: ${1:0}",isSnippet:!0},{label:"disable_waiting_network",kind:"property",detail:"Disable Waiting Network",documentation:"Disable waiting for network before pulling subscriptions",insertText:"disable_waiting_network: ${1|true,false|}",isSnippet:!0},{label:"enable_local_tcp_fast_redirect",kind:"property",detail:"Enable Local TCP Fast Redirect",documentation:"Enable fast redirect for local TCP connections (experimental)",insertText:"enable_local_tcp_fast_redirect: ${1|true,false|}",isSnippet:!0},{label:"tcp_check_http_method",kind:"property",detail:"TCP Check HTTP Method",documentation:"HTTP method for tcp_check_url (HEAD bypasses traffic accounting)",insertText:"tcp_check_http_method: ${1|HEAD,GET|}",isSnippet:!0},{label:"allow_insecure",kind:"property",detail:"Allow Insecure TLS",documentation:"Allow insecure TLS certificates (not recommended)",insertText:"allow_insecure: ${1|true,false|}",isSnippet:!0},{label:"tls_fragment",kind:"property",detail:"TLS Fragment",documentation:"Enable TLS fragmentation to bypass SNI blocking",insertText:"tls_fragment: ${1|true,false|}",isSnippet:!0},{label:"tls_fragment_length",kind:"property",detail:"TLS Fragment Length",documentation:"TLS fragment packet length range in bytes (e.g., 50-100)",insertText:"tls_fragment_length: '${1:50-100}'",isSnippet:!0},{label:"tls_fragment_interval",kind:"property",detail:"TLS Fragment Interval",documentation:"TLS fragment packet interval in milliseconds (e.g., 10-20)",insertText:"tls_fragment_interval: '${1:10-20}'",isSnippet:!0},{label:"mptcp",kind:"property",detail:"Multipath TCP",documentation:"Enable MPTCP for load balance and failover",insertText:"mptcp: ${1|true,false|}",isSnippet:!0},{label:"bandwidth_max_tx",kind:"property",detail:"Max Upload Bandwidth",documentation:"Maximum upload bandwidth for Hysteria2 etc. (e.g., 200 mbps)",insertText:"bandwidth_max_tx: '${1:200 mbps}'",isSnippet:!0},{label:"bandwidth_max_rx",kind:"property",detail:"Max Download Bandwidth",documentation:"Maximum download bandwidth for Hysteria2 etc. (e.g., 1 gbps)",insertText:"bandwidth_max_rx: '${1:1 gbps}'",isSnippet:!0},{label:"fallback_resolver",kind:"property",detail:"Fallback DNS Resolver",documentation:"Fallback DNS when system DNS fails (format: ip:port)",insertText:"fallback_resolver: '${1:8.8.8.8:53}'",isSnippet:!0},{label:"ipversion_prefer",kind:"property",detail:"IP Version Prefer",documentation:"Prefer IPv4 (4) or IPv6 (6) responses. If set to 4 and the domain has both A and AAAA records, dae will only respond to type A queries.",insertText:"ipversion_prefer: ${1|4,6|}",isSnippet:!0},{label:"bind",kind:"property",detail:"DNS Bind Address",documentation:"Local address for DNS queries (e.g., 127.0.0.1:5353)",insertText:"bind: '${1|tcp+udp,tcp,udp|}://${2:127.0.0.1}:${3:5353}'",isSnippet:!0},{label:"filter",kind:"property",detail:"Filter",documentation:"Filter nodes in group. Use subtag() or name() to filter.",insertText:"filter: ${1:subtag(my_sub)}",isSnippet:!0},{label:"filter (with latency)",kind:"property",detail:"Filter with Latency Offset",documentation:"Filter nodes with latency offset for failover scenarios. Negative values make nodes preferred.",insertText:"filter: name(${1:keyword}: '${2:pattern}') [add_latency: ${3:-500ms}]",isSnippet:!0},{label:"policy",kind:"property",detail:"Policy",documentation:"Load balancing policy",insertText:"policy: ${1|min_moving_avg,min,min_avg10,random,fixed(0)|}",isSnippet:!0},{label:"min_moving_avg",kind:"function",detail:"Min Moving Average",documentation:"Select node with minimum moving average latency",insertText:"min_moving_avg"},{label:"min",kind:"function",detail:"Min Latency",documentation:"Select node with minimum latency",insertText:"min"},{label:"min_avg10",kind:"function",detail:"Min Average 10",documentation:"Select node with minimum average of last 10 checks",insertText:"min_avg10"},{label:"random",kind:"function",detail:"Random",documentation:"Randomly select a node",insertText:"random"},{label:"fixed",kind:"function",detail:"Fixed Index",documentation:"Select node at fixed index",insertText:"fixed(${1:0})",isSnippet:!0},{label:"subtag",kind:"function",detail:"Subscription Tag",documentation:"Filter nodes by subscription tag",insertText:"subtag(${1:tag})",isSnippet:!0},{label:"name",kind:"function",detail:"Name Filter",documentation:"Filter nodes by name pattern",insertText:"name(${1|keyword,regex|}: '${2:pattern}')",isSnippet:!0},{label:"dip",kind:"function",detail:"Destination IP",documentation:"Match destination IP address",insertText:"dip(${1:ip})",isSnippet:!0},{label:"dport",kind:"function",detail:"Destination Port",documentation:"Match destination port",insertText:"dport(${1:port})",isSnippet:!0},{label:"sip",kind:"function",detail:"Source IP",documentation:"Match source IP address",insertText:"sip(${1:ip})",isSnippet:!0},{label:"sport",kind:"function",detail:"Source Port",documentation:"Match source port",insertText:"sport(${1:port})",isSnippet:!0},{label:"ipversion",kind:"function",detail:"IP Version",documentation:"Match IP version (4 or 6)",insertText:"ipversion(${1|4,6|})",isSnippet:!0},{label:"l4proto",kind:"function",detail:"L4 Protocol",documentation:"Match Layer 4 protocol (tcp/udp)",insertText:"l4proto(${1|tcp,udp|})",isSnippet:!0},{label:"mac",kind:"function",detail:"MAC Address",documentation:"Match MAC address",insertText:"mac(${1:mac})",isSnippet:!0},{label:"pname",kind:"function",detail:"Process Name",documentation:"Match process name",insertText:"pname(${1:name})",isSnippet:!0},{label:"qname",kind:"function",detail:"Query Name",documentation:"Match DNS query name",insertText:"qname(${1:domain})",isSnippet:!0},{label:"domain",kind:"function",detail:"Domain",documentation:"Match domain (suffix match)",insertText:"domain(${1:domain})",isSnippet:!0},{label:"ip",kind:"function",detail:"IP",documentation:"Match IP address",insertText:"ip(${1:ip})",isSnippet:!0},{label:"source",kind:"function",detail:"Source",documentation:"Match source address",insertText:"source(${1:source})",isSnippet:!0},{label:"port",kind:"function",detail:"Port",documentation:"Match port",insertText:"port(${1:port})",isSnippet:!0},{label:"sourcePort",kind:"function",detail:"Source Port",documentation:"Match source port",insertText:"sourcePort(${1:port})",isSnippet:!0},{label:"inboundTag",kind:"function",detail:"Inbound Tag",documentation:"Match inbound tag",insertText:"inboundTag(${1:tag})",isSnippet:!0},{label:"network",kind:"function",detail:"Network",documentation:"Match network type",insertText:"network(${1:network})",isSnippet:!0},{label:"protocol",kind:"function",detail:"Protocol",documentation:"Match protocol",insertText:"protocol(${1:protocol})",isSnippet:!0},{label:"user",kind:"function",detail:"User",documentation:"Match user",insertText:"user(${1:user})",isSnippet:!0},{label:"full",kind:"type",detail:"Full Match",documentation:"Full domain match",insertText:"full:${1:domain}",isSnippet:!0},{label:"contains",kind:"type",detail:"Contains",documentation:"Domain contains keyword",insertText:"contains:${1:keyword}",isSnippet:!0},{label:"regexp",kind:"type",detail:"Regular Expression",documentation:"Match using regular expression",insertText:"regexp:${1:pattern}",isSnippet:!0},{label:"geosite",kind:"type",detail:"Geosite",documentation:"Match using geosite database",insertText:"geosite:${1:tag}",isSnippet:!0},{label:"geoip",kind:"type",detail:"Geoip",documentation:"Match using geoip database",insertText:"geoip:${1:tag}",isSnippet:!0},{label:"ext",kind:"type",detail:"External File",documentation:"Match using external file",insertText:'ext:"${1:file.dat}:${2:tag}"',isSnippet:!0},{label:"proxy",kind:"constant",detail:"Proxy",documentation:"Use proxy outbound",insertText:"proxy"},{label:"block",kind:"constant",detail:"Block",documentation:"Block the connection",insertText:"block"},{label:"direct",kind:"constant",detail:"Direct",documentation:"Direct connection",insertText:"direct"},{label:"must_direct",kind:"constant",detail:"Must Direct",documentation:"Force direct connection",insertText:"must_direct"},{label:"must_proxy",kind:"constant",detail:"Must Proxy",documentation:"Force proxy connection",insertText:"must_proxy"},{label:"routing",kind:"keyword",detail:"Routing Block",documentation:"Define routing rules block",insertText:`routing {
	\${0}
}`,isSnippet:!0},{label:"fallback",kind:"keyword",detail:"Fallback",documentation:"Fallback outbound",insertText:"fallback: ${1:outbound}",isSnippet:!0},{label:"must_rules",kind:"keyword",detail:"Must Rules",documentation:"Mandatory rules that cannot be overridden",insertText:"must_rules"},{label:"request",kind:"keyword",detail:"Request",documentation:"Request routing rules",insertText:"request"},{label:"response",kind:"keyword",detail:"Response",documentation:"Response routing rules",insertText:"response"},{label:"upstream",kind:"keyword",detail:"Upstream",documentation:"Upstream server",insertText:"upstream"},{label:"tcp",kind:"keyword",detail:"TCP",documentation:"TCP protocol",insertText:"tcp"},{label:"udp",kind:"keyword",detail:"UDP",documentation:"UDP protocol",insertText:"udp"},{label:"rule-domain",kind:"snippet",detail:"Domain Rule",documentation:"Create a domain matching rule",insertText:"domain(${1:domain}) -> ${2|proxy,direct,block|}",isSnippet:!0},{label:"rule-ip",kind:"snippet",detail:"IP Rule",documentation:"Create an IP matching rule",insertText:"dip(${1:ip}) -> ${2|proxy,direct,block|}",isSnippet:!0},{label:"rule-geosite",kind:"snippet",detail:"Geosite Rule",documentation:"Create a geosite matching rule",insertText:"domain(geosite:${1:cn}) -> ${2|direct,proxy,block|}",isSnippet:!0},{label:"rule-geoip",kind:"snippet",detail:"Geoip Rule",documentation:"Create a geoip matching rule",insertText:"dip(geoip:${1:cn}) -> ${2|direct,proxy,block|}",isSnippet:!0},{label:"rule-process",kind:"snippet",detail:"Process Rule",documentation:"Create a process matching rule",insertText:"pname(${1:process}) -> ${2|proxy,direct,block|}",isSnippet:!0},{label:"rule-port",kind:"snippet",detail:"Port Rule",documentation:"Create a port matching rule",insertText:"dport(${1:port}) -> ${2|proxy,direct,block|}",isSnippet:!0}],ri={auto_config_kernel_parameter:{values:["true","false"],type:"boolean"},auto_config_firewall_rule:{values:["true","false"],type:"boolean"},tproxy_port_protect:{values:["true","false"],type:"boolean"},disable_waiting_network:{values:["true","false"],type:"boolean"},enable_local_tcp_fast_redirect:{values:["true","false"],type:"boolean"},allow_insecure:{values:["true","false"],type:"boolean"},tls_fragment:{values:["true","false"],type:"boolean"},mptcp:{values:["true","false"],type:"boolean"},log_level:{values:["info","warn","error","debug","trace"],type:"enum"},dial_mode:{values:["domain","ip","domain+","domain++"],type:"enum"},tls_implementation:{values:["tls","utls"],type:"enum"},tcp_check_http_method:{values:["HEAD","GET"],type:"enum"},ipversion_prefer:{values:["4","6"],type:"enum"},utls_imitate:{values:["chrome_auto","firefox_auto","safari_auto","edge_auto","ios_auto","randomized","chrome_58","chrome_62","chrome_70","chrome_72","chrome_83","chrome_87","chrome_96","chrome_100","chrome_102","firefox_55","firefox_56","firefox_63","firefox_65","firefox_99","firefox_102","firefox_105","safari_16_0","edge_85","edge_106","ios_11_1","ios_12_1","ios_13","ios_14","android_11_okhttp","360_auto","360_7_5","360_11_0","qq_auto","qq_11_1","randomizedalpn","randomizednoalpn"],type:"enum"},check_interval:{values:["15s","30s","45s","1m","2m"],type:"duration"},check_tolerance:{values:["50ms","100ms","150ms","200ms"],type:"duration"},sniffing_timeout:{values:["100ms","200ms","300ms","500ms"],type:"duration"}},Ur=[{label:"qname",kind:"function",detail:"Query Name",documentation:"Match DNS query name. Used in DNS routing section.\n\nExample: `qname(geosite:cn) -> alidns`",insertText:"qname(${1:domain})",isSnippet:!0},{label:"qtype",kind:"function",detail:"Query Type",documentation:"Match DNS query type.\n\nExample: `qtype(aaaa) -> reject`",insertText:"qtype(${1|a,aaaa,cname,mx,txt|})",isSnippet:!0},{label:"fallback",kind:"keyword",detail:"Fallback Upstream",documentation:"Default DNS upstream when no other rules match.\n\nExample: `fallback: googledns`",insertText:"fallback: ${1:upstream}",isSnippet:!0},{label:"upstream",kind:"function",detail:"Upstream",documentation:"Match specific upstream.\n\nExample: `upstream(alidns)`",insertText:"upstream(${1:name})",isSnippet:!0},{label:"request",kind:"keyword",detail:"Request Section",documentation:"DNS request routing rules section",insertText:`request {
	\${0}
}`,isSnippet:!0},{label:"response",kind:"keyword",detail:"Response Section",documentation:"DNS response routing rules section",insertText:`response {
	\${0}
}`,isSnippet:!0}],Ei={global:"**Global Section**\n\nGlobal configuration options for dae.\n\nContains settings like:\n- **Software options**: `tproxy_port`, `log_level`, `pprof_port`, `so_mark_from_dae`\n- **Interface options**: `lan_interface`, `wan_interface`, `auto_config_kernel_parameter`, `auto_config_firewall_rule`\n- **Node connectivity check**: `tcp_check_url`, `tcp_check_http_method`, `udp_check_dns`, `check_interval`, `check_tolerance`\n- **Connecting options**: `dial_mode`, `allow_insecure`, `sniffing_timeout`\n- **TLS options**: `tls_implementation`, `utls_imitate`, `tls_fragment`, `tls_fragment_length`, `tls_fragment_interval`\n- **Advanced options**: `mptcp`, `bandwidth_max_tx`, `bandwidth_max_rx`, `fallback_resolver`",subscription:`**Subscription Section**

Subscriptions defined here will be resolved as nodes and merged as a part of the global node pool.
Support to give the subscription a tag, and filter nodes from a given subscription in the group section.

**URL Schemes:**
- \`https://\` - Standard HTTPS subscription
- \`http://\` - HTTP subscription
- \`file://\` - Local file (relative to /etc/dae/)
- \`https-file://\` - Persist subscription that saves to local file as fallback

Example:
\`\`\`dae
subscription {
  my_sub: 'https://example.com/sub'
  persist_sub: 'https-file://example.com/sub'
  'file://relative/path/to/mysub.sub'
}
\`\`\``,node:`**Node Section**

Nodes defined here will be merged as a part of the global node pool.

**Supported protocols:** socks5, http, https, ss, ssr, vmess, vless, trojan, tuic, juicity, hysteria2, hysteria

Full support list: https://github.com/daeuniverse/dae/blob/main/docs/en/proxy-protocols.md

Example:
\`\`\`dae
node {
  'socks5://localhost:1080'
  mynode: 'ss://...'
  node1: 'vmess://...'
  chains: 'tuic://... -> vmess://...'  # Node chaining
  hysteria2: 'hysteria2://password@server:port/?sni=domain'
}
\`\`\``,dns:"**DNS Section**\n\nConfigure DNS resolution and routing.\n\nSee: https://github.com/daeuniverse/dae/blob/main/docs/en/configuration/dns.md\n\nContains:\n- `ipversion_prefer`: Prefer IPv4 (4) or IPv6 (6) responses\n- `fixed_domain_ttl`: Set fixed TTL for specific domains\n- `bind`: Local DNS listening address\n- `upstream`: Define DNS upstreams (tcp/udp/tcp+udp/h3/http3/quic/https/tls)\n- `routing`: DNS routing rules with `request` and `response` sections",group:"**Group Section (Outbound)**\n\nDefine proxy groups for load balancing.\n\n**Options:**\n- `filter`: Filter nodes by subscription tag (`subtag`) or name pattern (`name`)\n- `policy`: Load balancing policy\n- Can override global check settings: `tcp_check_url`, `tcp_check_http_method`, `udp_check_dns`, `check_interval`, `check_tolerance`\n\n**Policy options:**\n- `random`: Randomly select a node\n- `fixed(n)`: Select node at index n\n- `min`: Select node with minimum last latency\n- `min_moving_avg`: Select node with minimum moving average latency\n- `min_avg10`: Select node with minimum average of last 10 latencies",routing:"**Routing Section**\n\nDefine traffic routing rules.\n\nSee: https://github.com/daeuniverse/dae/blob/main/docs/en/configuration/routing.md\n\n**Format:** `condition -> outbound`\n\n**Built-in outbounds:**\n- `direct`: Connect directly without proxy\n- `proxy`: Use default proxy group\n- `block`: Block the connection\n- `must_direct`: Force direct (cannot be overridden)\n- `must_proxy`: Force proxy (cannot be overridden)\n\n**Common conditions:** `domain()`, `dip()`, `dport()`, `l4proto()`, `pname()`, etc."},Et={tproxy_port:`TProxy port to listen on. It is NOT a HTTP/SOCKS port, and is just used by eBPF program.
In normal case, you do not need to use it.

Default: \`12345\``,tproxy_port_protect:`Set it true to protect tproxy port from unsolicited traffic.
Set it false to allow users to use self-managed iptables tproxy rules.

Default: \`true\``,pprof_port:"Set non-zero value to enable pprof for debugging.\n\nDefault: `0`",so_mark_from_dae:`If not zero, traffic sent from dae will be set SO_MARK.
It is useful to avoid traffic loop with iptables tproxy rules.

Default: \`0\``,log_level:"Log level for dae.\n\n**Values:** `error`, `warn`, `info`, `debug`, `trace`\n\nDefault: `info`",disable_waiting_network:"Disable waiting for network before pulling subscriptions.\n\nDefault: `false`",enable_local_tcp_fast_redirect:`Enable fast redirect for local TCP connections.

 There is a known kernel issue that breaks certain clients/proxies, such as nadoo/glider.
Users may enable this experimental option at their own risks.

Default: \`false\``,lan_interface:'The LAN interface to bind. Use it if you want to proxy LAN.\nMultiple interfaces split by ",".\n\nExample: `docker0` or `br-lan,docker0`',wan_interface:`The WAN interface to bind. Use it if you want to proxy localhost.
Multiple interfaces split by ",". Use "auto" to auto detect.

Default: \`auto\``,auto_config_kernel_parameter:"Automatically configure Linux kernel parameters like `ip_forward` and `send_redirects`.\n\nSee: https://github.com/daeuniverse/dae/blob/main/docs/en/user-guide/kernel-parameters.md\n\nDefault: `true`",auto_config_firewall_rule:"Automatically configure firewall rules.\n\nDefault: `true`",tcp_check_url:`URL for TCP health check. Host of URL should have both IPv4 and IPv6 if you have double stack in local.

Format: \`URL,IPv4,IPv6\` (IP addresses are optional hints)

Considering traffic consumption, it is recommended to choose a site with anycast IP and less response.

Example: \`http://cp.cloudflare.com,1.1.1.1,2606:4700:4700::1111\``,tcp_check_http_method:"The HTTP request method to `tcp_check_url`.\n\n**Values:** `HEAD`, `GET`\n\nUse 'HEAD' by default because some server implementations bypass accounting for this kind of traffic.\n\nDefault: `HEAD`",udp_check_dns:`DNS server for UDP health check. This DNS will be used to check UDP connectivity of nodes.
And if dns_upstream below contains tcp, it also be used to check TCP DNS connectivity of nodes.

Format: \`host:port,IPv4,IPv6\`

This DNS should have both IPv4 and IPv6 if you have double stack in local.

Example: \`dns.google:53,8.8.8.8,2001:4860:4860::8888\``,check_interval:"Interval between health checks.\n\n**Format:** Go duration (e.g., `30s`, `1m`, `500ms`)\n\nDefault: `30s`",check_tolerance:"Group will switch node only when `new_latency <= old_latency - tolerance`.\n\n**Format:** Go duration (e.g., `50ms`, `100ms`)\n\nDefault: `50ms`",dial_mode:"Dialing mode for proxy connections.\n\n**Values:**\n- `ip`: Dial proxy using the IP from DNS directly. This allows your IPv4/IPv6 to choose the optimal path respectively. Sniffing will be disabled.\n- `domain`: Dial proxy using the domain from sniffing. This will relieve DNS pollution problem. Generally brings faster proxy response time because proxy will re-resolve the domain in remote.\n- `domain+`: Based on domain mode but do not check the reality of sniffed domain. Useful for users whose DNS requests do not go through dae.\n- `domain++`: Based on domain+ mode but force to re-route traffic using sniffed domain to partially recover domain based traffic split ability.\n\nDefault: `domain`",allow_insecure:`Allow insecure TLS certificates.

 It is not recommended to turn it on unless you have to.

Default: \`false\``,sniffing_timeout:"Timeout to waiting for first data sending for sniffing.\nIt is always 0 if dial_mode is ip. Set it higher is useful in high latency LAN network.\n\n**Format:** Go duration (e.g., `100ms`, `200ms`)\n\nDefault: `100ms`",tls_implementation:"TLS implementation to use.\n\n**Values:**\n- `tls`: Use Go's crypto/tls\n- `utls`: Use uTLS, which can imitate browser's Client Hello\n\nDefault: `tls`",utls_imitate:"The Client Hello ID for uTLS to imitate. This takes effect only if tls_implementation is utls.\n\n**Values:**\n- `randomized`, `randomizedalpn`, `randomizednoalpn`\n- `chrome_auto`, `chrome_58`, `chrome_62`, `chrome_70`, `chrome_72`, `chrome_83`, `chrome_87`, `chrome_96`, `chrome_100`, `chrome_102`\n- `firefox_auto`, `firefox_55`, `firefox_56`, `firefox_63`, `firefox_65`, `firefox_99`, `firefox_102`, `firefox_105`\n- `safari_auto`, `safari_16_0`\n- `edge_auto`, `edge_85`, `edge_106`\n- `ios_auto`, `ios_11_1`, `ios_12_1`, `ios_13`, `ios_14`\n- `android_11_okhttp`\n- `360_auto`, `360_7_5`, `360_11_0`\n- `qq_auto`, `qq_11_1`\n\nDefault: `chrome_auto`",tls_fragment:"TLS fragmentation support. If is true, dae will send Client Hello in fragments to bypass SNI blocking.\n\nDefault: `false`",tls_fragment_length:"TLS fragment packet length range, in bytes.\nThe length of each fragment is randomly generated from this range.\n\nFormat: `min-max` (e.g., `50-100`)\n\nDefault: `50-100`",tls_fragment_interval:"TLS fragment packet interval, in milliseconds.\nEach fragment interval is randomly generated from this range.\n\nFormat: `min-max` (e.g., `10-20`)\n\nDefault: `10-20`",mptcp:`Multipath TCP (MPTCP) support. If is true, dae will try to use MPTCP to connect all nodes,
but it will only take effects when the node supports MPTCP.
It can use for load balance and failover to multiple interfaces and IPs.

Default: \`false\``,bandwidth_max_tx:"Maximum upload bandwidth. Useful for some specific protocols (e.g., Hysteria2),\nwhich will perform better with bandwidth information provided.\n\n**Units:** `b`, `kb`, `mb`, `gb`, `tb`, `mbps`, `gbps` or bytes per second\n\nFormats: https://v2.hysteria.network/docs/advanced/Full-Client-Config/#bandwidth\n\nExample: `200 mbps` or `200 m` or `200 mb` or `25000000`",bandwidth_max_rx:"Maximum download bandwidth. Useful for some specific protocols (e.g., Hysteria2),\nwhich will perform better with bandwidth information provided.\n\n**Units:** `b`, `kb`, `mb`, `gb`, `tb`, `mbps`, `gbps` or bytes per second\n\nExample: `1 gbps` or `1 g` or `1 gb` or `125000000`",fallback_resolver:"Fallback DNS resolver used when DNS resolution using resolv.conf fails.\nThis ensures DNS resolution continues to work even when the system's default DNS servers are unavailable.\n\n**Format:**\n- IPv4: `ipv4:port` (e.g., `8.8.8.8:53`)\n- IPv6: `[ipv6]:port` (e.g., `[2001:4860:4860::8888]:53`)\n\nDefault: `8.8.8.8:53`",ipversion_prefer:"Prefer IPv4 or IPv6 responses. If set to 4 and the domain has both A and AAAA records,\ndae will only respond to type A queries and response empty answer to type AAAA queries.\n\n**Values:** `4` or `6`",bind:"Bind to local address to listen for DNS queries.\n\n**Format:** `[scheme://]host:port`\n\n**Schemes:** `tcp`, `udp`, `tcp+udp` (default)\n\nExample: `127.0.0.1:5353` or `tcp+udp://127.0.0.1:5353`",filter:`Filter nodes in group from the global node pool.

**Functions:**
- \`subtag(tag)\`: Filter by subscription tag
- \`name(keyword: 'pattern')\`: Filter by name with keyword match
- \`name(regex: 'pattern')\`: Filter by name with regex match

**Modifiers:**
- \`[add_latency: -500ms]\`: Add latency offset for failover

Multiple filters indicate 'or' logic.`,policy:"Load balancing policy for the group.\n\n**Values:**\n- `random`: Randomly select a node for every connection\n- `fixed(n)`: Select the node at index n\n- `min`: Select node with minimum last latency\n- `min_moving_avg`: Select node with minimum moving average latency\n- `min_avg10`: Select node with minimum average of last 10 latencies"},Br={domain:"Match by domain (suffix match).\n\n**Prefixes:**\n- `geosite:tag` - Match using geosite database\n- `full:domain` - Full domain match (exact)\n- `keyword:word` - Domain contains keyword\n- `regexp:pattern` - Match using regular expression\n\nExample: `domain(example.com)` or `domain(geosite:cn)`",dip:"Match by destination IP address.\n\n**Prefixes:**\n- `geoip:tag` - Match using geoip database\n\nExample: `dip(geoip:cn)` or `dip(192.168.0.0/16)` or `dip(224.0.0.0/3)`",dport:"Match by destination port.\n\nSupports single port, port range, or multiple ports.\n\nExample: `dport(443)` or `dport(80-443)` or `dport(80, 443, 8080)`",sip:"Match by source IP address.\n\nExample: `sip(192.168.1.0/24)`",sport:"Match by source port.\n\nExample: `sport(12345)`",pname:"Match by process name.\n\nUseful for routing traffic from specific applications.\n\nExample: `pname(chrome)` or `pname(NetworkManager)`",qname:`Match DNS query name.

Used in DNS routing section.

**Prefixes:** Same as domain()

Example: \`qname(geosite:cn)\``,qtype:"Match DNS query type.\n\nExample: `qtype(A)` or `qtype(AAAA)`",l4proto:"Match Layer 4 protocol.\n\n**Values:** `tcp`, `udp`\n\nExample: `l4proto(tcp)` or `l4proto(udp)`",ipversion:"Match IP version.\n\n**Values:** `4`, `6`\n\nExample: `ipversion(4)` or `ipversion(6)`",mac:`Match by MAC address.

Useful for routing traffic from specific devices on LAN.

Example: \`mac(00:00:00:00:00:00)\``,subtag:`Filter nodes by subscription tag.

Used in group filter to select nodes from specific subscriptions.

**Prefixes:**
- \`regex:'pattern'\` - Match tag with regex

Example: \`subtag(my_sub)\` or \`subtag(regex: '^my_', another_sub)\``,name:"Filter nodes by name pattern.\n\nUsed in group filter.\n\n**Prefixes:**\n- `keyword: 'pattern'` - Name contains keyword\n- `regex: 'pattern'` - Match using regex\n\nExample: `name(keyword: 'HK')` or `name(regex: 'US.*')` or `name(node1, node2)`",dscp:"Match by DSCP (Differentiated Services Code Point) value.\n\nExample: `dscp(0x04)`",upstream:"Match by DNS upstream (used in DNS response routing).\n\nExample: `upstream(googledns) -> accept`",ip:"Match by IP address (used in DNS response routing).\n\nExample: `ip(geoip:private)`",must:"Wrap a condition to make it mandatory (cannot be overridden).\n\nExample: `must(domain(example.com) -> direct)`",tag:"Match by node tag.\n\nExample: `tag(my_tag)`"},Ni={direct:`Connect directly without proxy.

Traffic will bypass all proxies and connect to the destination directly.`,proxy:`Use proxy (default group).

Traffic will be sent through the configured proxy group.`,block:`Block the connection.

The connection will be rejected/dropped.`,must_direct:`Force direct connection (cannot be overridden).

This cannot be overridden by subsequent routing rules.`,must_proxy:`Force proxy connection (cannot be overridden).

This cannot be overridden by subsequent routing rules.`,accept:`Accept the DNS response (used in DNS routing).

Used in DNS response routing to accept the current DNS response.`},zr={geosite:"Match using geosite database",geoip:"Match using geoip database",full:"Full domain match (exact)",contains:"Domain contains keyword",keyword:"Match by keyword",regexp:"Match using regular expression",regex:"Match using regular expression",ext:"Match using external data file"};function Vr(e,t){const{tabSize:o=2,insertSpaces:i=!0}=t,n=i?" ".repeat(o):"	",r=e.split(`
`).map(s=>xr(s));let a=0;const c=[];for(const s of r){if(s.isBlank){const m=c[c.length-1];if(m===""||m===void 0)continue;c.push("");continue}s.isBlockEnd&&!s.isBlockStart&&(a=Math.max(0,a-1));const u=n.repeat(a),d=Gr(s.content),h=s.comment?d?` ${s.comment}`:s.comment:"";c.push(`${u}${d}${h}`),s.isBlockStart&&!s.isBlockEnd&&a++}for(;c.length>0&&c[c.length-1]==="";)c.pop();return`${c.join(`
`)}
`}function xr(e){const t=e.trim();if(t==="")return{content:"",comment:"",isBlank:!0,isBlockStart:!1,isBlockEnd:!1};let o=t,i="";const n=Kr(t);n!==-1&&(o=t.slice(0,n).trim(),i=t.slice(n).trim());const r=o.includes("{"),a=o.includes("}");return{content:o,comment:i,isBlank:!1,isBlockStart:r,isBlockEnd:a}}function Kr(e){let t=!1,o=!1;for(let i=0;i<e.length;i++){const n=e[i];if((i>0?e[i-1]:"")!=="\\"){if(n==="'"&&!o)t=!t;else if(n==='"'&&!t)o=!o;else if(n==="#"&&!t&&!o)return i}}return-1}function Gr(e){if(!e)return"";let t=e;return t=t.replace(/\s*->\s*/g," -> "),t=t.replace(/\s*&&\s*/g," && "),t=t.replace(/!\s+/g,"!"),t=t.replace(/\s*,\s*/g,", "),t=t.replace(/(\w+):\s+(\w+)/g,(o,i,n)=>["geosite","geoip","full","contains","regexp","ext","keyword","regex"].includes(i.toLowerCase())?`${i}:${n}`:`${i}: ${n}`),t=t.replace(/\(\s+/g,"("),t=t.replace(/\s+\)/g,")"),t=t.replace(/\{\s+/g,"{ "),t=t.replace(/\s+\}/g," }"),t=t.replace(/\s{2,}/g," "),t=t.trim(),t}const bt=["global","subscription","node","dns","group","routing"],oi=["upstream","routing","request","response","fixed_domain_ttl"],Jr=["domain","ip","source","port","sourcePort","inboundTag","network","protocol","user","dip","dport","sip","sport","ipversion","l4proto","mac","pname","qname","qtype","upstream","subtag","name","tag","dscp","must"],st=["proxy","direct","block","must_direct","must_proxy","accept"];function Qr(e){const t=e.split(`
`),o=[],i=[],n=[],r=[];let a=null,c=!1;for(let u=0;u<t.length;u++){const d=t[u],h=d.trim();if(h===""||h.startsWith("#"))continue;const m=Yr(h),_=m!==-1?h.slice(0,m).trim():h;if(!_)continue;const g=_.match(/^(\w[\w-]*)(\s*\{)?$/);if(g){const q=g[1],P=!!g[2],L=d.indexOf(q),V={name:q,kind:Xr(q,r),range:{start:{line:u,character:0},end:{line:u,character:d.length}},nameRange:{start:{line:u,character:L},end:{line:u,character:L+q.length}},children:[]};bt.includes(q)&&r.length===0&&(a=q),q==="upstream"&&(c=!0),P&&r.push(V),r.length>1?r[r.length-2].children?.push(V):P&&o.push(V);continue}const S=_.match(/^fallback:\s*(\w+)$/);if(S){const q=S[1],P=d.lastIndexOf(q);if(!st.includes(q)){const L=a==="dns"||c?"upstream":"group";i.push({name:q,kind:L,range:{start:{line:u,character:P},end:{line:u,character:P+q.length}}})}continue}const I=_.indexOf(":");if(I!==-1&&r.length>0){const q=_.substring(0,I).match(/^(\w[\w-]*)$/);if(q){const P=q[1],L=_.substring(I+1).trim(),V=d.indexOf(P),z=r[r.length-1];let W="parameter";if(z.name==="subscription"?W="subscription":z.name==="node"?W="node":z.name==="upstream"&&(W="upstream"),W!=="parameter"){const J={name:P,kind:W,range:{start:{line:u,character:0},end:{line:u,character:d.length}},nameRange:{start:{line:u,character:V},end:{line:u,character:V+P.length}}};z.children?.push(J)}Oi(L,u,d.indexOf(L),i,a);continue}}const M=_.indexOf("->");if(M!==-1){const q=_.substring(0,M).trimEnd(),P=_.substring(M+2).trim().match(/^(\w+)$/);if(q&&P){const L=q,V=P[1],z=d.lastIndexOf(V);if(!st.includes(V)){const W=a==="dns"||c?"upstream":"group";i.push({name:V,kind:W,range:{start:{line:u,character:z},end:{line:u,character:z+V.length}}})}Oi(L,u,d.indexOf(L),i,a);continue}}if(_==="}"){if(r.length>0){const q=r.pop();q.range.end={line:u,character:d.length},bt.includes(q.name)&&r.length===0&&(a=null)}continue}_.startsWith("'")||_.startsWith('"')}const s=Zr(o);for(const u of i)if(!s.get(u.name)){if(st.includes(u.name)||u.kind==="group")continue;n.push({message:`Undefined ${u.kind}: '${u.name}'`,range:u.range,severity:"warning"})}return{symbols:o,references:i,diagnostics:n}}function Oi(e,t,o,i,n){const r=/subtag\(([^)]+)\)/g;let a=r.exec(e);for(;a!==null;){const s=a[1].split(",").map(u=>u.trim());for(const u of s){const d=u.replace(/^['"]|['"]$/g,"").replace(/^regex:\s*/,"").replace(/^\^/,"");if(d&&!d.includes(":")){const h=e.indexOf(u,a.index);i.push({name:d,kind:"subscription",range:{start:{line:t,character:o+h},end:{line:t,character:o+h+u.length}}})}}a=r.exec(e)}const c=/\bname\(([^)]+)\)/g;for(a=c.exec(e);a!==null;){const s=a[1].split(",").map(u=>u.trim());for(const u of s){if(u.includes(":"))continue;const d=u.replace(/^['"]|['"]$/g,"");if(d){const h=e.indexOf(u,a.index);i.push({name:d,kind:"node",range:{start:{line:t,character:o+h},end:{line:t,character:o+h+u.length}}})}}a=c.exec(e)}if(n==="dns"){const s=/->\s*(\w+)/g;for(a=s.exec(e);a!==null;){const d=a[1];if(!st.includes(d)){const h=e.indexOf(d,a.index);i.push({name:d,kind:"upstream",range:{start:{line:t,character:o+h},end:{line:t,character:o+h+d.length}}})}a=s.exec(e)}const u=/upstream\(([^)]+)\)/g;for(a=u.exec(e);a!==null;){const d=a[1].split(",").map(h=>h.trim());for(const h of d){const m=h.replace(/^['"]|['"]$/g,"");if(m&&!st.includes(m)){const _=e.indexOf(h,a.index);i.push({name:m,kind:"upstream",range:{start:{line:t,character:o+_},end:{line:t,character:o+_+h.length}}})}}a=u.exec(e)}}}function Xr(e,t){if(bt.includes(e))return"section";if(t.length>0){if(t[t.length-1].name==="group")return"group";if(oi.includes(e))return"section"}return"group"}function Yr(e){let t=!1,o=!1;for(let i=0;i<e.length;i++){const n=e[i];if((i>0?e[i-1]:"")!=="\\"){if(n==="'"&&!o)t=!t;else if(n==='"'&&!t)o=!o;else if(n==="#"&&!t&&!o)return i}}return-1}function Zr(e){const t=new Map;function o(i){for(const n of i)n.kind!=="section"&&n.kind!=="parameter"&&t.set(n.name,n),n.children&&o(n.children)}return o(e),t}function Dt(e,t){function o(i){for(const n of i){if(Li(t,n.nameRange))return n;if(n.children){const r=o(n.children);if(r)return r}}}return o(e)}function ai(e,t){for(const o of e)if(Li(t,o.range))return o}function si(e,t,o){function i(n){for(const r of n){if(r.name===t&&(!o||r.kind===o))return r;if(r.children){const a=i(r.children);if(a)return a}}}return i(e)}function Ii(e,t,o){return e.filter(i=>i.name===t&&!0)}function Li(e,t){return!(e.line<t.start.line||e.line>t.end.line||e.line===t.start.line&&e.character<t.start.character||e.line===t.end.line&&e.character>t.end.character)}function $r(e,t){const o=e.split(`
`);let i=null,n=null,r=!1,a=0;const c=[];for(let s=0;s<=t.line&&s<o.length;s++){const u=o[s],d=u.trim();if(d.startsWith("#")||d==="")continue;const h=(u.match(/\{/g)||[]).length,m=(u.match(/\}/g)||[]).length,_=d.match(/^(\w+)\s*\{/);if(_){const g=_[1];bt.includes(g)&&a===0?(i=g,c.push(g)):oi.includes(g)?(n=g,c.push(g),g==="upstream"&&(r=!0)):c.push(g)}if(a+=h-m,m>0)for(let g=0;g<m&&c.length>0;g++){const S=c.pop();S&&oi.includes(S)&&(n=null),S&&bt.includes(S)&&a===0&&(i=null)}}return{section:i,subsection:n,isDnsContext:i==="dns"||r,isRoutingContext:i==="routing"||n==="routing"||n==="request"||n==="response",symbolPath:c}}const Xe=["namespace","type","class","enum","function","variable","keyword","comment","string","number","operator"],eo={tokenTypes:Xe,tokenModifiers:["declaration","definition","readonly","static"]},ci=new Map;function Ye(e){const t=ci.get(e.uri);if(t&&t.version===e.version)return t.result;const o=Qr(e.getText());return ci.set(e.uri,{version:e.version,result:o}),o}function We(e){return j.Range.create(j.Position.create(e.start.line,e.start.character),j.Position.create(e.end.line,e.end.character))}function Fi(e){switch(e){case"keyword":return j.CompletionItemKind.Keyword;case"function":return j.CompletionItemKind.Function;case"constant":return j.CompletionItemKind.Constant;case"type":return j.CompletionItemKind.TypeParameter;case"variable":return j.CompletionItemKind.Variable;case"snippet":return j.CompletionItemKind.Snippet;case"property":return j.CompletionItemKind.Property;default:return j.CompletionItemKind.Text}}function ui(e,t){const o=[];function i(n){for(const r of n)t.includes(r.kind)&&o.push(r),r.children&&i(r.children)}return i(e),o}function to(e,t){const o=Ye(t),i=[];for(const n of o.diagnostics){const r=n.severity==="error"?j.DiagnosticSeverity.Error:n.severity==="warning"?j.DiagnosticSeverity.Warning:j.DiagnosticSeverity.Information;i.push({range:We(n.range),message:n.message,severity:r,source:"dae"})}e.sendDiagnostics({uri:t.uri,diagnostics:i})}function no(e,t){e.onInitialize(o=>({capabilities:{textDocumentSync:j.TextDocumentSyncKind.Incremental,completionProvider:{resolveProvider:!0,triggerCharacters:[".",":","(",","," "]},hoverProvider:!0,definitionProvider:!0,referencesProvider:!0,renameProvider:{prepareProvider:!0},documentFormattingProvider:!0,semanticTokensProvider:{legend:eo,full:!0}}})),e.onInitialized(()=>{e.console.log("DAE Language Server initialized")}),e.onCompletion(o=>{const i=t.get(o.textDocument.uri);if(!i)return Mi.map(g=>({label:g.label,kind:Fi(g.kind),detail:g.detail,documentation:{kind:j.MarkupKind.Markdown,value:g.documentation||""},insertText:g.insertText,insertTextFormat:g.isSnippet?j.InsertTextFormat.Snippet:j.InsertTextFormat.PlainText}));const n=i.getText(),r=(n.split(`
`)[o.position.line]||"").substring(0,o.position.character),a=Ye(i),c=r.match(/(?:filter\s*:\s*)?\b(name|subtag)\s*\(\s*(['"]?)(\w*)$/);if(c){const g=c[2],S=c[3].toLowerCase();return ui(a.symbols,["node","subscription"]).filter(I=>I.name.toLowerCase().includes(S)).map((I,M)=>({label:I.name,kind:I.kind==="node"?j.CompletionItemKind.Variable:j.CompletionItemKind.Module,detail:I.kind,documentation:{kind:j.MarkupKind.Markdown,value:`**${I.kind}**: \`${I.name}\`

Defined at line ${I.nameRange.start.line+1}`},sortText:String(M).padStart(2,"0"),insertText:I.name,insertTextFormat:j.InsertTextFormat.PlainText}))}const s=r.match(/^\s*(\w+)\s*:\s*$/);if(s){const g=s[1],S=ri[g];if(S)return S.values.map((I,M)=>({label:I,kind:S.type==="boolean"?j.CompletionItemKind.Value:j.CompletionItemKind.EnumMember,detail:`${g} value`,sortText:String(M).padStart(2,"0"),insertText:I,insertTextFormat:j.InsertTextFormat.PlainText}))}const u=r.match(/^\s*(\w+)\s*:\s*(\w+)$/);if(u){const g=u[1],S=u[2].toLowerCase(),I=ri[g];if(I)return I.values.filter(M=>M.toLowerCase().startsWith(S)).map((M,q)=>({label:M,kind:I.type==="boolean"?j.CompletionItemKind.Value:j.CompletionItemKind.EnumMember,detail:`${g} value`,sortText:String(q).padStart(2,"0"),insertText:M,insertTextFormat:j.InsertTextFormat.PlainText}))}const d=$r(n,{line:o.position.line,character:o.position.character});let h=[...Mi];d.isDnsContext&&(h=[...Ur,...h]);const m=[];if(d.isDnsContext){const g=ui(a.symbols,["upstream"]);for(const S of g)m.push({label:S.name,kind:j.CompletionItemKind.Variable,detail:"DNS upstream",documentation:{kind:j.MarkupKind.Markdown,value:`**DNS Upstream**: \`${S.name}\`

Defined at line ${S.nameRange.start.line+1}`},insertText:S.name,insertTextFormat:j.InsertTextFormat.PlainText,sortText:`00${S.name}`})}if(d.isRoutingContext||d.section==="routing"){const g=ui(a.symbols,["group"]);for(const S of g)m.push({label:S.name,kind:j.CompletionItemKind.Variable,detail:"Proxy group",documentation:{kind:j.MarkupKind.Markdown,value:`**Group**: \`${S.name}\`

Defined at line ${S.nameRange.start.line+1}`},insertText:S.name,insertTextFormat:j.InsertTextFormat.PlainText,sortText:`00${S.name}`})}const _=h.map(g=>({label:g.label,kind:Fi(g.kind),detail:g.detail,documentation:{kind:j.MarkupKind.Markdown,value:g.documentation||""},insertText:g.insertText,insertTextFormat:g.isSnippet?j.InsertTextFormat.Snippet:j.InsertTextFormat.PlainText}));return[...m,..._]}),e.onCompletionResolve(o=>o),e.onHover(o=>{const i=t.get(o.textDocument.uri);if(!i)return null;const n=Ye(i),r=o.position,a=i.getText().split(`
`)[r.line];if(!a)return null;let c=r.character,s=r.character;for(;c>0&&/[\w+\-]/.test(a[c-1]);)c--;for(;s<a.length&&/[\w+\-]/.test(a[s]);)s++;const u=a.substring(c,s);if(!u)return null;const d=j.Range.create(r.line,c,r.line,s),h=a.match(/^\s*(\w+)\s*:\s*(\S.*)$/);if(h){const M=h[1],q=a.indexOf(h[2]);if(r.character>=q){const P=ri[M];if(P&&P.values.includes(u)){const L=`Value \`${u}\` for **${M}**`;return{contents:{kind:j.MarkupKind.Markdown,value:Et[M]?`**${u}**

${Et[M]}`:L},range:d}}}}if(Ei[u])return{contents:{kind:j.MarkupKind.Markdown,value:Ei[u]},range:d};if(Et[u])return{contents:{kind:j.MarkupKind.Markdown,value:`**${u}**

${Et[u]}`},range:d};const m=a.substring(s).trim();if(Jr.includes(u)&&m.startsWith("(")){const M=Br[u]||`Rule function: ${u}`;return{contents:{kind:j.MarkupKind.Markdown,value:`**${u}()**

${M}`},range:d}}if(Ni[u])return{contents:{kind:j.MarkupKind.Markdown,value:`**${u}**

${Ni[u]}`},range:d};const _={line:r.line,character:r.character},g=Dt(n.symbols,_);if(g)return{contents:{kind:j.MarkupKind.Markdown,value:`**${g.kind}**: \`${g.name}\``},range:d};const S=ai(n.references,_);if(S){const M=si(n.symbols,S.name);return M?{contents:{kind:j.MarkupKind.Markdown,value:`**${M.kind}**: \`${M.name}\`

Defined at line ${M.nameRange.start.line+1}`},range:d}:{contents:{kind:j.MarkupKind.Markdown,value:`Reference to ${S.kind}: \`${S.name}\``},range:d}}const I=a.match(/(geosite|geoip|full|contains|keyword|regexp|regex|ext):(\w+)/);if(I){const M=I[1];if(u===M||u===I[2]){const q=zr[M]||"";return{contents:{kind:j.MarkupKind.Markdown,value:`**${M}:${I[2]}**

${q}`},range:d}}}return null}),e.onDefinition(o=>{const i=t.get(o.textDocument.uri);if(!i)return null;const n=Ye(i),r={line:o.position.line,character:o.position.character},a=ai(n.references,r);if(a){const s=si(n.symbols,a.name,{group:"group",subscription:"subscription",node:"node",upstream:"upstream"}[a.kind]);if(s)return j.Location.create(o.textDocument.uri,We(s.nameRange))}const c=Dt(n.symbols,r);return c?j.Location.create(o.textDocument.uri,We(c.nameRange)):null}),e.onReferences(o=>{const i=t.get(o.textDocument.uri);if(!i)return null;const n=Ye(i),r={line:o.position.line,character:o.position.character},a=Dt(n.symbols,r);if(!a)return null;const c=Ii(n.references,a.name).map(s=>j.Location.create(o.textDocument.uri,We(s.range)));return o.context.includeDeclaration&&c.unshift(j.Location.create(o.textDocument.uri,We(a.nameRange))),c.length>0?c:null}),e.onPrepareRename(o=>{const i=t.get(o.textDocument.uri);if(!i)return null;const n=Ye(i),r={line:o.position.line,character:o.position.character},a=Dt(n.symbols,r);return a?{range:We(a.nameRange),placeholder:a.name}:null}),e.onRenameRequest(o=>{const i=t.get(o.textDocument.uri);if(!i)return null;const n=Ye(i),r={line:o.position.line,character:o.position.character};let a=Dt(n.symbols,r),c;if(a)c=a.name;else{const d=ai(n.references,r);d&&(c=d.name,a=si(n.symbols,d.name,d.kind))}if(!c)return null;const s=[];a&&s.push(j.TextEdit.replace(We(a.nameRange),o.newName));const u=Ii(n.references,c);for(const d of u)s.push(j.TextEdit.replace(We(d.range),o.newName));return s.length===0?null:{changes:{[o.textDocument.uri]:s}}}),e.onDocumentFormatting(o=>{const i=t.get(o.textDocument.uri);if(!i)return null;const n=i.getText(),r=Vr(n,{tabSize:o.options.tabSize,insertSpaces:o.options.insertSpaces});if(r===n)return null;const a=i.getText().length,c=j.Range.create(j.Position.create(0,0),i.positionAt(a));return[j.TextEdit.replace(c,r)]}),e.languages.semanticTokens.on(o=>{const i=t.get(o.textDocument.uri);if(!i)return{data:[]};const n=new j.SemanticTokensBuilder,r=i.getText().split(`
`),a=[];for(let c=0;c<r.length;c++){const s=r[c];if(!s.trim())continue;if(s.trim().startsWith("#")){const _=s.indexOf("#");a.push({line:c,char:_,length:s.length-_,tokenType:Xe.indexOf("comment"),tokenModifiers:0});continue}const u=s.match(/^(\s*)(global|subscription|node|dns|group|routing)\s*\{/);if(u){a.push({line:c,char:u[1].length,length:u[2].length,tokenType:Xe.indexOf("namespace"),tokenModifiers:0});continue}const d=s.match(/^(\s*)(\w[\w-]*)\s*:/);d&&a.push({line:c,char:d[1].length,length:d[2].length,tokenType:Xe.indexOf("variable"),tokenModifiers:1});const h=s.match(/^\s*(fallback)\s*:/);if(h){const _=s.indexOf(h[1]);a.push({line:c,char:_,length:h[1].length,tokenType:Xe.indexOf("keyword"),tokenModifiers:0})}const m=s.match(/->\s*(direct|block|must_direct|must_rules|must_group|proxy|\w+)/);if(m){const _=s.lastIndexOf(m[1]),g=st.includes(m[1]);a.push({line:c,char:_,length:m[1].length,tokenType:Xe.indexOf(g?"keyword":"variable"),tokenModifiers:0})}io(s,c,a,Xe)}a.sort((c,s)=>c.line!==s.line?c.line-s.line:c.char-s.char);for(const c of a)n.push(c.line,c.char,c.length,c.tokenType,c.tokenModifiers);return n.build()}),t.onDidChangeContent(o=>{to(e,o.document)}),t.onDidClose(o=>{ci.delete(o.document.uri),e.sendDiagnostics({uri:o.document.uri,diagnostics:[]})}),t.listen(e),e.listen(),e.console.log("DAE Language Server started")}function io(e,t,o,i){const n=e.indexOf("->");if(n===-1)return;const r=e.substring(0,n),a=0,c=/\b(domain|dip|dport|sip|sport|pname|qname|qtype|l4proto|ipversion|mac|dscp|upstream|ip|must|tag|name|subtag)\s*\(/g;let s=c.exec(r);for(;s!==null;)o.push({line:t,char:a+s.index,length:s[1].length,tokenType:i.indexOf("function"),tokenModifiers:0}),s=c.exec(r);const u=/(geosite|geoip|full|contains|keyword|regexp|regex|ext):/g;for(s=u.exec(r);s!==null;)o.push({line:t,char:a+s.index,length:s[1].length,tokenType:i.indexOf("type"),tokenModifiers:0}),s=u.exec(r);const d=/&&/g;for(s=d.exec(r);s!==null;)o.push({line:t,char:a+s.index,length:2,tokenType:i.indexOf("operator"),tokenModifiers:0}),s=d.exec(r);const h=/!/g;for(s=h.exec(r);s!==null;)o.push({line:t,char:a+s.index,length:1,tokenType:i.indexOf("operator"),tokenModifiers:0}),s=h.exec(r)}var ro=ti(),oo=class{errorEmitter=new Qe.Emitter;closeEmitter=new Qe.Emitter;messageEmitter=new Qe.Emitter;partialMessageEmitter=new Qe.Emitter;onError=this.errorEmitter.event;onClose=this.closeEmitter.event;onPartialMessage=this.partialMessageEmitter.event;messageHandler=e=>{try{const t=e.data,o=typeof t=="string"?JSON.parse(t):t;this.messageEmitter.fire(o)}catch(t){console.error("[DAE LSP Worker] Error handling message:",t),this.errorEmitter.fire(t instanceof Error?t:new Error(String(t)))}};constructor(){self.addEventListener("message",this.messageHandler)}listen(e){return this.messageEmitter.event(e)}dispose(){self.removeEventListener("message",this.messageHandler),this.errorEmitter.dispose(),this.closeEmitter.dispose(),this.messageEmitter.dispose(),this.partialMessageEmitter.dispose()}},ao=class{errorEmitter=new Qe.Emitter;closeEmitter=new Qe.Emitter;onError=this.errorEmitter.event;onClose=this.closeEmitter.event;async write(e){try{self.postMessage(JSON.stringify(e))}catch(t){this.errorEmitter.fire([t instanceof Error?t:new Error(String(t)),e,void 0])}}end(){this.closeEmitter.fire()}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}};no((0,Qe.createConnection)(new oo,new ao),new ro.TextDocuments(ni))})();
